"use strict";
(self["webpackChunkmystore_6_3"] = self["webpackChunkmystore_6_3"] || []).push([["node_modules_spartacus_checkout_fesm2020_spartacus-checkout-base_mjs"],{

/***/ 2801:
/*!******************************************************************************************!*\
  !*** ./node_modules/@spartacus/checkout/fesm2020/spartacus-checkout-base-components.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CartNotEmptyGuard": () => (/* binding */ CartNotEmptyGuard),
/* harmony export */   "CheckoutAuthGuard": () => (/* binding */ CheckoutAuthGuard),
/* harmony export */   "CheckoutComponentsModule": () => (/* binding */ CheckoutComponentsModule),
/* harmony export */   "CheckoutConfigService": () => (/* binding */ CheckoutConfigService),
/* harmony export */   "CheckoutDeliveryAddressComponent": () => (/* binding */ CheckoutDeliveryAddressComponent),
/* harmony export */   "CheckoutDeliveryAddressModule": () => (/* binding */ CheckoutDeliveryAddressModule),
/* harmony export */   "CheckoutDeliveryModeComponent": () => (/* binding */ CheckoutDeliveryModeComponent),
/* harmony export */   "CheckoutDeliveryModeModule": () => (/* binding */ CheckoutDeliveryModeModule),
/* harmony export */   "CheckoutGuard": () => (/* binding */ CheckoutGuard),
/* harmony export */   "CheckoutLoginComponent": () => (/* binding */ CheckoutLoginComponent),
/* harmony export */   "CheckoutLoginModule": () => (/* binding */ CheckoutLoginModule),
/* harmony export */   "CheckoutOrchestratorComponent": () => (/* binding */ CheckoutOrchestratorComponent),
/* harmony export */   "CheckoutOrchestratorModule": () => (/* binding */ CheckoutOrchestratorModule),
/* harmony export */   "CheckoutOrderSummaryComponent": () => (/* binding */ CheckoutOrderSummaryComponent),
/* harmony export */   "CheckoutOrderSummaryModule": () => (/* binding */ CheckoutOrderSummaryModule),
/* harmony export */   "CheckoutPaymentFormComponent": () => (/* binding */ CheckoutPaymentFormComponent),
/* harmony export */   "CheckoutPaymentFormModule": () => (/* binding */ CheckoutPaymentFormModule),
/* harmony export */   "CheckoutPaymentMethodComponent": () => (/* binding */ CheckoutPaymentMethodComponent),
/* harmony export */   "CheckoutPaymentMethodModule": () => (/* binding */ CheckoutPaymentMethodModule),
/* harmony export */   "CheckoutPlaceOrderComponent": () => (/* binding */ CheckoutPlaceOrderComponent),
/* harmony export */   "CheckoutPlaceOrderModule": () => (/* binding */ CheckoutPlaceOrderModule),
/* harmony export */   "CheckoutProgressComponent": () => (/* binding */ CheckoutProgressComponent),
/* harmony export */   "CheckoutProgressMobileBottomComponent": () => (/* binding */ CheckoutProgressMobileBottomComponent),
/* harmony export */   "CheckoutProgressMobileBottomModule": () => (/* binding */ CheckoutProgressMobileBottomModule),
/* harmony export */   "CheckoutProgressMobileTopComponent": () => (/* binding */ CheckoutProgressMobileTopComponent),
/* harmony export */   "CheckoutProgressMobileTopModule": () => (/* binding */ CheckoutProgressMobileTopModule),
/* harmony export */   "CheckoutProgressModule": () => (/* binding */ CheckoutProgressModule),
/* harmony export */   "CheckoutReviewSubmitComponent": () => (/* binding */ CheckoutReviewSubmitComponent),
/* harmony export */   "CheckoutReviewSubmitModule": () => (/* binding */ CheckoutReviewSubmitModule),
/* harmony export */   "CheckoutStepService": () => (/* binding */ CheckoutStepService),
/* harmony export */   "CheckoutStepsSetGuard": () => (/* binding */ CheckoutStepsSetGuard),
/* harmony export */   "ExpressCheckoutService": () => (/* binding */ ExpressCheckoutService),
/* harmony export */   "NotCheckoutAuthGuard": () => (/* binding */ NotCheckoutAuthGuard)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/common */ 4666);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ 124);
/* harmony import */ var _spartacus_cart_base_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @spartacus/cart/base/core */ 7732);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @spartacus/storefront */ 4373);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 9151);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 9095);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 823);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 8759);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 3910);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 7418);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 3298);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ 1745);
/* harmony import */ var _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @spartacus/cart/base/root */ 6061);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 9193);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 4505);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ 4139);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ 6439);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ 2425);
/* harmony import */ var _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @spartacus/checkout/base/root */ 7846);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/forms */ 2508);
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @ng-select/ng-select */ 3054);
/* harmony import */ var _spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @spartacus/order/root */ 9132);
























/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 12)(2, "div", 16)(3, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_3_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r15);
      const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r14.showNewAddressForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 1, "checkoutAddress.addNewAddress"), " ");
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 18)(2, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_4_Template_button_click_2_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17);
      const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r16.showNewAddressForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 1, "checkoutAddress.addNewAddress"), " ");
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 19)(1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_6_Template_div_click_1_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21);
      const card_r18 = restoredCtx.$implicit;
      const ctx_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r20.selectAddress(card_r18.address));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "cx-card", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("sendCard", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_6_Template_cx_card_sendCard_2_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r21);
      const card_r18 = restoredCtx.$implicit;
      const ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r22.selectAddress(card_r18.address));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const card_r18 = ctx.$implicit;
    const i_r19 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", true)("index", i_r19)("fitToContainer", true)("content", card_r18.card);
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 22)(2, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_7_Template_button_click_2_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24);
      const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r23.showNewAddressForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 1, "checkoutAddress.addNewAddress"), " ");
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "p", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_3_Template, 6, 3, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_4_Template, 5, 3, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_div_6_Template, 3, 4, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_ng_container_7_Template, 5, 3, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 12)(9, "div", 13)(10, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template_button_click_10_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26);
      const ctx_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r25.back());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div", 13)(14, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template_button_click_14_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r26);
      const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r27.next());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](17, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const cards_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).ngIf;
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    let tmp_6_0;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 8, "checkoutAddress.selectYourDeliveryAddress"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "!6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", cards_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](12, 10, ctx_r7.backBtnText), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !((tmp_6_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 12, ctx_r7.selectedAddress$)) == null ? null : tmp_6_0.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](17, 14, "common.continue"), " ");
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "cx-address-form", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("backToAddress", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template_cx_address_form_backToAddress_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33);
      const ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r32.hideNewAddressForm(false));
    })("submitAddress", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template_cx_address_form_submitAddress_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r33);
      const ctx_r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r34.addAddress($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showTitleCode", true);
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r36 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "cx-address-form", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("backToAddress", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template_cx_address_form_backToAddress_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36);
      const ctx_r35 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r35.hideNewAddressForm(true));
    })("submitAddress", function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template_cx_address_form_submitAddress_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r36);
      const ctx_r37 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r37.addAddress($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("cancelBtnLabel", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 4, ctx_r31.backBtnText));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("showTitleCode", true)("setAsDefaultField", !ctx_r31.isGuestCheckout)("addressData", ctx_r31.selectedAddress);
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_cx_address_form_0_Template, 1, 1, "cx-address-form", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_ng_template_1_Template, 2, 6, "ng-template", null, 24, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
  }
  if (rf & 2) {
    const _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](2);
    const cards_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", cards_r3.length)("ngIfElse", _r30);
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_container_3_Template, 1, 0, "ng-container", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_4_Template, 18, 16, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_ng_template_6_Template, 3, 2, "ng-template", null, 7, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](5);
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](7);
    const cards_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 4, "common.loaded"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (cards_r3 == null ? null : cards_r3.length) && !ctx_r4.addressFormOpened)("ngIfThen", _r6)("ngIfElse", _r8);
  }
}
function CheckoutDeliveryAddressComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutDeliveryAddressComponent_ng_container_3_ng_container_1_Template, 8, 6, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 2, ctx_r0.isUpdating$))("ngIfElse", _r1);
  }
}
function CheckoutDeliveryAddressComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-spinner");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
}
function CheckoutDeliveryModeComponent_ng_container_3_div_5_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const mode_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"](" ", mode_r6.name, " (", mode_r6.description, ") ");
  }
}
function CheckoutDeliveryModeComponent_ng_container_3_div_5_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const mode_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", mode_r6.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("(", mode_r6.description, ")");
  }
}
function CheckoutDeliveryModeComponent_ng_container_3_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 13)(1, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function CheckoutDeliveryModeComponent_ng_container_3_div_5_Template_input_change_1_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r12);
      const mode_r6 = restoredCtx.$implicit;
      const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r11.changeMode(mode_r6.code));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "label", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutDeliveryModeComponent_ng_container_3_div_5_ng_container_3_Template, 3, 2, "ng-container", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutDeliveryModeComponent_ng_container_3_div_5_ng_container_4_Template, 5, 2, "ng-container", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const mode_r6 = ctx.$implicit;
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("id", "deliveryMode-", mode_r6.code, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", mode_r6.code);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-checked", ctx_r5.getAriaChecked(mode_r6.code));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate1"]("for", "deliveryMode-", mode_r6.code, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "!6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", mode_r6.deliveryCost == null ? null : mode_r6.deliveryCost.formattedValue, " ");
  }
}
function CheckoutDeliveryModeComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 10)(4, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CheckoutDeliveryModeComponent_ng_container_3_div_5_Template, 8, 7, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const supportedDeliveryModes_r4 = ctx.ngIf;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 3, "common.loaded"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r0.mode);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", supportedDeliveryModes_r4);
  }
}
function CheckoutDeliveryModeComponent_ng_container_6_ng_template_4_Template(rf, ctx) {}
const _c0 = function (a0) {
  return {
    items: a0,
    readonly: true
  };
};
function CheckoutDeliveryModeComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h2", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutDeliveryModeComponent_ng_container_6_ng_template_4_Template, 0, 0, "ng-template", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 3, "checkoutMode.deliveryEntries"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxOutlet", ctx_r1.CartOutlets.CART_ITEM_LIST)("cxOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](7, _c0, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 5, ctx_r1.activeCartFacade.getDeliveryEntries())));
  }
}
function CheckoutDeliveryModeComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-spinner");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
}
function CheckoutOrderSummaryComponent_ng_template_0_Template(rf, ctx) {}
const _c1 = function () {
  return {
    required: "true"
  };
};
const _c2 = function (a0) {
  return {
    ariaLabel: a0
  };
};
function CheckoutPaymentFormComponent_ng_container_0_ng_container_7_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div")(1, "label")(2, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "ng-select", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const cardTypes_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 8, "paymentForm.paymentType"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 10, "paymentForm.selectOne"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("inputAttrs", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](14, _c1))("searchable", true)("clearable", false)("items", cardTypes_r11)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](15, _c2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 12, "paymentForm.paymentType")));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r12.paymentForm.get("cardType.code"));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutPaymentFormComponent_ng_container_0_ng_container_7_div_1_Template, 9, 17, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const cardTypes_r11 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", cardTypes_r11.length !== 0);
  }
}
function CheckoutPaymentFormComponent_ng_container_0_div_49_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 8)(1, "div", 31)(2, "label")(3, "input", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function CheckoutPaymentFormComponent_ng_container_0_div_49_Template_input_change_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r15);
      const ctx_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r14.toggleDefaultPaymentMethod());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "span", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 1, "paymentForm.setAsDefault"));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_container_54_Template(rf, ctx) {
  if (rf & 1) {
    const _r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 8)(2, "div", 31)(3, "label")(4, "input", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function CheckoutPaymentFormComponent_ng_container_0_ng_container_54_Template_input_change_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r17);
      const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r16.toggleSameAsDeliveryAddress());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "span", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("checked", ctx_r5.sameAsDeliveryAddress);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 3, "paymentForm.billingAddressSameAsShipping"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 5, "paymentForm.sameAsDeliveryAddress"));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_container_56_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-card", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const deliveryAddress_r18 = ctx.ngIf;
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", ctx_r6.getAddressCardContent(deliveryAddress_r18));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_2_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div")(1, "label")(2, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "ng-select", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_2_div_1_Template_ng_select_change_5_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r24);
      const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r23.countrySelected($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const countries_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 8, "addressForm.country"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 10, "addressForm.selectOne"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("inputAttrs", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](14, _c1))("searchable", true)("clearable", false)("items", countries_r21)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](15, _c2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 12, "addressForm.country")));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r22.billingAddressForm.get("country.isocode"));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_2_div_1_Template, 9, 17, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const countries_r21 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", countries_r21.length !== 0);
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_52_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 42)(2, "label")(3, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "ng-select", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const regions_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 10, "addressForm.state"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("bindLabel", regions_r26[0].name ? "name" : "isocodeShort");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("bindValue", regions_r26[0].name ? "isocodeShort" : "region");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 12, "addressForm.selectOne"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("inputAttrs", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](16, _c1))("searchable", true)("clearable", false)("items", regions_r26)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](17, _c2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 14, "addressForm.state")));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r27.billingAddressForm.get("region.isocodeShort"));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_52_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0, 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_52_ng_container_1_Template, 10, 19, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const regions_r26 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", regions_r26.length !== 0);
  }
}
function CheckoutPaymentFormComponent_ng_container_0_ng_template_58_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 36)(1, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_2_Template, 2, 1, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 8)(5, "label")(6, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "input", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](11, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 8)(13, "label")(14, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](16, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](17, "input", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](18, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](19, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](20, "div", 8)(21, "label")(22, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](24, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](25, "input", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](26, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](27, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](28, "div", 8)(29, "label")(30, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](31);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](32, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](33, "input", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](34, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](35, "div", 4)(36, "div", 42)(37, "label")(38, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](39);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](40, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](41, "input", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](42, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](43, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](44, "div", 42)(45, "label")(46, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](47);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](48, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](49, "input", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](50, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](51, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](52, CheckoutPaymentFormComponent_ng_container_0_ng_template_58_ng_container_52_Template, 2, 1, "ng-container", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](53, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r8.billingAddressForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 20, ctx_r8.countries$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 22, "addressForm.firstName.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 24, "addressForm.firstName.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r8.billingAddressForm.get("firstName"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](16, 26, "addressForm.lastName.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](18, 28, "addressForm.lastName.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r8.billingAddressForm.get("lastName"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](24, 30, "addressForm.address1"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](26, 32, "addressForm.streetAddress"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r8.billingAddressForm.get("line1"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](32, 34, "addressForm.address2"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](34, 36, "addressForm.aptSuite"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](40, 38, "addressForm.city.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](42, 40, "addressForm.city.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r8.billingAddressForm.get("town"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](48, 42, "addressForm.zipCode.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](50, 44, "addressForm.zipCode.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r8.billingAddressForm.get("postalCode"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](53, 46, ctx_r8.regions$));
  }
}
function CheckoutPaymentFormComponent_ng_container_0_button_62_Template(rf, ctx) {
  if (rf & 1) {
    const _r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentFormComponent_ng_container_0_button_62_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r30);
      const ctx_r29 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r29.back());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 1, "common.back"), " ");
  }
}
function CheckoutPaymentFormComponent_ng_container_0_button_63_Template(rf, ctx) {
  if (rf & 1) {
    const _r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentFormComponent_ng_container_0_button_63_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r32);
      const ctx_r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r31.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 1, "paymentForm.changePayment"), " ");
  }
}
const _c3 = function (a0) {
  return {
    selected: a0
  };
};
function CheckoutPaymentFormComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r34 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "form", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function CheckoutPaymentFormComponent_ng_container_0_Template_form_ngSubmit_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r34);
      const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r33.next());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 4)(5, "div", 5)(6, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, CheckoutPaymentFormComponent_ng_container_0_ng_container_7_Template, 2, 1, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 8)(10, "label")(11, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](14, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "div", 8)(18, "label")(19, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](21, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](22, "input", 12)(23, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](24, "div", 4)(25, "div", 13)(26, "fieldset", 14)(27, "legend", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](29, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](30, "label", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](31, "ng-select", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](32, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](33, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](34, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](35, "label", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](36, "ng-select", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](37, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](38, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](39, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](40, "div", 18)(41, "label")(42, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](44, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](45, "cx-icon", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](46, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](47, "input", 20)(48, "cx-form-errors", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](49, CheckoutPaymentFormComponent_ng_container_0_div_49_Template, 7, 3, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](50, "div", 22)(51, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](52);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](53, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](54, CheckoutPaymentFormComponent_ng_container_0_ng_container_54_Template, 9, 7, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](55, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](56, CheckoutPaymentFormComponent_ng_container_0_ng_container_56_Template, 2, 1, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](57, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](58, CheckoutPaymentFormComponent_ng_container_0_ng_template_58_Template, 54, 48, "ng-template", null, 24, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](60, "div", 25)(61, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](62, CheckoutPaymentFormComponent_ng_container_0_button_62_Template, 3, 3, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](63, CheckoutPaymentFormComponent_ng_container_0_button_63_Template, 3, 3, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](64, "div", 26)(65, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](66);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](67, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](59);
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    let tmp_14_0;
    let tmp_21_0;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 35, "common.loaded"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r0.paymentForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 37, ctx_r0.cardTypes$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 39, "paymentForm.accountHolderName.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 41, "paymentForm.accountHolderName.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.paymentForm.get("accountHolderName"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](21, 43, "paymentForm.cardNumber"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.paymentForm.get("cardNumber"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](29, 45, "paymentForm.expirationDate"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](32, 47, "paymentForm.monthMask"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("inputAttrs", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](69, _c1))("searchable", true)("clearable", false)("items", ctx_r0.months)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](72, _c2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](33, 49, "paymentForm.expirationMonth", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](70, _c3, (tmp_14_0 = ctx_r0.paymentForm.get("expiryMonth")) == null ? null : tmp_14_0.value))));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.paymentForm.get("expiryMonth"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](37, 52, "paymentForm.yearMask"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("inputAttrs", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](74, _c1))("searchable", true)("clearable", false)("items", ctx_r0.years)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](77, _c2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](38, 54, "paymentForm.expirationYear", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](75, _c3, (tmp_21_0 = ctx_r0.paymentForm.get("expiryYear")) == null ? null : tmp_21_0.value))));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.paymentForm.get("expiryYear"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](44, 57, "paymentForm.securityCode"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("title", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](46, 59, "paymentForm.securityCodeTitle"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r0.iconTypes.INFO);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.paymentForm.get("cvn"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.setAsDefaultField);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](53, 61, "paymentForm.billingAddress"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](55, 63, ctx_r0.showSameAsDeliveryAddressCheckbox$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.sameAsDeliveryAddress && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](57, 65, ctx_r0.deliveryAddress$))("ngIfElse", _r7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.paymentMethodsCount === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.paymentMethodsCount > 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](67, 67, "common.continue"), " ");
  }
}
function CheckoutPaymentFormComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-spinner");
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_container_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutPaymentMethodComponent_ng_container_3_ng_container_1_ng_container_3_Template, 1, 0, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const cards_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](4);
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](6);
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 4, "common.loaded"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (cards_r3 == null ? null : cards_r3.length) && !ctx_r4.newPaymentFormManuallyOpened)("ngIfThen", _r5)("ngIfElse", _r7);
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 16)(2, "div", 13)(3, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_3_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r16);
      const ctx_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r15.showNewPaymentForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 1, "paymentForm.addNewPayment"), " ");
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 17)(2, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_4_Template_button_click_2_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r18);
      const ctx_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r17.showNewPaymentForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 1, "paymentForm.addNewPayment"), " ");
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r22 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18)(1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_div_6_Template_div_click_1_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22);
      const card_r19 = restoredCtx.$implicit;
      const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r21.selectPaymentMethod(card_r19.paymentMethod));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "cx-card", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("sendCard", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_div_6_Template_cx_card_sendCard_2_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r22);
      const card_r19 = restoredCtx.$implicit;
      const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r23.selectPaymentMethod(card_r19.paymentMethod));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const card_r19 = ctx.$implicit;
    const i_r20 = ctx.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("border", true)("fitToContainer", true)("content", card_r19.content)("index", i_r20);
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 21)(2, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_7_Template_button_click_2_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r25);
      const ctx_r24 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r24.showNewPaymentForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 1, "paymentForm.addNewPayment"), " ");
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r27 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "p", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_3_Template, 6, 3, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_4_Template, 5, 3, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_div_6_Template, 3, 4, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_ng_container_7_Template, 5, 3, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 12)(9, "div", 13)(10, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_Template_button_click_10_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27);
      const ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r26.back());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "div", 13)(14, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_Template_button_click_14_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r27);
      const ctx_r28 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r28.next());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](17, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const cards_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    let tmp_6_0;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 8, "paymentForm.choosePaymentMethod"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "!6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", cards_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFeatureLevel", "6.3");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](12, 10, ctx_r6.backBtnText), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", !((tmp_6_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 12, ctx_r6.selectedMethod$)) == null ? null : tmp_6_0.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](17, 14, "common.continue"), " ");
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r31 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "cx-payment-form", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("setPaymentDetails", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_5_Template_cx_payment_form_setPaymentDetails_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r31);
      const ctx_r30 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r30.setPaymentDetails($event));
    })("closeForm", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_5_Template_cx_payment_form_closeForm_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r31);
      const ctx_r32 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r32.hideNewPaymentForm());
    })("goBack", function CheckoutPaymentMethodComponent_ng_container_3_ng_template_5_Template_cx_payment_form_goBack_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r31);
      const ctx_r33 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r33.back());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const cards_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("paymentMethodsCount", (cards_r3 == null ? null : cards_r3.length) || 0)("setAsDefaultField", !ctx_r8.isGuestCheckout && !!(cards_r3 == null ? null : cards_r3.length))("loading", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 4, ctx_r8.isUpdating$))("paymentDetails", ctx_r8.paymentDetails);
  }
}
function CheckoutPaymentMethodComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutPaymentMethodComponent_ng_container_3_ng_container_1_Template, 4, 6, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutPaymentMethodComponent_ng_container_3_ng_template_3_Template, 18, 16, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CheckoutPaymentMethodComponent_ng_container_3_ng_template_5_Template, 2, 6, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 2, ctx_r0.isUpdating$))("ngIfElse", _r1);
  }
}
function CheckoutPaymentMethodComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-spinner");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
}
const _c4 = function () {
  return {
    cxRoute: "termsAndConditions"
  };
};
function CheckoutProgressMobileBottomComponent_div_0_div_2_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4)(1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const i_r3 = ctx_r5.index;
    const step_r2 = ctx_r5.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"]("", i_r3 + 1, ". ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 2, step_r2.name), "");
  }
}
function CheckoutProgressMobileBottomComponent_div_0_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutProgressMobileBottomComponent_div_0_div_2_div_1_Template, 4, 4, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const i_r3 = ctx.index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", i_r3 > ctx_r1.activeStepIndex);
  }
}
function CheckoutProgressMobileBottomComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div")(1, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutProgressMobileBottomComponent_div_0_div_2_Template, 2, 1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 1, ctx_r0.steps$));
  }
}
const _c5 = function (a0) {
  return {
    count: a0
  };
};
function CheckoutProgressMobileTopComponent_div_0_div_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const cart_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 2, "cartItems.cartTotal", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](5, _c5, cart_r2.totalItems)), ": ", cart_r2.subTotal.formattedValue, " ");
  }
}
const _c6 = function (a0) {
  return {
    cxRoute: a0
  };
};
function CheckoutProgressMobileTopComponent_div_0_div_1_div_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4)(1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const i_r7 = ctx_r10.index;
    const step_r6 = ctx_r10.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"]("", i_r7 + 1, ". ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 4, step_r6.name), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c6, step_r6.routeName)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 8, "common.edit"), " ");
  }
}
function CheckoutProgressMobileTopComponent_div_0_div_1_div_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 7)(1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const i_r7 = ctx_r11.index;
    const step_r6 = ctx_r11.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"]("", i_r7 + 1, ". ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 2, step_r6.name), "");
  }
}
function CheckoutProgressMobileTopComponent_div_0_div_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutProgressMobileTopComponent_div_0_div_1_div_3_div_1_Template, 8, 12, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutProgressMobileTopComponent_div_0_div_1_div_3_div_2_Template, 4, 4, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const i_r7 = ctx.index;
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", i_r7 < ctx_r4.activeStepIndex);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", i_r7 === ctx_r4.activeStepIndex);
  }
}
function CheckoutProgressMobileTopComponent_div_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div")(1, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutProgressMobileTopComponent_div_0_div_1_div_2_Template, 3, 7, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutProgressMobileTopComponent_div_0_div_1_div_3_Template, 3, 2, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const cart_r2 = ctx.ngIf;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (cart_r2 == null ? null : cart_r2.totalItems) && (cart_r2 == null ? null : cart_r2.subTotal));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 2, ctx_r1.steps$));
  }
}
function CheckoutProgressMobileTopComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutProgressMobileTopComponent_div_0_div_1_Template, 5, 4, "div", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 1, ctx_r0.cart$));
  }
}
function CheckoutProgressComponent_nav_0_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "li", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "a", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxMultiLine");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const step_r2 = ctx.$implicit;
    const i_r3 = ctx.index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r1.isActive(i_r3))("disabled", ctx_r1.isDisabled(i_r3));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("active", ctx_r1.isActive(i_r3))("disabled", ctx_r1.isDisabled(i_r3));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 11, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](19, _c6, step_r2.routeName)))("tabindex", ctx_r1.getTabIndex(i_r3))("innerHTML", step_r2.nameMultiLine !== false ? _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 13, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 15, step_r2.name)) : _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 17, step_r2.name), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeHtml"]);
  }
}
function CheckoutProgressComponent_nav_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "nav");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 1)(3, "ul", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutProgressComponent_nav_0_ng_container_4_Template, 7, 21, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 2, "checkoutProgress.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 4, ctx_r0.steps$));
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r5);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0)(1, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutReviewSubmitComponent_ng_container_5_ng_container_2_ng_container_2_Template, 2, 1, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]()();
  }
  if (rf & 2) {
    const step_r11 = ctx.$implicit;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", step_r11.type[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r9.checkoutStepTypePaymentDetails);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r1);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](0);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngTemplateOutlet", _r3);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0)(1, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_2_Template, 2, 1, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_ng_container_3_Template, 2, 1, "ng-container", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]()();
  }
  if (rf & 2) {
    const step_r14 = ctx.$implicit;
    const ctx_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitch", step_r14.type[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r10.checkoutStepTypeDeliveryAddress);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngSwitchCase", ctx_r10.checkoutStepTypeDeliveryMode);
  }
}
function CheckoutReviewSubmitComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutReviewSubmitComponent_ng_container_5_ng_container_2_Template, 3, 2, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, CheckoutReviewSubmitComponent_ng_container_5_ng_container_4_Template, 4, 3, "ng-container", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const steps_r8 = ctx.ngIf;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r0.paymentSteps(steps_r8));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r0.deliverySteps(steps_r8));
  }
}
function CheckoutReviewSubmitComponent_ng_template_7_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-card", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 16)(4, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "cx-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const deliveryAddress_r20 = ctx.ngIf;
    const ctx_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 4, ctx_r19.getDeliveryAddressCard(deliveryAddress_r20)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c6, ctx_r19.getCheckoutStepUrl(ctx_r19.checkoutStepTypeDeliveryAddress))));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 6, "checkoutReview.editDeliveryAddressDetails"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r19.iconTypes.PENCIL);
  }
}
function CheckoutReviewSubmitComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutReviewSubmitComponent_ng_template_7_div_0_Template, 8, 12, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx_r2.deliveryAddress$));
  }
}
function CheckoutReviewSubmitComponent_ng_template_9_cx_card_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-card", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
  }
  if (rf & 2) {
    const deliveryMode_r22 = ctx.ngIf;
    const ctx_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx_r21.getDeliveryModeCard(deliveryMode_r22)));
  }
}
function CheckoutReviewSubmitComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutReviewSubmitComponent_ng_template_9_cx_card_1_Template, 2, 3, "cx-card", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 16)(4, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "cx-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 4, ctx_r4.deliveryMode$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c6, ctx_r4.getCheckoutStepUrl(ctx_r4.checkoutStepTypeDeliveryMode))));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 6, "checkoutReview.editDeliveryMode"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r4.iconTypes.PENCIL);
  }
}
function CheckoutReviewSubmitComponent_ng_template_11_cx_card_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-card", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
  }
  if (rf & 2) {
    const paymentDetails_r24 = ctx.ngIf;
    const ctx_r23 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx_r23.getPaymentMethodCard(paymentDetails_r24)));
  }
}
function CheckoutReviewSubmitComponent_ng_template_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 21)(1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutReviewSubmitComponent_ng_template_11_cx_card_2_Template, 2, 3, "cx-card", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 16)(5, "a", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "cx-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 4, ctx_r6.paymentDetails$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c6, ctx_r6.getCheckoutStepUrl(ctx_r6.checkoutStepTypePaymentDetails))));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 6, "checkoutReview.editPaymentDetails"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r6.iconTypes.PENCIL);
  }
}
function CheckoutReviewSubmitComponent_ng_container_13_div_7_ng_template_2_Template(rf, ctx) {}
const _c7 = function () {
  return [];
};
const _c8 = function (a0, a2) {
  return {
    items: a0,
    readonly: true,
    promotionLocation: a2
  };
};
function CheckoutReviewSubmitComponent_ng_container_13_div_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-promotions", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, CheckoutReviewSubmitComponent_ng_container_13_div_7_ng_template_2_Template, 0, 0, "ng-template", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const entries_r27 = ctx.ngIf;
    const cart_r25 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r26 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("promotions", (cart_r25.appliedOrderPromotions || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](4, _c7)).concat(cart_r25.potentialOrderPromotions || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](3, _c7)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxOutlet", ctx_r26.cartOutlets.CART_ITEM_LIST)("cxOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction2"](5, _c8, entries_r27, ctx_r26.promotionLocation));
  }
}
function CheckoutReviewSubmitComponent_ng_container_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, CheckoutReviewSubmitComponent_ng_container_13_div_7_Template, 3, 8, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const cart_r25 = ctx.ngIf;
    const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](3, 4, "cartItems.cartTotal", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](11, _c5, cart_r25.deliveryItemsQuantity)), ": ", cart_r25.totalPrice == null ? null : cart_r25.totalPrice.formattedValue, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 7, "checkoutReview.placeOrder"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 9, ctx_r7.entries$));
  }
}
function CheckoutReviewOverviewComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "cx-promotions", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const cart_r1 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](3, 3, "cartItems.cartTotal", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](6, _c5, cart_r1.totalUnitCount)), ": ", cart_r1.totalPrice == null ? null : cart_r1.totalPrice.formattedValue, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("promotions", (cart_r1.appliedOrderPromotions || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](9, _c7)).concat(cart_r1.potentialOrderPromotions || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](8, _c7)));
  }
}
function CheckoutReviewPaymentComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 1)(1, "div", 2)(2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "cx-card", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "div", 4)(6, "a", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "cx-icon", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "div", 2)(11, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "cx-card", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "div", 4)(15, "a", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](16, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](17, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](18, "cx-icon", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const paymentDetails_r1 = ctx.ngIf;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 8, ctx_r0.getBillingAddressCard(paymentDetails_r1)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 12, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](20, _c6, ctx_r0.paymentDetailsStepRoute)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 10, "checkoutReview.editPaymentDetails"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r0.iconTypes.PENCIL);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 14, ctx_r0.getPaymentMethodCard(paymentDetails_r1)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](17, 18, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](22, _c6, ctx_r0.paymentDetailsStepRoute)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](16, 16, "checkoutReview.editPaymentDetails"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r0.iconTypes.PENCIL);
  }
}
function CheckoutReviewShippingComponent_ng_container_0_ng_container_1_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-card", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 7)(4, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "cx-icon", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const deliveryAddress_r6 = ctx.ngIf;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 4, ctx_r3.getDeliveryAddressCard(deliveryAddress_r6)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 8, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](10, _c6, ctx_r3.deliveryAddressStepRoute)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 6, "checkoutReview.editDeliveryAddressDetails"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r3.iconTypes.PENCIL);
  }
}
function CheckoutReviewShippingComponent_ng_container_0_ng_container_1_cx_card_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-card", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
  }
  if (rf & 2) {
    const deliveryMode_r7 = ctx.ngIf;
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("content", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx_r4.getDeliveryModeCard(deliveryMode_r7)));
  }
}
function CheckoutReviewShippingComponent_ng_container_0_ng_container_1_ng_template_18_Template(rf, ctx) {}
function CheckoutReviewShippingComponent_ng_container_0_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "h2", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 2)(5, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, CheckoutReviewShippingComponent_ng_container_0_ng_container_1_div_6_Template, 8, 12, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "div", 3)(9, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](10, CheckoutReviewShippingComponent_ng_container_0_ng_container_1_cx_card_10_Template, 2, 3, "cx-card", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](11, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "div", 7)(13, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "cx-icon", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](18, CheckoutReviewShippingComponent_ng_container_0_ng_container_1_ng_template_18_Template, 0, 0, "ng-template", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const entries_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 8, "checkoutMode.deliveryEntries"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 10, ctx_r2.deliveryAddress$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](11, 12, ctx_r2.deliveryMode$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 16, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](18, _c6, ctx_r2.deliveryModeStepRoute)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 14, "checkoutReview.editDeliveryMode"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r2.iconTypes.PENCIL);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxOutlet", ctx_r2.cartOutlets.CART_ITEM_LIST)("cxOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](20, _c0, entries_r1));
  }
}
function CheckoutReviewShippingComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutReviewShippingComponent_ng_container_0_ng_container_1_Template, 19, 22, "ng-container", 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const entries_r1 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", entries_r1.length > 0);
  }
}
class CartNotEmptyGuard {
  constructor(activeCartFacade, semanticPathService, router) {
    this.activeCartFacade = activeCartFacade;
    this.semanticPathService = semanticPathService;
    this.router = router;
  }
  canActivate() {
    return this.activeCartFacade.takeActive().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(cart => {
      if (this.isEmpty(cart)) {
        return this.router.parseUrl(this.semanticPathService.get('home') ?? '');
      }
      return true;
    }));
  }
  isEmpty(cart) {
    return cart && !cart.totalItems;
  }
}
CartNotEmptyGuard.ɵfac = function CartNotEmptyGuard_Factory(t) {
  return new (t || CartNotEmptyGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.SemanticPathService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.Router));
};
CartNotEmptyGuard.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CartNotEmptyGuard,
  factory: CartNotEmptyGuard.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CartNotEmptyGuard, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.SemanticPathService
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.Router
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutConfigService {
  constructor(checkoutConfig) {
    this.checkoutConfig = checkoutConfig;
    this.express = this.checkoutConfig.checkout?.express ?? false;
    this.guest = this.checkoutConfig.checkout?.guest ?? false;
    this.defaultDeliveryMode = this.checkoutConfig.checkout?.defaultDeliveryMode || [];
  }
  compareDeliveryCost(deliveryMode1, deliveryMode2) {
    if (deliveryMode1.deliveryCost?.value && deliveryMode2.deliveryCost?.value) {
      if (deliveryMode1.deliveryCost.value > deliveryMode2.deliveryCost.value) {
        return 1;
      } else if (deliveryMode1.deliveryCost.value < deliveryMode2.deliveryCost.value) {
        return -1;
      }
    }
    return 0;
  }
  findMatchingDeliveryMode(deliveryModes, index = 0) {
    switch (this.defaultDeliveryMode[index]) {
      case _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.DeliveryModePreferences.FREE:
        if (deliveryModes[0].deliveryCost?.value === 0) {
          return deliveryModes[0].code;
        }
        break;
      case _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.DeliveryModePreferences.LEAST_EXPENSIVE:
        const leastExpensiveFound = deliveryModes.find(deliveryMode => deliveryMode.deliveryCost?.value !== 0);
        if (leastExpensiveFound) {
          return leastExpensiveFound.code;
        }
        break;
      case _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.DeliveryModePreferences.MOST_EXPENSIVE:
        return deliveryModes[deliveryModes.length - 1].code;
      default:
        const codeFound = deliveryModes.find(deliveryMode => deliveryMode.code === this.defaultDeliveryMode[index]);
        if (codeFound) {
          return codeFound.code;
        }
    }
    const lastMode = this.defaultDeliveryMode.length - 1 <= index;
    return lastMode ? deliveryModes[0].code : this.findMatchingDeliveryMode(deliveryModes, index + 1);
  }
  shouldUseAddressSavedInCart() {
    return !!this.checkoutConfig?.checkout?.guestUseSavedAddress;
  }
  getPreferredDeliveryMode(deliveryModes) {
    deliveryModes.sort(this.compareDeliveryCost);
    return this.findMatchingDeliveryMode(deliveryModes);
  }
  isExpressCheckout() {
    return this.express;
  }
  isGuestCheckout() {
    return this.guest;
  }
}
CheckoutConfigService.ɵfac = function CheckoutConfigService_Factory(t) {
  return new (t || CheckoutConfigService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutConfig));
};
CheckoutConfigService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutConfigService,
  factory: CheckoutConfigService.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutConfigService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutConfig
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutAuthGuard {
  constructor(authService, authRedirectService, checkoutConfigService, activeCartFacade, semanticPathService, router) {
    this.authService = authService;
    this.authRedirectService = authRedirectService;
    this.checkoutConfigService = checkoutConfigService;
    this.activeCartFacade = activeCartFacade;
    this.semanticPathService = semanticPathService;
    this.router = router;
  }
  canActivate() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.authService.isUserLoggedIn(), this.activeCartFacade.isGuestCart(), this.activeCartFacade.isStable()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([isLoggedIn, isGuestCart, isStable]) => ({
      isLoggedIn,
      isGuestCart,
      isStable
    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(data => data.isStable), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(data => {
      if (!data.isLoggedIn) {
        return data.isGuestCart ? true : this.handleAnonymousUser();
      }
      return data.isLoggedIn;
    }));
  }
  handleAnonymousUser() {
    this.authRedirectService.saveCurrentNavigationUrl();
    if (this.checkoutConfigService.isGuestCheckout()) {
      return this.router.createUrlTree([this.semanticPathService.get('login')], {
        queryParams: {
          forced: true
        }
      });
    } else {
      return this.router.parseUrl(this.semanticPathService.get('login') ?? '');
    }
  }
}
CheckoutAuthGuard.ɵfac = function CheckoutAuthGuard_Factory(t) {
  return new (t || CheckoutAuthGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthRedirectService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.SemanticPathService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.Router));
};
CheckoutAuthGuard.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutAuthGuard,
  factory: CheckoutAuthGuard.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutAuthGuard, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthRedirectService
    }, {
      type: CheckoutConfigService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.SemanticPathService
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.Router
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutStepService {
  constructor(routingService, checkoutConfig, routingConfigService) {
    this.routingService = routingService;
    this.checkoutConfig = checkoutConfig;
    this.routingConfigService = routingConfigService;
    this.steps$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject([]);
    this.activeStepIndex$ = this.routingService.getRouterState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(router => {
      const activeStepUrl = router.state.context.id;
      return this.steps$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(steps => {
        let activeIndex = 0;
        steps.forEach((step, index) => {
          const routeUrl = `/${this.routingConfigService.getRouteConfig(step.routeName)?.paths?.[0]}`;
          if (routeUrl === activeStepUrl) {
            activeIndex = index;
          }
        });
        return activeIndex;
      }));
    }));
    this.resetSteps();
  }
  back(activatedRoute) {
    const previousUrl = this.getPreviousCheckoutStepUrl(activatedRoute);
    this.routingService.go(previousUrl === null ? 'cart' : previousUrl);
  }
  next(activatedRoute) {
    const nextUrl = this.getNextCheckoutStepUrl(activatedRoute);
    this.routingService.go(nextUrl);
  }
  goToStepWithIndex(stepIndex) {
    this.routingService.go(this.getStepUrlFromStepRoute(this.allSteps[stepIndex].routeName));
  }
  getBackBntText(activatedRoute) {
    if (this.getPreviousCheckoutStepUrl(activatedRoute) === null) {
      return 'checkout.backToCart';
    }
    return 'common.back';
  }
  resetSteps() {
    this.allSteps = (this.checkoutConfig.checkout?.steps ?? []).filter(step => !step.disabled).map(checkoutStep => Object.assign({}, checkoutStep));
    this.steps$.next(this.allSteps);
  }
  disableEnableStep(currentStepType, disabled) {
    const currentStep = this.allSteps.find(step => step.type.includes(currentStepType));
    if (currentStep && currentStep.disabled !== disabled) {
      currentStep.disabled = disabled;
      this.steps$.next(this.allSteps.filter(step => !step.disabled));
    }
  }
  getCheckoutStep(currentStepType) {
    const index = this.getCheckoutStepIndex('type', currentStepType);
    if (index !== null) {
      return this.allSteps[index];
    }
  }
  getCheckoutStepRoute(currentStepType) {
    return this.getCheckoutStep(currentStepType)?.routeName;
  }
  getFirstCheckoutStepRoute() {
    return this.allSteps[0].routeName;
  }
  getNextCheckoutStepUrl(activatedRoute) {
    const stepIndex = this.getCurrentStepIndex(activatedRoute);
    if (stepIndex !== null && stepIndex >= 0) {
      let i = 1;
      while (this.allSteps[stepIndex + i] && this.allSteps[stepIndex + i].disabled) {
        i++;
      }
      const nextStep = this.allSteps[stepIndex + i];
      if (nextStep) {
        return this.getStepUrlFromStepRoute(nextStep.routeName);
      }
    }
    return null;
  }
  getPreviousCheckoutStepUrl(activatedRoute) {
    const stepIndex = this.getCurrentStepIndex(activatedRoute);
    if (stepIndex !== null && stepIndex >= 0) {
      let i = 1;
      while (this.allSteps[stepIndex - i] && this.allSteps[stepIndex - i].disabled) {
        i++;
      }
      const previousStep = this.allSteps[stepIndex - i];
      if (previousStep) {
        return this.getStepUrlFromStepRoute(previousStep.routeName);
      }
    }
    return null;
  }
  getCurrentStepIndex(activatedRoute) {
    const currentStepUrl = this.getStepUrlFromActivatedRoute(activatedRoute);
    const stepIndex = this.allSteps.findIndex(step => currentStepUrl === `/${this.getStepUrlFromStepRoute(step.routeName)}`);
    return stepIndex === -1 ? null : stepIndex;
  }
  getStepUrlFromActivatedRoute(activatedRoute) {
    return activatedRoute && activatedRoute.snapshot && activatedRoute.snapshot.url ? `/${activatedRoute.snapshot.url.join('/')}` : null;
  }
  getStepUrlFromStepRoute(stepRoute) {
    return this.routingConfigService.getRouteConfig(stepRoute)?.paths?.[0] ?? null;
  }
  getCheckoutStepIndex(key, value) {
    return key && value ? this.allSteps.findIndex(step => {
      const propertyVal = step[key];
      return propertyVal instanceof Array ? propertyVal.includes(value) : propertyVal === value;
    }) : null;
  }
}
CheckoutStepService.ɵfac = function CheckoutStepService_Factory(t) {
  return new (t || CheckoutStepService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutConfig), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingConfigService));
};
CheckoutStepService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutStepService,
  factory: CheckoutStepService.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutStepService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutConfig
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingConfigService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ExpressCheckoutService {
  constructor(userAddressService, userPaymentService, checkoutDeliveryAddressFacade, checkoutPaymentFacade, checkoutConfigService, checkoutDeliveryModesFacade) {
    this.userAddressService = userAddressService;
    this.userPaymentService = userPaymentService;
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.checkoutPaymentFacade = checkoutPaymentFacade;
    this.checkoutConfigService = checkoutConfigService;
    this.checkoutDeliveryModesFacade = checkoutDeliveryModesFacade;
    this.setDeliveryAddress();
    this.setDeliveryMode();
    this.setPaymentMethod();
  }
  setDeliveryAddress() {
    this.deliveryAddressSet$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.userAddressService.getAddresses(), this.userAddressService.getAddressesLoadedSuccess()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.debounceTime)(0), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(([, addressesLoadedSuccess]) => {
      if (!addressesLoadedSuccess) {
        this.userAddressService.loadAddresses();
      }
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([, addressesLoadedSuccess]) => addressesLoadedSuccess), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([addresses]) => {
      const defaultAddress = addresses.find(address => address.defaultAddress) || addresses[0];
      if (defaultAddress && Object.keys(defaultAddress).length) {
        return this.checkoutDeliveryAddressFacade.setDeliveryAddress(defaultAddress).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => this.checkoutDeliveryAddressFacade.getDeliveryAddressState()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.error && !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(data => !!(data && Object.keys(data).length)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false)));
      }
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  setDeliveryMode() {
    this.deliveryModeSet$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.deliveryAddressSet$, this.checkoutDeliveryModesFacade.getSupportedDeliveryModesState()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.debounceTime)(0), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([addressSet, supportedDeliveryModesState]) => {
      if (!addressSet) {
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);
      }
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)([supportedDeliveryModesState]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([supportedDeliveryModesStateObject]) => !supportedDeliveryModesStateObject.loading && !!supportedDeliveryModesStateObject.data?.length), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([deliveryModesState]) => {
        if (!deliveryModesState.data) {
          return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);
        }
        const preferredDeliveryMode = this.checkoutConfigService.getPreferredDeliveryMode(deliveryModesState.data);
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)([preferredDeliveryMode]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([deliveryMode]) => {
          if (!deliveryMode) {
            return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);
          }
          return this.checkoutDeliveryModesFacade.setDeliveryMode(deliveryMode).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => this.checkoutDeliveryModesFacade.getSelectedDeliveryModeState()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.error && !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(data => !!(data && Object.keys(data).length)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false)));
        }));
      }));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  setPaymentMethod() {
    this.paymentMethodSet$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.deliveryModeSet$, this.userPaymentService.getPaymentMethods(), this.userPaymentService.getPaymentMethodsLoadedSuccess()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.debounceTime)(0), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(([,, paymentMethodsLoadedSuccess]) => {
      if (!paymentMethodsLoadedSuccess) {
        this.userPaymentService.loadPaymentMethods();
      }
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([,, success]) => success), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([deliveryModeSet, payments]) => {
      if (!deliveryModeSet) {
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);
      }
      const defaultPayment = payments.find(address => address.defaultPayment) || payments[0];
      if (!defaultPayment || Object.keys(defaultPayment).length === 0) {
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false);
      }
      return this.checkoutPaymentFacade.setPaymentDetails(defaultPayment).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => this.checkoutPaymentFacade.getPaymentDetailsState()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.error && !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(data => !!(data && Object.keys(data).length)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(false)));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  trySetDefaultCheckoutDetails() {
    return this.paymentMethodSet$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(paymentMethodSet => !!paymentMethodSet));
  }
}
ExpressCheckoutService.ɵfac = function ExpressCheckoutService_Factory(t) {
  return new (t || ExpressCheckoutService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserAddressService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserPaymentService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade));
};
ExpressCheckoutService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: ExpressCheckoutService,
  factory: ExpressCheckoutService.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ExpressCheckoutService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserAddressService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserPaymentService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade
    }, {
      type: CheckoutConfigService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryAddressComponent {
  get isGuestCheckout() {
    return !!(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.getLastValueSync)(this.activeCartFacade.isGuestCart());
  }
  get backBtnText() {
    return this.checkoutStepService.getBackBntText(this.activatedRoute);
  }
  get selectedAddress$() {
    return this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)((prev, curr) => prev?.id === curr?.id));
  }
  constructor(userAddressService, checkoutDeliveryAddressFacade, activatedRoute, translationService, activeCartFacade, checkoutStepService, checkoutDeliveryModesFacade, globalMessageService, checkoutConfigService) {
    this.userAddressService = userAddressService;
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.activatedRoute = activatedRoute;
    this.translationService = translationService;
    this.activeCartFacade = activeCartFacade;
    this.checkoutStepService = checkoutStepService;
    this.checkoutDeliveryModesFacade = checkoutDeliveryModesFacade;
    this.globalMessageService = globalMessageService;
    this.checkoutConfigService = checkoutConfigService;
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(false);
    this.addressFormOpened = false;
    this.doneAutoSelect = false;
  }
  ngOnInit() {
    this.loadAddresses();
    this.cards$ = this.createCards();
    this.isUpdating$ = this.createIsUpdating();
  }
  getCardContent(address, selected, textDefaultDeliveryAddress, textShipToThisAddress, textSelected, textPhone, textMobile) {
    let region = '';
    if (address.region && address.region.isocode) {
      region = address.region.isocode + ', ';
    }
    /**
     * TODO: (#CXSPA-53) Remove feature config check in 6.0
     */
    const numbers = (0,_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.getAddressNumbers)(address, textPhone, textMobile);
    return {
      role: 'region',
      title: address.defaultAddress ? textDefaultDeliveryAddress : '',
      textBold: address.firstName + ' ' + address.lastName,
      text: [address.line1, address.line2, address.town + ', ' + region + address.country?.isocode, address.postalCode, numbers],
      actions: [{
        name: textShipToThisAddress,
        event: 'send'
      }],
      header: selected && selected.id === address.id ? textSelected : '',
      label: address.defaultAddress ? 'addressBook.defaultDeliveryAddress' : 'addressBook.additionalDeliveryAddress'
    };
  }
  selectAddress(address) {
    if (address?.id === (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.getLastValueSync)(this.selectedAddress$)?.id) {
      return;
    }
    this.globalMessageService.add({
      key: 'checkoutAddress.deliveryAddressSelected'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageType.MSG_TYPE_INFO);
    this.setAddress(address);
  }
  addAddress(address) {
    if (!address && this.shouldUseAddressSavedInCart() && this.selectedAddress) {
      this.next();
    }
    if (!address) {
      return;
    }
    this.busy$.next(true);
    this.doneAutoSelect = true;
    this.checkoutDeliveryAddressFacade.createAndSetAddress(address).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => this.checkoutDeliveryModesFacade.clearCheckoutDeliveryMode())).subscribe({
      complete: () => {
        // we don't call onSuccess here, because it can cause a spinner flickering
        this.next();
      },
      error: () => {
        this.onError();
        this.doneAutoSelect = false;
      }
    });
  }
  showNewAddressForm() {
    this.addressFormOpened = true;
  }
  hideNewAddressForm(goPrevious = false) {
    this.addressFormOpened = false;
    if (goPrevious) {
      this.back();
    }
  }
  next() {
    this.checkoutStepService.next(this.activatedRoute);
  }
  back() {
    this.checkoutStepService.back(this.activatedRoute);
  }
  loadAddresses() {
    if (!this.isGuestCheckout) {
      this.userAddressService.loadAddresses();
    }
  }
  createCards() {
    const addresses$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.getSupportedAddresses(), this.selectedAddress$]);
    const translations$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('checkoutAddress.defaultDeliveryAddress'), this.translationService.translate('checkoutAddress.shipToThisAddress'), this.translationService.translate('addressCard.selected'), this.translationService.translate('addressCard.phoneNumber'), this.translationService.translate('addressCard.mobileNumber')]);
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([addresses$, translations$]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(([[addresses, selected]]) => this.selectDefaultAddress(addresses, selected)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([[addresses, selected], [textDefault, textShipTo, textSelected, textPhone, textMobile]]) => addresses?.map(address => ({
      address,
      card: this.getCardContent(address, selected, textDefault, textShipTo, textSelected, textPhone, textMobile)
    }))));
  }
  selectDefaultAddress(addresses, selected) {
    if (!this.doneAutoSelect && addresses?.length && (!selected || Object.keys(selected).length === 0)) {
      selected = addresses.find(address => address.defaultAddress);
      if (selected) {
        this.setAddress(selected);
      }
      this.doneAutoSelect = true;
    } else if (selected && this.shouldUseAddressSavedInCart()) {
      this.selectedAddress = selected;
    }
  }
  getSupportedAddresses() {
    return this.userAddressService.getAddresses();
  }
  createIsUpdating() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.busy$, this.userAddressService.getAddressesLoading(), this.getAddressLoading()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([busy, userAddressLoading, deliveryAddressLoading]) => busy || userAddressLoading || deliveryAddressLoading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  getAddressLoading() {
    return this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  setAddress(address) {
    this.busy$.next(true);
    this.checkoutDeliveryAddressFacade.setDeliveryAddress(address).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => this.checkoutDeliveryModesFacade.clearCheckoutDeliveryMode())).subscribe({
      complete: () => {
        this.onSuccess();
      },
      error: () => {
        this.onError();
      }
    });
  }
  onSuccess() {
    this.busy$.next(false);
  }
  onError() {
    this.busy$.next(false);
  }
  shouldUseAddressSavedInCart() {
    return !!this.checkoutConfigService?.shouldUseAddressSavedInCart();
  }
}
CheckoutDeliveryAddressComponent.ɵfac = function CheckoutDeliveryAddressComponent_Factory(t) {
  return new (t || CheckoutDeliveryAddressComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserAddressService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutConfigService, 8));
};
CheckoutDeliveryAddressComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutDeliveryAddressComponent,
  selectors: [["cx-delivery-address"]],
  decls: 7,
  vars: 6,
  consts: [[1, "cx-checkout-title", "d-none", "d-lg-block", "d-xl-block"], [4, "ngIf"], ["loading", ""], [4, "ngIf", "ngIfElse"], ["role", "status"], [4, "ngIf", "ngIfThen", "ngIfElse"], ["showExistingAddresses", ""], ["newAddressForm", ""], [1, "cx-checkout-text"], [4, "cxFeatureLevel"], [1, "cx-checkout-body", "row"], ["class", "cx-delivery-address-card col-md-12 col-lg-6", 4, "ngFor", "ngForOf"], [1, "cx-checkout-btns", "row"], [1, "col-md-12", "col-lg-6"], [1, "cx-btn", "btn", "btn-block", "btn-secondary", 3, "click"], [1, "cx-btn", "btn", "btn-block", "btn-primary", 3, "disabled", "click"], [1, "col-sm-12", "col-md-12", "col-lg-6"], [1, "btn", "btn-block", "btn-secondary", 3, "click"], [1, "cx-checkout-btns", "cx-checkout-btns-top"], [1, "cx-delivery-address-card", "col-md-12", "col-lg-6"], [1, "cx-delivery-address-card-inner", 3, "click"], [3, "border", "index", "fitToContainer", "content", "sendCard"], [1, "cx-checkout-btns", "cx-checkout-btns-bottom"], [3, "showTitleCode", "backToAddress", "submitAddress", 4, "ngIf", "ngIfElse"], ["initialAddressForm", ""], [3, "showTitleCode", "backToAddress", "submitAddress"], [3, "showTitleCode", "setAsDefaultField", "addressData", "cancelBtnLabel", "backToAddress", "submitAddress"], [1, "cx-spinner"]],
  template: function CheckoutDeliveryAddressComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "h2", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutDeliveryAddressComponent_ng_container_3_Template, 3, 4, "ng-container", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CheckoutDeliveryAddressComponent_ng_template_5_Template, 2, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 2, "checkoutAddress.shippingAddress"), "\n");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 4, ctx.cards$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.AddressFormComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerComponent, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeatureLevelDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryAddressComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-delivery-address',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<h2 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n  {{ 'checkoutAddress.shippingAddress' | cxTranslate }}\n</h2>\n\n<ng-container *ngIf=\"cards$ | async as cards\">\n  <ng-container *ngIf=\"!(isUpdating$ | async); else loading\">\n    <div role=\"status\" [attr.aria-label]=\"'common.loaded' | cxTranslate\"></div>\n    <ng-container\n      *ngIf=\"\n        cards?.length && !addressFormOpened;\n        then showExistingAddresses;\n        else newAddressForm\n      \"\n    >\n    </ng-container>\n\n    <ng-template #showExistingAddresses>\n      <p class=\"cx-checkout-text\">\n        {{ 'checkoutAddress.selectYourDeliveryAddress' | cxTranslate }}\n      </p>\n      <ng-container *cxFeatureLevel=\"'!6.3'\">\n        <div class=\"cx-checkout-btns row\">\n          <div class=\"col-sm-12 col-md-12 col-lg-6\">\n            <button\n              class=\"btn btn-block btn-secondary\"\n              (click)=\"showNewAddressForm()\"\n            >\n              {{ 'checkoutAddress.addNewAddress' | cxTranslate }}\n            </button>\n          </div>\n        </div>\n      </ng-container>\n\n      <ng-container *cxFeatureLevel=\"'6.3'\">\n        <div class=\"cx-checkout-btns cx-checkout-btns-top\">\n          <button\n            class=\"btn btn-block btn-secondary\"\n            (click)=\"showNewAddressForm()\"\n          >\n            {{ 'checkoutAddress.addNewAddress' | cxTranslate }}\n          </button>\n        </div>\n      </ng-container>\n\n      <div class=\"cx-checkout-body row\">\n        <div\n          class=\"cx-delivery-address-card col-md-12 col-lg-6\"\n          *ngFor=\"let card of cards; let i = index\"\n        >\n          <div\n            class=\"cx-delivery-address-card-inner\"\n            (click)=\"selectAddress(card.address)\"\n          >\n            <cx-card\n              [border]=\"true\"\n              [index]=\"i\"\n              [fitToContainer]=\"true\"\n              [content]=\"card.card\"\n              (sendCard)=\"selectAddress(card.address)\"\n            ></cx-card>\n          </div>\n        </div>\n      </div>\n\n      <ng-container *cxFeatureLevel=\"'6.3'\">\n        <div class=\"cx-checkout-btns cx-checkout-btns-bottom\">\n          <button\n            class=\"btn btn-block btn-secondary\"\n            (click)=\"showNewAddressForm()\"\n          >\n            {{ 'checkoutAddress.addNewAddress' | cxTranslate }}\n          </button>\n        </div>\n      </ng-container>\n\n      <div class=\"cx-checkout-btns row\">\n        <div class=\"col-md-12 col-lg-6\">\n          <button class=\"cx-btn btn btn-block btn-secondary\" (click)=\"back()\">\n            {{ backBtnText | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-md-12 col-lg-6\">\n          <button\n            class=\"cx-btn btn btn-block btn-primary\"\n            [disabled]=\"!(selectedAddress$ | async)?.id\"\n            (click)=\"next()\"\n          >\n            {{ 'common.continue' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template #newAddressForm>\n      <cx-address-form\n        *ngIf=\"cards.length; else initialAddressForm\"\n        [showTitleCode]=\"true\"\n        (backToAddress)=\"hideNewAddressForm(false)\"\n        (submitAddress)=\"addAddress($event)\"\n      ></cx-address-form>\n      <ng-template #initialAddressForm>\n        <cx-address-form\n          [showTitleCode]=\"true\"\n          [setAsDefaultField]=\"!isGuestCheckout\"\n          [addressData]=\"selectedAddress\"\n          cancelBtnLabel=\"{{ backBtnText | cxTranslate }}\"\n          (backToAddress)=\"hideNewAddressForm(true)\"\n          (submitAddress)=\"addAddress($event)\"\n        ></cx-address-form>\n      </ng-template>\n    </ng-template>\n  </ng-container>\n</ng-container>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserAddressService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.ActivatedRoute
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: CheckoutStepService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService
    }, {
      type: CheckoutConfigService,
      decorators: [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Optional
      }]
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryAddressModule {}
CheckoutDeliveryAddressModule.ɵfac = function CheckoutDeliveryAddressModule_Factory(t) {
  return new (t || CheckoutDeliveryAddressModule)();
};
CheckoutDeliveryAddressModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutDeliveryAddressModule
});
CheckoutDeliveryAddressModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutDeliveryAddress: {
        component: CheckoutDeliveryAddressComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard, _spartacus_cart_base_core__WEBPACK_IMPORTED_MODULE_18__.CartValidationGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.AddressFormModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeaturesConfigModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryAddressModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.AddressFormModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeaturesConfigModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutDeliveryAddress: {
            component: CheckoutDeliveryAddressComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard, _spartacus_cart_base_core__WEBPACK_IMPORTED_MODULE_18__.CartValidationGuard]
          }
        }
      })],
      declarations: [CheckoutDeliveryAddressComponent],
      exports: [CheckoutDeliveryAddressComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryModeComponent {
  get deliveryModeInvalid() {
    return this.mode.controls['deliveryModeId'].invalid;
  }
  constructor(fb, checkoutConfigService, activatedRoute, checkoutStepService, checkoutDeliveryModesFacade, activeCartFacade, globalMessageService) {
    this.fb = fb;
    this.checkoutConfigService = checkoutConfigService;
    this.activatedRoute = activatedRoute;
    this.checkoutStepService = checkoutStepService;
    this.checkoutDeliveryModesFacade = checkoutDeliveryModesFacade;
    this.activeCartFacade = activeCartFacade;
    this.globalMessageService = globalMessageService;
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(false);
    this.isSetDeliveryModeHttpErrorSub = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(false);
    this.CartOutlets = _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.CartOutlets;
    this.isSetDeliveryModeHttpError$ = this.isSetDeliveryModeHttpErrorSub.asObservable();
    this.selectedDeliveryModeCode$ = this.checkoutDeliveryModesFacade.getSelectedDeliveryModeState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(deliveryMode => deliveryMode?.code));
    this.supportedDeliveryModes$ = this.checkoutDeliveryModesFacade.getSupportedDeliveryModes().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(deliveryModes => !!deliveryModes?.length), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.withLatestFrom)(this.selectedDeliveryModeCode$), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(([deliveryModes, code]) => {
      if (!code || !deliveryModes.find(deliveryMode => deliveryMode.code === code)) {
        code = this.checkoutConfigService.getPreferredDeliveryMode(deliveryModes);
      }
      if (code) {
        this.mode.controls['deliveryModeId'].setValue(code);
        this.changeMode(code);
      }
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([deliveryModes]) => deliveryModes.filter(mode => mode.code !== 'pickup')));
    this.backBtnText = this.checkoutStepService.getBackBntText(this.activatedRoute);
    this.mode = this.fb.group({
      deliveryModeId: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required]
    });
    this.isUpdating$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.busy$, this.checkoutDeliveryModesFacade.getSelectedDeliveryModeState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.loading))]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([busy, loading]) => busy || loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  changeMode(code) {
    if (!code) {
      return;
    }
    this.busy$.next(true);
    this.checkoutDeliveryModesFacade.setDeliveryMode(code).subscribe({
      complete: () => this.onSuccess(),
      error: () => this.onError()
    });
  }
  next() {
    this.checkoutStepService.next(this.activatedRoute);
  }
  back() {
    this.checkoutStepService.back(this.activatedRoute);
  }
  getAriaChecked(code) {
    return code === this.mode.controls['deliveryModeId'].value;
  }
  onSuccess() {
    this.isSetDeliveryModeHttpErrorSub.next(false);
    this.busy$.next(false);
  }
  onError() {
    this.globalMessageService?.add({
      key: 'setDeliveryMode.unknownError'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageType.MSG_TYPE_ERROR);
    this.isSetDeliveryModeHttpErrorSub.next(true);
    this.busy$.next(false);
  }
}
CheckoutDeliveryModeComponent.ɵfac = function CheckoutDeliveryModeComponent_Factory(t) {
  return new (t || CheckoutDeliveryModeComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService, 8));
};
CheckoutDeliveryModeComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutDeliveryModeComponent,
  selectors: [["cx-delivery-mode"]],
  decls: 21,
  vars: 21,
  consts: [[1, "cx-checkout-title", "d-none", "d-lg-block", "d-xl-block"], [4, "ngIf", "ngIfElse"], [4, "ngIf"], ["loading", ""], ["cxInnerComponentsHost", ""], [1, "row", "cx-checkout-btns"], [1, "col-md-12", "col-lg-6"], [1, "btn", "btn-block", "btn-secondary", 3, "click"], [1, "btn", "btn-block", "btn-primary", 3, "disabled", "click"], ["role", "status"], [1, "cx-delivery-mode-wrapper", 3, "formGroup"], ["role", "radiogroup"], ["class", "form-check", 4, "ngFor", "ngForOf"], [1, "form-check"], ["role", "radio", "type", "radio", "formControlName", "deliveryModeId", 1, "form-check-input", 3, "id", "value", "change"], [1, "cx-delivery-label", "form-check-label", "form-radio-label", 3, "for"], [4, "cxFeatureLevel"], [1, "cx-delivery-price"], [1, "cx-delivery-details"], [1, "cx-delivery-mode"], [1, "cx-delivery-mode-description"], [3, "cxOutlet", "cxOutletContext"], [1, "cx-spinner"]],
  template: function CheckoutDeliveryModeComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "h2", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutDeliveryModeComponent_ng_container_3_Template, 6, 5, "ng-container", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, CheckoutDeliveryModeComponent_ng_container_6_Template, 6, 9, "ng-container", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](8, CheckoutDeliveryModeComponent_ng_template_8_Template, 2, 0, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainer"](10, 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "div", 5)(12, "div", 6)(13, "button", 7);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryModeComponent_Template_button_click_13_listener() {
        return ctx.back();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](14);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "div", 6)(17, "button", 8);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutDeliveryModeComponent_Template_button_click_17_listener() {
        return ctx.next();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](18, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](19);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](20, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    }
    if (rf & 2) {
      const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](9);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 7, "checkoutMode.deliveryMethod"), "\n");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 9, ctx.isUpdating$) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 11, ctx.supportedDeliveryModes$))("ngIfElse", _r2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 13, ctx.activeCartFacade.hasPickupItems()));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](8);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 15, ctx.backBtnText), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.deliveryModeInvalid || _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](18, 17, ctx.isSetDeliveryModeHttpError$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](20, 19, "common.continue"), " ");
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.RadioControlValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormControlName, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletDirective, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.InnerComponentsHostDirective, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeatureLevelDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryModeComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-delivery-mode',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<h2 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n  {{ 'checkoutMode.deliveryMethod' | cxTranslate }}\n</h2>\n\n<ng-container\n  *ngIf=\"\n    !(isUpdating$ | async) &&\n      (supportedDeliveryModes$ | async) as supportedDeliveryModes;\n    else loading\n  \"\n>\n  <div role=\"status\" [attr.aria-label]=\"'common.loaded' | cxTranslate\"></div>\n  <div [formGroup]=\"mode\" class=\"cx-delivery-mode-wrapper\">\n    <div role=\"radiogroup\">\n      <div class=\"form-check\" *ngFor=\"let mode of supportedDeliveryModes\">\n        <input\n          [attr.aria-checked]=\"getAriaChecked(mode.code)\"\n          class=\"form-check-input\"\n          role=\"radio\"\n          type=\"radio\"\n          id=\"deliveryMode-{{ mode.code }}\"\n          (change)=\"changeMode(mode.code)\"\n          [value]=\"mode.code\"\n          formControlName=\"deliveryModeId\"\n        />\n        <label\n          class=\"cx-delivery-label form-check-label form-radio-label\"\n          for=\"deliveryMode-{{ mode.code }}\"\n        >\n          <ng-container *cxFeatureLevel=\"'!6.3'\">\n            <div class=\"cx-delivery-mode\">\n              {{ mode.name }} ({{ mode.description }})\n            </div>\n          </ng-container>\n\n          <ng-container *cxFeatureLevel=\"'6.3'\">\n            <div class=\"cx-delivery-mode\">\n              {{ mode.name }}\n              <span class=\"cx-delivery-mode-description\"\n                >({{ mode.description }})</span\n              >\n            </div>\n          </ng-container>\n          <div class=\"cx-delivery-price\">\n            {{ mode.deliveryCost?.formattedValue }}\n          </div>\n          <div class=\"cx-delivery-details\"></div>\n        </label>\n      </div>\n    </div>\n  </div>\n</ng-container>\n\n<ng-container *ngIf=\"activeCartFacade.hasPickupItems() | async\">\n  <h2 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n    {{ 'checkoutMode.deliveryEntries' | cxTranslate }}\n  </h2>\n\n  <ng-template\n    [cxOutlet]=\"CartOutlets.CART_ITEM_LIST\"\n    [cxOutletContext]=\"{\n      items: activeCartFacade.getDeliveryEntries() | async,\n      readonly: true\n    }\"\n  >\n  </ng-template>\n</ng-container>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n\n<ng-container cxInnerComponentsHost></ng-container>\n\n<div class=\"row cx-checkout-btns\">\n  <div class=\"col-md-12 col-lg-6\">\n    <button class=\"btn btn-block btn-secondary\" (click)=\"back()\">\n      {{ backBtnText | cxTranslate }}\n    </button>\n  </div>\n  <div class=\"col-md-12 col-lg-6\">\n    <button\n      class=\"btn btn-block btn-primary\"\n      [disabled]=\"deliveryModeInvalid || (isSetDeliveryModeHttpError$ | async)\"\n      (click)=\"next()\"\n    >\n      {{ 'common.continue' | cxTranslate }}\n    </button>\n  </div>\n</div>\n"
    }]
  }], function () {
    return [{
      type: _angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder
    }, {
      type: CheckoutConfigService
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.ActivatedRoute
    }, {
      type: CheckoutStepService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService,
      decorators: [{
        type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Optional
      }]
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryModeModule {}
CheckoutDeliveryModeModule.ɵfac = function CheckoutDeliveryModeModule_Factory(t) {
  return new (t || CheckoutDeliveryModeModule)();
};
CheckoutDeliveryModeModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutDeliveryModeModule
});
CheckoutDeliveryModeModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutDeliveryMode: {
        component: CheckoutDeliveryModeComponent,
        data: {
          composition: {
            inner: ['PickupInStoreDeliveryModeComponent']
          }
        },
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PageComponentModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeaturesConfigModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryModeModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PageComponentModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeaturesConfigModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutDeliveryMode: {
            component: CheckoutDeliveryModeComponent,
            data: {
              composition: {
                inner: ['PickupInStoreDeliveryModeComponent']
              }
            },
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })],
      declarations: [CheckoutDeliveryModeComponent],
      exports: [CheckoutDeliveryModeComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class NotCheckoutAuthGuard {
  constructor(authService, activeCartFacade, semanticPathService, router) {
    this.authService = authService;
    this.activeCartFacade = activeCartFacade;
    this.semanticPathService = semanticPathService;
    this.router = router;
  }
  canActivate() {
    return this.authService.isUserLoggedIn().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(isLoggedIn => {
      if (isLoggedIn) {
        return this.router.parseUrl(this.semanticPathService.get('home') ?? '');
      } else if (!!(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.getLastValueSync)(this.activeCartFacade.isGuestCart())) {
        return this.router.parseUrl(this.semanticPathService.get('cart') ?? '');
      }
      return !isLoggedIn;
    }));
  }
}
NotCheckoutAuthGuard.ɵfac = function NotCheckoutAuthGuard_Factory(t) {
  return new (t || NotCheckoutAuthGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.SemanticPathService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.Router));
};
NotCheckoutAuthGuard.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: NotCheckoutAuthGuard,
  factory: NotCheckoutAuthGuard.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](NotCheckoutAuthGuard, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.SemanticPathService
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.Router
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutLoginComponent {
  constructor(formBuilder, authRedirectService, activeCartFacade) {
    this.formBuilder = formBuilder;
    this.authRedirectService = authRedirectService;
    this.activeCartFacade = activeCartFacade;
    this.checkoutLoginForm = this.formBuilder.group({
      email: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CustomFormValidators.emailValidator]],
      emailConfirmation: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required]]
    }, {
      validators: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CustomFormValidators.emailsMustMatch('email', 'emailConfirmation')
    });
  }
  onSubmit() {
    if (this.checkoutLoginForm.valid) {
      const email = this.checkoutLoginForm.get('email')?.value;
      this.activeCartFacade.addEmail(email);
      if (!this.sub) {
        this.sub = this.activeCartFacade.isGuestCart().subscribe(isGuest => {
          if (isGuest) {
            this.authRedirectService.redirect();
          }
        });
      }
    } else {
      this.checkoutLoginForm.markAllAsTouched();
    }
  }
  ngOnDestroy() {
    if (this.sub) {
      this.sub.unsubscribe();
    }
  }
}
CheckoutLoginComponent.ɵfac = function CheckoutLoginComponent_Factory(t) {
  return new (t || CheckoutLoginComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthRedirectService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade));
};
CheckoutLoginComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutLoginComponent,
  selectors: [["cx-checkout-login"]],
  decls: 20,
  vars: 18,
  consts: [[3, "formGroup", "ngSubmit"], [1, "form-group"], [1, "label-content"], ["required", "true", "type", "email", "name", "email", "formControlName", "email", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "email", "name", "emailConfirmation", "formControlName", "emailConfirmation", 1, "form-control", 3, "placeholder"], ["type", "submit", 1, "btn", "btn-block", "btn-primary"]],
  template: function CheckoutLoginComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function CheckoutLoginComponent_Template_form_ngSubmit_0_listener() {
        return ctx.onSubmit();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1)(2, "label")(3, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](5, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](6, "input", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "div", 1)(10, "label")(11, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](14, "input", 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "button", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](18);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](19, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.checkoutLoginForm);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](5, 8, "checkoutLogin.emailAddress.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 10, "checkoutLogin.emailAddress.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.checkoutLoginForm.get("email"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 12, "checkoutLogin.confirmEmail.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 14, "checkoutLogin.confirmEmail.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.checkoutLoginForm.get("emailConfirmation"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](19, 16, "checkoutLogin.continue"), " ");
    }
  },
  dependencies: [_angular_forms__WEBPACK_IMPORTED_MODULE_20__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_20__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormControlName, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.FormErrorsComponent, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutLoginComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-login',
      template: "<form (ngSubmit)=\"onSubmit()\" [formGroup]=\"checkoutLoginForm\">\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'checkoutLogin.emailAddress.label' | cxTranslate\n      }}</span>\n      <input\n        required=\"true\"\n        type=\"email\"\n        name=\"email\"\n        class=\"form-control\"\n        formControlName=\"email\"\n        placeholder=\"{{\n          'checkoutLogin.emailAddress.placeholder' | cxTranslate\n        }}\"\n      />\n      <cx-form-errors\n        [control]=\"checkoutLoginForm.get('email')\"\n      ></cx-form-errors>\n    </label>\n  </div>\n\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'checkoutLogin.confirmEmail.label' | cxTranslate\n      }}</span>\n      <input\n        required=\"true\"\n        type=\"email\"\n        name=\"emailConfirmation\"\n        class=\"form-control\"\n        formControlName=\"emailConfirmation\"\n        placeholder=\"{{\n          'checkoutLogin.confirmEmail.placeholder' | cxTranslate\n        }}\"\n      />\n      <cx-form-errors\n        [control]=\"checkoutLoginForm.get('emailConfirmation')\"\n      ></cx-form-errors>\n    </label>\n  </div>\n\n  <button type=\"submit\" class=\"btn btn-block btn-primary\">\n    {{ 'checkoutLogin.continue' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: _angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.AuthRedirectService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutLoginModule {}
CheckoutLoginModule.ɵfac = function CheckoutLoginModule_Factory(t) {
  return new (t || CheckoutLoginModule)();
};
CheckoutLoginModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutLoginModule
});
CheckoutLoginModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      GuestCheckoutLoginComponent: {
        component: CheckoutLoginComponent,
        guards: [NotCheckoutAuthGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.FormErrorsModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutLoginModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.FormErrorsModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          GuestCheckoutLoginComponent: {
            component: CheckoutLoginComponent,
            guards: [NotCheckoutAuthGuard]
          }
        }
      })],
      declarations: [CheckoutLoginComponent],
      exports: [CheckoutLoginComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutGuard {
  constructor(router, routingConfigService, checkoutConfigService, expressCheckoutService, activeCartFacade, checkoutStepService) {
    this.router = router;
    this.routingConfigService = routingConfigService;
    this.checkoutConfigService = checkoutConfigService;
    this.expressCheckoutService = expressCheckoutService;
    this.activeCartFacade = activeCartFacade;
    this.checkoutStepService = checkoutStepService;
    this.firstStep$ = this.checkoutStepService.steps$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(steps => {
      return this.router.parseUrl(this.routingConfigService.getRouteConfig(steps[0].routeName)?.paths?.[0]);
    }));
  }
  canActivate() {
    const expressCheckout$ = this.expressCheckoutService.trySetDefaultCheckoutDetails().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(expressCheckoutPossible => {
      const reviewOrderRoute = this.checkoutStepService.getCheckoutStepRoute("reviewOrder" /* CheckoutStepType.REVIEW_ORDER */);
      return expressCheckoutPossible && reviewOrderRoute ? (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(this.router.parseUrl(this.routingConfigService.getRouteConfig(reviewOrderRoute)?.paths?.[0])) : this.firstStep$;
    }));
    return this.activeCartFacade.isGuestCart().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(isGuestCart => this.checkoutConfigService.isExpressCheckout() && !isGuestCart ? expressCheckout$ : this.firstStep$));
  }
}
CheckoutGuard.ɵfac = function CheckoutGuard_Factory(t) {
  return new (t || CheckoutGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](ExpressCheckoutService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutStepService));
};
CheckoutGuard.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutGuard,
  factory: CheckoutGuard.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutGuard, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.Router
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingConfigService
    }, {
      type: CheckoutConfigService
    }, {
      type: ExpressCheckoutService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: CheckoutStepService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutOrchestratorComponent {
  constructor() {
    // Intentional empty constructor
  }
}
CheckoutOrchestratorComponent.ɵfac = function CheckoutOrchestratorComponent_Factory(t) {
  return new (t || CheckoutOrchestratorComponent)();
};
CheckoutOrchestratorComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutOrchestratorComponent,
  selectors: [["cx-checkout-orchestrator"]],
  decls: 0,
  vars: 0,
  template: function CheckoutOrchestratorComponent_Template(rf, ctx) {},
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutOrchestratorComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-orchestrator',
      template: '',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush
    }]
  }], function () {
    return [];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutOrchestratorModule {}
CheckoutOrchestratorModule.ɵfac = function CheckoutOrchestratorModule_Factory(t) {
  return new (t || CheckoutOrchestratorModule)();
};
CheckoutOrchestratorModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutOrchestratorModule
});
CheckoutOrchestratorModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutOrchestrator: {
        component: CheckoutOrchestratorComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutOrchestratorModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutOrchestrator: {
            component: CheckoutOrchestratorComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutGuard]
          }
        }
      })],
      declarations: [CheckoutOrchestratorComponent],
      exports: [CheckoutOrchestratorComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutOrderSummaryComponent {
  constructor(activeCartFacade) {
    this.activeCartFacade = activeCartFacade;
    this.cartOutlets = _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.CartOutlets;
    this.cart$ = this.activeCartFacade.getActive();
  }
}
CheckoutOrderSummaryComponent.ɵfac = function CheckoutOrderSummaryComponent_Factory(t) {
  return new (t || CheckoutOrderSummaryComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade));
};
CheckoutOrderSummaryComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutOrderSummaryComponent,
  selectors: [["cx-checkout-order-summary"]],
  decls: 2,
  vars: 4,
  consts: [[3, "cxOutlet", "cxOutletContext"]],
  template: function CheckoutOrderSummaryComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutOrderSummaryComponent_ng_template_0_Template, 0, 0, "ng-template", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxOutlet", ctx.cartOutlets.ORDER_SUMMARY)("cxOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 2, ctx.cart$));
    }
  },
  dependencies: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutOrderSummaryComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-order-summary',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-template\n  [cxOutlet]=\"cartOutlets.ORDER_SUMMARY\"\n  [cxOutletContext]=\"cart$ | async\"\n>\n</ng-template>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutOrderSummaryModule {}
CheckoutOrderSummaryModule.ɵfac = function CheckoutOrderSummaryModule_Factory(t) {
  return new (t || CheckoutOrderSummaryModule)();
};
CheckoutOrderSummaryModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutOrderSummaryModule
});
CheckoutOrderSummaryModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutOrderSummary: {
        component: CheckoutOrderSummaryComponent
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutOrderSummaryModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutOrderSummary: {
            component: CheckoutOrderSummaryComponent
          }
        }
      })],
      declarations: [CheckoutOrderSummaryComponent],
      exports: [CheckoutOrderSummaryComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentFormComponent {
  constructor(checkoutPaymentFacade, checkoutDeliveryAddressFacade, userPaymentService, globalMessageService, fb, userAddressService, launchDialogService, translationService) {
    this.checkoutPaymentFacade = checkoutPaymentFacade;
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.userPaymentService = userPaymentService;
    this.globalMessageService = globalMessageService;
    this.fb = fb;
    this.userAddressService = userAddressService;
    this.launchDialogService = launchDialogService;
    this.translationService = translationService;
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.ICON_TYPE;
    this.months = [];
    this.years = [];
    this.sameAsDeliveryAddress = true;
    this.selectedCountry$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject('');
    this.goBack = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
    this.closeForm = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
    this.setPaymentDetails = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
    this.paymentForm = this.fb.group({
      cardType: this.fb.group({
        code: [null, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required]
      }),
      accountHolderName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      cardNumber: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      expiryMonth: [null, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      expiryYear: [null, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      cvn: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      defaultPayment: [false]
    });
    this.billingAddressForm = this.fb.group({
      firstName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      lastName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      line1: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      line2: [''],
      town: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required],
      region: this.fb.group({
        isocodeShort: [null, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required]
      }),
      country: this.fb.group({
        isocode: [null, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required]
      }),
      postalCode: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.required]
    });
  }
  ngOnInit() {
    if (this.paymentDetails) {
      this.paymentForm.patchValue(this.paymentDetails);
    }
    this.expMonthAndYear();
    this.countries$ = this.userPaymentService.getAllBillingCountries().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(countries => {
      // If the store is empty fetch countries. This is also used when changing language.
      if (Object.keys(countries).length === 0) {
        this.userPaymentService.loadBillingCountries();
      }
    }));
    this.cardTypes$ = this.checkoutPaymentFacade.getPaymentCardTypes();
    this.deliveryAddress$ = this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
    this.showSameAsDeliveryAddressCheckbox$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.countries$, this.deliveryAddress$]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([countries, address]) => {
      return (address?.country && !!countries.filter(country => country.isocode === address.country?.isocode).length) ?? false;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(shouldShowCheckbox => {
      this.sameAsDeliveryAddress = shouldShowCheckbox;
    }));
    this.regions$ = this.selectedCountry$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(country => this.userAddressService.getRegions(country)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(regions => {
      const regionControl = this.billingAddressForm.get('region.isocodeShort');
      if (regions.length > 0) {
        regionControl?.enable();
      } else {
        regionControl?.disable();
      }
    }));
  }
  expMonthAndYear() {
    const year = new Date().getFullYear();
    for (let i = 0; i < 10; i++) {
      this.years.push(year + i);
    }
    for (let j = 1; j <= 12; j++) {
      if (j < 10) {
        this.months.push(`0${j}`);
      } else {
        this.months.push(j.toString());
      }
    }
  }
  toggleDefaultPaymentMethod() {
    this.paymentForm.value.defaultPayment = !this.paymentForm.value.defaultPayment;
  }
  toggleSameAsDeliveryAddress() {
    this.sameAsDeliveryAddress = !this.sameAsDeliveryAddress;
  }
  getAddressCardContent(address) {
    return this.translationService ? (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('addressCard.phoneNumber'), this.translationService.translate('addressCard.mobileNumber')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textPhone, textMobile]) => {
      let region = '';
      if (address.region && address.region.isocode) {
        region = address.region.isocode + ', ';
      }
      const numbers = (0,_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.getAddressNumbers)(address, textPhone, textMobile);
      return {
        textBold: address.firstName + ' ' + address.lastName,
        text: [address.line1, address.line2, address.town + ', ' + region + address.country?.isocode, address.postalCode, numbers]
      };
    })) : rxjs__WEBPACK_IMPORTED_MODULE_21__.EMPTY;
  }
  //TODO: Add elementRef to trigger button when verifyAddress is used.
  openSuggestedAddress(results) {
    this.launchDialogService.openDialogAndSubscribe("SUGGESTED_ADDRESSES" /* LAUNCH_CALLER.SUGGESTED_ADDRESSES */, undefined, {
      enteredAddress: this.billingAddressForm.value,
      suggestedAddresses: results.suggestedAddresses
    });
    //TODO: Add logic that handle dialog's actions. Scope of CXSPA-1276
  }

  close() {
    this.closeForm.emit();
  }
  back() {
    this.goBack.emit();
  }
  /**
   *TODO: This method is not used, but should be. It triggers suggested addresses modal under the hood.
   *
   * See ticket CXSPA-1276
   */
  verifyAddress() {
    if (this.sameAsDeliveryAddress) {
      this.next();
    } else {
      this.userAddressService.verifyAddress(this.billingAddressForm.value).subscribe(result => {
        this.handleAddressVerificationResults(result);
      });
    }
  }
  handleAddressVerificationResults(results) {
    if (results.decision === 'ACCEPT') {
      this.next();
    } else if (results.decision === 'REJECT') {
      this.globalMessageService.add({
        key: 'addressForm.invalidAddress'
      }, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageType.MSG_TYPE_ERROR);
    } else if (results.decision === 'REVIEW') {
      this.openSuggestedAddress(results);
    }
  }
  countrySelected(country) {
    this.billingAddressForm.get('country.isocode')?.setValue(country.isocode);
    this.selectedCountry$.next(country.isocode);
  }
  next() {
    if (this.paymentForm.valid) {
      if (this.sameAsDeliveryAddress) {
        this.setPaymentDetails.emit({
          paymentDetails: this.paymentForm.value,
          billingAddress: null
        });
      } else {
        if (this.billingAddressForm.valid) {
          this.setPaymentDetails.emit({
            paymentDetails: this.paymentForm.value,
            billingAddress: this.billingAddressForm.value
          });
        } else {
          this.billingAddressForm.markAllAsTouched();
        }
      }
    } else {
      this.paymentForm.markAllAsTouched();
      if (!this.sameAsDeliveryAddress) {
        this.billingAddressForm.markAllAsTouched();
      }
    }
  }
}
CheckoutPaymentFormComponent.ɵfac = function CheckoutPaymentFormComponent_Factory(t) {
  return new (t || CheckoutPaymentFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserPaymentService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserAddressService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.LaunchDialogService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService));
};
CheckoutPaymentFormComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutPaymentFormComponent,
  selectors: [["cx-payment-form"]],
  inputs: {
    loading: "loading",
    setAsDefaultField: "setAsDefaultField",
    paymentMethodsCount: "paymentMethodsCount",
    paymentDetails: "paymentDetails"
  },
  outputs: {
    goBack: "goBack",
    closeForm: "closeForm",
    setPaymentDetails: "setPaymentDetails"
  },
  decls: 3,
  vars: 2,
  consts: [[4, "ngIf", "ngIfElse"], ["spinner", ""], ["role", "status"], [3, "formGroup", "ngSubmit"], [1, "row"], [1, "col-md-12", "col-xl-10"], ["formGroupName", "cardType", 1, "form-group"], [4, "ngIf"], [1, "form-group"], [1, "label-content"], ["required", "true", "type", "text", "formControlName", "accountHolderName", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "text", "formControlName", "cardNumber", 1, "form-control"], [1, "form-group", "col-md-8"], [1, "cx-payment-form-exp-date"], [1, "cx-payment-form-exp-date-wrapper"], ["formControlName", "expiryMonth", "id", "month-select", 3, "inputAttrs", "searchable", "clearable", "items", "placeholder", "cxNgSelectA11y"], ["id", "year-select", "formControlName", "expiryYear", 3, "inputAttrs", "searchable", "clearable", "items", "placeholder", "cxNgSelectA11y"], [1, "form-group", "col-md-4"], ["placement", "right", "alt", "", 1, "cx-payment-form-tooltip", 3, "type", "title"], ["required", "true", "type", "text", "id", "cVVNumber", "formControlName", "cvn", 1, "form-control"], ["class", "form-group", 4, "ngIf"], [1, "cx-payment-form-billing"], [1, "cx-payment-form-billing-address"], ["billingAddress", ""], [1, "cx-checkout-btns", "row"], [1, "col-md-12", "col-lg-6"], ["class", "btn btn-block btn-secondary", 3, "click", 4, "ngIf"], ["type", "submit", 1, "btn", "btn-block", "btn-primary"], [1, "label-content", "required"], ["bindLabel", "name", "bindValue", "code", "formControlName", "code", "id", "card-type-select", 3, "inputAttrs", "searchable", "clearable", "items", "placeholder", "cxNgSelectA11y"], [1, "form-check"], ["type", "checkbox", 1, "form-check-input", 3, "change"], [1, "form-check-label"], ["type", "checkbox", 1, "form-check-input", 3, "checked", "change"], [3, "content"], [3, "formGroup"], ["formGroupName", "country", 1, "form-group"], ["required", "true", "type", "text", "formControlName", "firstName", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "text", "formControlName", "lastName", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "text", "formControlName", "line1", 1, "form-control", 3, "placeholder"], ["type", "text", "formControlName", "line2", 1, "form-control", 3, "placeholder"], [1, "form-group", "col-md-6"], ["required", "true", "type", "text", "formControlName", "town", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "text", "formControlName", "postalCode", 1, "form-control", 3, "placeholder"], ["formGroupName", "region", 4, "ngIf"], ["bindLabel", "name", "bindValue", "isocode", "formControlName", "isocode", "id", "country-payment-select", 3, "inputAttrs", "searchable", "clearable", "items", "placeholder", "cxNgSelectA11y", "change"], ["formGroupName", "region"], ["formControlName", "isocodeShort", "id", "region-select", 1, "region-select", 3, "inputAttrs", "searchable", "clearable", "items", "bindLabel", "bindValue", "placeholder", "cxNgSelectA11y"], [1, "btn", "btn-block", "btn-secondary", 3, "click"]],
  template: function CheckoutPaymentFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutPaymentFormComponent_ng_container_0_Template, 68, 79, "ng-container", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, CheckoutPaymentFormComponent_ng_template_1_Template, 1, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    }
    if (rf & 2) {
      const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", _r1);
    }
  },
  dependencies: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.NgSelectA11yDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_20__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_20__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormControlName, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormGroupName, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_22__.NgSelectComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.FormErrorsComponent, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPaymentFormComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-payment-form',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<!-- FORM -->\n<ng-container *ngIf=\"!loading; else spinner\">\n  <div role=\"status\" [attr.aria-label]=\"'common.loaded' | cxTranslate\"></div>\n  <form (ngSubmit)=\"next()\" [formGroup]=\"paymentForm\">\n    <div class=\"row\">\n      <div class=\"col-md-12 col-xl-10\">\n        <div class=\"form-group\" formGroupName=\"cardType\">\n          <ng-container *ngIf=\"cardTypes$ | async as cardTypes\">\n            <div *ngIf=\"cardTypes.length !== 0\">\n              <label>\n                <span class=\"label-content required\">{{\n                  'paymentForm.paymentType' | cxTranslate\n                }}</span>\n                <ng-select\n                  [inputAttrs]=\"{ required: 'true' }\"\n                  [searchable]=\"true\"\n                  [clearable]=\"false\"\n                  [items]=\"cardTypes\"\n                  bindLabel=\"name\"\n                  bindValue=\"code\"\n                  placeholder=\"{{ 'paymentForm.selectOne' | cxTranslate }}\"\n                  formControlName=\"code\"\n                  id=\"card-type-select\"\n                  [cxNgSelectA11y]=\"{\n                    ariaLabel: 'paymentForm.paymentType' | cxTranslate\n                  }\"\n                >\n                </ng-select>\n                <cx-form-errors\n                  [control]=\"paymentForm.get('cardType.code')\"\n                ></cx-form-errors>\n              </label>\n            </div>\n          </ng-container>\n        </div>\n\n        <div class=\"form-group\">\n          <label>\n            <span class=\"label-content\">{{\n              'paymentForm.accountHolderName.label' | cxTranslate\n            }}</span>\n            <input\n              required=\"true\"\n              class=\"form-control\"\n              type=\"text\"\n              placeholder=\"{{\n                'paymentForm.accountHolderName.placeholder' | cxTranslate\n              }}\"\n              formControlName=\"accountHolderName\"\n            />\n            <cx-form-errors\n              [control]=\"paymentForm.get('accountHolderName')\"\n            ></cx-form-errors>\n          </label>\n        </div>\n\n        <div class=\"form-group\">\n          <label>\n            <span class=\"label-content\">{{\n              'paymentForm.cardNumber' | cxTranslate\n            }}</span>\n            <input\n              required=\"true\"\n              type=\"text\"\n              class=\"form-control\"\n              formControlName=\"cardNumber\"\n            />\n            <cx-form-errors\n              [control]=\"paymentForm.get('cardNumber')\"\n            ></cx-form-errors>\n          </label>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"form-group col-md-8\">\n            <fieldset class=\"cx-payment-form-exp-date\">\n              <legend class=\"label-content\">\n                {{ 'paymentForm.expirationDate' | cxTranslate }}\n              </legend>\n              <label class=\"cx-payment-form-exp-date-wrapper\">\n                <ng-select\n                  [inputAttrs]=\"{ required: 'true' }\"\n                  [searchable]=\"true\"\n                  [clearable]=\"false\"\n                  [items]=\"months\"\n                  placeholder=\"{{ 'paymentForm.monthMask' | cxTranslate }}\"\n                  formControlName=\"expiryMonth\"\n                  id=\"month-select\"\n                  [cxNgSelectA11y]=\"{\n                    ariaLabel:\n                      'paymentForm.expirationMonth'\n                      | cxTranslate\n                        : { selected: paymentForm.get('expiryMonth')?.value }\n                  }\"\n                >\n                </ng-select>\n                <cx-form-errors\n                  [control]=\"paymentForm.get('expiryMonth')\"\n                ></cx-form-errors>\n              </label>\n              <label class=\"cx-payment-form-exp-date-wrapper\">\n                <ng-select\n                  [inputAttrs]=\"{ required: 'true' }\"\n                  [searchable]=\"true\"\n                  [clearable]=\"false\"\n                  [items]=\"years\"\n                  placeholder=\"{{ 'paymentForm.yearMask' | cxTranslate }}\"\n                  id=\"year-select\"\n                  [cxNgSelectA11y]=\"{\n                    ariaLabel:\n                      'paymentForm.expirationYear'\n                      | cxTranslate\n                        : { selected: paymentForm.get('expiryYear')?.value }\n                  }\"\n                  formControlName=\"expiryYear\"\n                >\n                </ng-select>\n                <cx-form-errors\n                  [control]=\"paymentForm.get('expiryYear')\"\n                ></cx-form-errors>\n              </label>\n            </fieldset>\n          </div>\n\n          <div class=\"form-group col-md-4\">\n            <label>\n              <span class=\"label-content\">\n                {{ 'paymentForm.securityCode' | cxTranslate }}\n                <cx-icon\n                  [type]=\"iconTypes.INFO\"\n                  class=\"cx-payment-form-tooltip\"\n                  placement=\"right\"\n                  title=\"{{ 'paymentForm.securityCodeTitle' | cxTranslate }}\"\n                  alt=\"\"\n                ></cx-icon>\n              </span>\n              <input\n                required=\"true\"\n                type=\"text\"\n                class=\"form-control\"\n                id=\"cVVNumber\"\n                formControlName=\"cvn\"\n              />\n              <cx-form-errors\n                [control]=\"paymentForm.get('cvn')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n        </div>\n\n        <div class=\"form-group\" *ngIf=\"setAsDefaultField\">\n          <div class=\"form-check\">\n            <label>\n              <input\n                type=\"checkbox\"\n                class=\"form-check-input\"\n                (change)=\"toggleDefaultPaymentMethod()\"\n              />\n              <span class=\"form-check-label\">{{\n                'paymentForm.setAsDefault' | cxTranslate\n              }}</span>\n            </label>\n          </div>\n        </div>\n\n        <!-- BILLING -->\n        <div class=\"cx-payment-form-billing\">\n          <div class=\"cx-payment-form-billing-address\">\n            {{ 'paymentForm.billingAddress' | cxTranslate }}\n          </div>\n\n          <!-- SAME AS SHIPPING CHECKBOX -->\n          <ng-container *ngIf=\"showSameAsDeliveryAddressCheckbox$ | async\">\n            <div class=\"form-group\">\n              <div class=\"form-check\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    class=\"form-check-input\"\n                    [checked]=\"sameAsDeliveryAddress\"\n                    (change)=\"toggleSameAsDeliveryAddress()\"\n                    [attr.aria-label]=\"\n                      'paymentForm.billingAddressSameAsShipping' | cxTranslate\n                    \"\n                  />\n                  <span class=\"form-check-label\">{{\n                    'paymentForm.sameAsDeliveryAddress' | cxTranslate\n                  }}</span>\n                </label>\n              </div>\n            </div>\n          </ng-container>\n\n          <!-- BILLING INFO COMPONENT -->\n          <ng-container\n            *ngIf=\"\n              sameAsDeliveryAddress &&\n                (deliveryAddress$ | async) as deliveryAddress;\n              else billingAddress\n            \"\n          >\n            <cx-card\n              [content]=\"getAddressCardContent(deliveryAddress)\"\n            ></cx-card>\n          </ng-container>\n\n          <!-- TODO:#future-checkout do we really want this? We can always pass more inputs to the copied address form component to make it more modular -->\n          <ng-template #billingAddress>\n            <div [formGroup]=\"billingAddressForm\">\n              <div class=\"form-group\" formGroupName=\"country\">\n                <ng-container *ngIf=\"countries$ | async as countries\">\n                  <div *ngIf=\"countries.length !== 0\">\n                    <label>\n                      <span class=\"label-content required\">{{\n                        'addressForm.country' | cxTranslate\n                      }}</span>\n                      <ng-select\n                        [inputAttrs]=\"{ required: 'true' }\"\n                        [searchable]=\"true\"\n                        [clearable]=\"false\"\n                        [items]=\"countries\"\n                        bindLabel=\"name\"\n                        bindValue=\"isocode\"\n                        placeholder=\"{{\n                          'addressForm.selectOne' | cxTranslate\n                        }}\"\n                        (change)=\"countrySelected($event)\"\n                        formControlName=\"isocode\"\n                        id=\"country-payment-select\"\n                        [cxNgSelectA11y]=\"{\n                          ariaLabel: 'addressForm.country' | cxTranslate\n                        }\"\n                      >\n                      </ng-select>\n                      <cx-form-errors\n                        [control]=\"billingAddressForm.get('country.isocode')\"\n                      ></cx-form-errors>\n                    </label>\n                  </div>\n                </ng-container>\n              </div>\n              <div class=\"form-group\">\n                <label>\n                  <span class=\"label-content required\">{{\n                    'addressForm.firstName.label' | cxTranslate\n                  }}</span>\n                  <input\n                    required=\"true\"\n                    class=\"form-control\"\n                    type=\"text\"\n                    placeholder=\"{{\n                      'addressForm.firstName.placeholder' | cxTranslate\n                    }}\"\n                    formControlName=\"firstName\"\n                  />\n                  <cx-form-errors\n                    [control]=\"billingAddressForm.get('firstName')\"\n                  ></cx-form-errors>\n                </label>\n              </div>\n              <div class=\"form-group\">\n                <label>\n                  <span class=\"label-content required\">{{\n                    'addressForm.lastName.label' | cxTranslate\n                  }}</span>\n                  <input\n                    required=\"true\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"{{\n                      'addressForm.lastName.placeholder' | cxTranslate\n                    }}\"\n                    formControlName=\"lastName\"\n                  />\n                  <cx-form-errors\n                    [control]=\"billingAddressForm.get('lastName')\"\n                  ></cx-form-errors>\n                </label>\n              </div>\n              <div class=\"form-group\">\n                <label>\n                  <span class=\"label-content required\">{{\n                    'addressForm.address1' | cxTranslate\n                  }}</span>\n                  <input\n                    required=\"true\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"{{\n                      'addressForm.streetAddress' | cxTranslate\n                    }}\"\n                    formControlName=\"line1\"\n                  />\n                  <cx-form-errors\n                    [control]=\"billingAddressForm.get('line1')\"\n                  ></cx-form-errors>\n                </label>\n              </div>\n              <div class=\"form-group\">\n                <label>\n                  <span class=\"label-content\">{{\n                    'addressForm.address2' | cxTranslate\n                  }}</span>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"{{ 'addressForm.aptSuite' | cxTranslate }}\"\n                    formControlName=\"line2\"\n                  />\n                </label>\n              </div>\n              <div class=\"row\">\n                <div class=\"form-group col-md-6\">\n                  <label>\n                    <span class=\"label-content required\">{{\n                      'addressForm.city.label' | cxTranslate\n                    }}</span>\n                    <input\n                      required=\"true\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"{{\n                        'addressForm.city.placeholder' | cxTranslate\n                      }}\"\n                      formControlName=\"town\"\n                    />\n                    <cx-form-errors\n                      [control]=\"billingAddressForm.get('town')\"\n                    ></cx-form-errors>\n                  </label>\n                </div>\n                <div class=\"form-group col-md-6\">\n                  <label>\n                    <span class=\"label-content required\">{{\n                      'addressForm.zipCode.label' | cxTranslate\n                    }}</span>\n                    <input\n                      required=\"true\"\n                      type=\"text\"\n                      class=\"form-control\"\n                      placeholder=\"{{\n                        'addressForm.zipCode.placeholder' | cxTranslate\n                      }}\"\n                      formControlName=\"postalCode\"\n                    />\n                    <cx-form-errors\n                      [control]=\"billingAddressForm.get('postalCode')\"\n                    ></cx-form-errors>\n                  </label>\n                </div>\n                <ng-container\n                  *ngIf=\"regions$ | async as regions\"\n                  formGroupName=\"region\"\n                >\n                  <ng-container *ngIf=\"regions.length !== 0\">\n                    <div class=\"form-group col-md-6\">\n                      <label>\n                        <span class=\"label-content required\">{{\n                          'addressForm.state' | cxTranslate\n                        }}</span>\n                        <ng-select\n                          [inputAttrs]=\"{ required: 'true' }\"\n                          class=\"region-select\"\n                          formControlName=\"isocodeShort\"\n                          [searchable]=\"true\"\n                          [clearable]=\"false\"\n                          [items]=\"regions\"\n                          bindLabel=\"{{\n                            regions[0].name ? 'name' : 'isocodeShort'\n                          }}\"\n                          bindValue=\"{{\n                            regions[0].name ? 'isocodeShort' : 'region'\n                          }}\"\n                          placeholder=\"{{\n                            'addressForm.selectOne' | cxTranslate\n                          }}\"\n                          id=\"region-select\"\n                          [cxNgSelectA11y]=\"{\n                            ariaLabel: 'addressForm.state' | cxTranslate\n                          }\"\n                        >\n                        </ng-select>\n                        <cx-form-errors\n                          [control]=\"\n                            billingAddressForm.get('region.isocodeShort')\n                          \"\n                        ></cx-form-errors>\n                      </label>\n                    </div>\n                  </ng-container>\n                </ng-container>\n              </div>\n            </div>\n          </ng-template>\n        </div>\n      </div>\n    </div>\n\n    <!-- BUTTON SECTION -->\n    <div class=\"cx-checkout-btns row\">\n      <div class=\"col-md-12 col-lg-6\">\n        <button\n          *ngIf=\"paymentMethodsCount === 0\"\n          class=\"btn btn-block btn-secondary\"\n          (click)=\"back()\"\n        >\n          {{ 'common.back' | cxTranslate }}\n        </button>\n        <button\n          *ngIf=\"paymentMethodsCount > 0\"\n          class=\"btn btn-block btn-secondary\"\n          (click)=\"close()\"\n        >\n          {{ 'paymentForm.changePayment' | cxTranslate }}\n        </button>\n      </div>\n      <div class=\"col-md-12 col-lg-6\">\n        <button class=\"btn btn-block btn-primary\" type=\"submit\">\n          {{ 'common.continue' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </form>\n</ng-container>\n\n<ng-template #spinner>\n  <cx-spinner></cx-spinner>\n</ng-template>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserPaymentService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService
    }, {
      type: _angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserAddressService
    }, {
      type: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.LaunchDialogService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService
    }];
  }, {
    loading: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }],
    setAsDefaultField: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }],
    paymentMethodsCount: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }],
    paymentDetails: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }],
    goBack: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Output
    }],
    closeForm: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Output
    }],
    setPaymentDetails: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Output
    }]
  });
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentFormModule {}
CheckoutPaymentFormModule.ɵfac = function CheckoutPaymentFormModule_Factory(t) {
  return new (t || CheckoutPaymentFormModule)();
};
CheckoutPaymentFormModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutPaymentFormModule
});
CheckoutPaymentFormModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.NgSelectA11yModule, _angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_22__.NgSelectModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.FormErrorsModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPaymentFormModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.NgSelectA11yModule, _angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_22__.NgSelectModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.FormErrorsModule],
      declarations: [CheckoutPaymentFormComponent],
      exports: [CheckoutPaymentFormComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentMethodComponent {
  get backBtnText() {
    return this.checkoutStepService.getBackBntText(this.activatedRoute);
  }
  get existingPaymentMethods$() {
    return this.userPaymentService.getPaymentMethods();
  }
  get selectedMethod$() {
    return this.checkoutPaymentFacade.getPaymentDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)((prev, curr) => prev?.id === curr?.id));
  }
  constructor(userPaymentService, checkoutDeliveryAddressFacade, checkoutPaymentFacade, activatedRoute, translationService, activeCartFacade, checkoutStepService, globalMessageService) {
    this.userPaymentService = userPaymentService;
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.checkoutPaymentFacade = checkoutPaymentFacade;
    this.activatedRoute = activatedRoute;
    this.translationService = translationService;
    this.activeCartFacade = activeCartFacade;
    this.checkoutStepService = checkoutStepService;
    this.globalMessageService = globalMessageService;
    this.subscriptions = new rxjs__WEBPACK_IMPORTED_MODULE_23__.Subscription();
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(false);
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.ICON_TYPE;
    this.isGuestCheckout = false;
    this.newPaymentFormManuallyOpened = false;
    this.doneAutoSelect = false;
    this.isUpdating$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.busy$, this.userPaymentService.getPaymentMethodsLoading(), this.checkoutPaymentFacade.getPaymentDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.loading))]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([busy, userPaymentLoading, paymentMethodLoading]) => busy || userPaymentLoading || paymentMethodLoading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)());
  }
  ngOnInit() {
    if (!(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.getLastValueSync)(this.activeCartFacade.isGuestCart())) {
      this.userPaymentService.loadPaymentMethods();
    } else {
      this.isGuestCheckout = true;
    }
    this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data)).subscribe(address => {
      this.deliveryAddress = address;
    });
    this.cards$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.existingPaymentMethods$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(methods => {
      return !methods?.length ? (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)([]) : (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)(methods.map(method => (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([(0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(method), this.translationService.translate('paymentCard.expires', {
        month: method.expiryMonth,
        year: method.expiryYear
      })]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([payment, translation]) => ({
        payment,
        expiryTranslation: translation
      })))));
    })), this.selectedMethod$, this.translationService.translate('paymentForm.useThisPayment'), this.translationService.translate('paymentCard.defaultPaymentMethod'), this.translationService.translate('paymentCard.selected')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(([paymentMethods, selectedMethod]) => this.selectDefaultPaymentMethod(paymentMethods, selectedMethod)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([paymentMethods, selectedMethod, textUseThisPayment, textDefaultPaymentMethod, textSelected]) => paymentMethods.map(payment => ({
      content: this.createCard(payment.payment, {
        textExpires: payment.expiryTranslation,
        textUseThisPayment,
        textDefaultPaymentMethod,
        textSelected
      }, selectedMethod),
      paymentMethod: payment.payment
    }))));
  }
  selectDefaultPaymentMethod(paymentMethods, selectedMethod) {
    if (!this.doneAutoSelect && paymentMethods?.length && (!selectedMethod || Object.keys(selectedMethod).length === 0)) {
      const defaultPaymentMethod = paymentMethods.find(paymentMethod => paymentMethod.payment.defaultPayment);
      if (defaultPaymentMethod) {
        selectedMethod = defaultPaymentMethod.payment;
        this.savePaymentMethod(selectedMethod);
      }
      this.doneAutoSelect = true;
    }
  }
  selectPaymentMethod(paymentDetails) {
    if (paymentDetails?.id === (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.getLastValueSync)(this.selectedMethod$)?.id) {
      return;
    }
    this.globalMessageService.add({
      key: 'paymentMethods.paymentMethodSelected'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageType.MSG_TYPE_INFO);
    this.savePaymentMethod(paymentDetails);
  }
  showNewPaymentForm() {
    this.newPaymentFormManuallyOpened = true;
  }
  hideNewPaymentForm() {
    this.newPaymentFormManuallyOpened = false;
  }
  setPaymentDetails({
    paymentDetails,
    billingAddress
  }) {
    this.paymentDetails = paymentDetails;
    const details = {
      ...paymentDetails
    };
    details.billingAddress = billingAddress ?? this.deliveryAddress;
    this.busy$.next(true);
    this.subscriptions.add(this.checkoutPaymentFacade.createPaymentDetails(details).subscribe({
      complete: () => {
        // we don't call onSuccess here, because it can cause a spinner flickering
        this.next();
      },
      error: () => {
        this.onError();
      }
    }));
  }
  next() {
    this.checkoutStepService.next(this.activatedRoute);
  }
  back() {
    this.checkoutStepService.back(this.activatedRoute);
  }
  savePaymentMethod(paymentDetails) {
    this.busy$.next(true);
    this.subscriptions.add(this.checkoutPaymentFacade.setPaymentDetails(paymentDetails).subscribe({
      complete: () => this.onSuccess(),
      error: () => this.onError()
    }));
  }
  getCardIcon(code) {
    let ccIcon;
    if (code === 'visa') {
      ccIcon = this.iconTypes.VISA;
    } else if (code === 'master' || code === 'mastercard_eurocard') {
      ccIcon = this.iconTypes.MASTER_CARD;
    } else if (code === 'diners') {
      ccIcon = this.iconTypes.DINERS_CLUB;
    } else if (code === 'amex') {
      ccIcon = this.iconTypes.AMEX;
    } else {
      ccIcon = this.iconTypes.CREDIT_CARD;
    }
    return ccIcon;
  }
  createCard(paymentDetails, cardLabels, selected) {
    return {
      role: 'region',
      title: paymentDetails.defaultPayment ? cardLabels.textDefaultPaymentMethod : '',
      textBold: paymentDetails.accountHolderName,
      text: [paymentDetails.cardNumber ?? '', cardLabels.textExpires],
      img: this.getCardIcon(paymentDetails.cardType?.code),
      actions: [{
        name: cardLabels.textUseThisPayment,
        event: 'send'
      }],
      header: selected?.id === paymentDetails.id ? cardLabels.textSelected : undefined,
      label: paymentDetails.defaultPayment ? 'paymentCard.defaultPaymentLabel' : 'paymentCard.additionalPaymentLabel'
    };
  }
  onSuccess() {
    this.busy$.next(false);
  }
  onError() {
    this.busy$.next(false);
  }
  ngOnDestroy() {
    this.subscriptions.unsubscribe();
  }
}
CheckoutPaymentMethodComponent.ɵfac = function CheckoutPaymentMethodComponent_Factory(t) {
  return new (t || CheckoutPaymentMethodComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserPaymentService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService));
};
CheckoutPaymentMethodComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutPaymentMethodComponent,
  selectors: [["cx-payment-method"]],
  decls: 7,
  vars: 6,
  consts: [[1, "cx-checkout-title", "d-none", "d-lg-block", "d-xl-block"], [4, "ngIf"], ["loading", ""], [4, "ngIf", "ngIfElse"], ["hasExistingPaymentMethods", ""], ["newPaymentForm", ""], ["role", "status"], [4, "ngIf", "ngIfThen", "ngIfElse"], [1, "cx-checkout-text"], [4, "cxFeatureLevel"], [1, "cx-checkout-body", "row"], ["class", "cx-payment-card col-md-12 col-lg-6", 4, "ngFor", "ngForOf"], [1, "row", "cx-checkout-btns"], [1, "col-md-12", "col-lg-6"], [1, "btn", "btn-block", "btn-secondary", 3, "click"], [1, "btn", "btn-block", "btn-primary", 3, "disabled", "click"], [1, "cx-checkout-btns", "row"], [1, "cx-checkout-btns", "cx-checkout-btns-top"], [1, "cx-payment-card", "col-md-12", "col-lg-6"], [1, "cx-payment-card-inner", 3, "click"], [3, "border", "fitToContainer", "content", "index", "sendCard"], [1, "cx-checkout-btns", "cx-checkout-btns-bottom"], [3, "paymentMethodsCount", "setAsDefaultField", "loading", "paymentDetails", "setPaymentDetails", "closeForm", "goBack"], [1, "cx-spinner"]],
  template: function CheckoutPaymentMethodComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "h2", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, CheckoutPaymentMethodComponent_ng_container_3_Template, 7, 4, "ng-container", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CheckoutPaymentMethodComponent_ng_template_5_Template, 2, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 2, "paymentForm.payment"), "\n");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 4, ctx.cards$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, CheckoutPaymentFormComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerComponent, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeatureLevelDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPaymentMethodComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-payment-method',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<h2 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n  {{ 'paymentForm.payment' | cxTranslate }}\n</h2>\n<ng-container *ngIf=\"cards$ | async as cards\">\n  <ng-container *ngIf=\"!(isUpdating$ | async); else loading\">\n    <div role=\"status\" [attr.aria-label]=\"'common.loaded' | cxTranslate\"></div>\n    <ng-container\n      *ngIf=\"\n        cards?.length && !newPaymentFormManuallyOpened;\n        then hasExistingPaymentMethods;\n        else newPaymentForm\n      \"\n    >\n    </ng-container>\n  </ng-container>\n\n  <ng-template #hasExistingPaymentMethods>\n    <p class=\"cx-checkout-text\">\n      {{ 'paymentForm.choosePaymentMethod' | cxTranslate }}\n    </p>\n\n    <ng-container *cxFeatureLevel=\"'!6.3'\">\n      <div class=\"cx-checkout-btns row\">\n        <div class=\"col-md-12 col-lg-6\">\n          <button\n            class=\"btn btn-block btn-secondary\"\n            (click)=\"showNewPaymentForm()\"\n          >\n            {{ 'paymentForm.addNewPayment' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-container *cxFeatureLevel=\"'6.3'\">\n      <div class=\"cx-checkout-btns cx-checkout-btns-top\">\n        <button\n          class=\"btn btn-block btn-secondary\"\n          (click)=\"showNewPaymentForm()\"\n        >\n          {{ 'paymentForm.addNewPayment' | cxTranslate }}\n        </button>\n      </div>\n    </ng-container>\n\n    <div class=\"cx-checkout-body row\">\n      <div\n        class=\"cx-payment-card col-md-12 col-lg-6\"\n        *ngFor=\"let card of cards; let i = index\"\n      >\n        <div\n          class=\"cx-payment-card-inner\"\n          (click)=\"selectPaymentMethod(card.paymentMethod)\"\n        >\n          <cx-card\n            [border]=\"true\"\n            [fitToContainer]=\"true\"\n            [content]=\"card.content\"\n            [index]=\"i\"\n            (sendCard)=\"selectPaymentMethod(card.paymentMethod)\"\n          ></cx-card>\n        </div>\n      </div>\n    </div>\n\n    <ng-container *cxFeatureLevel=\"'6.3'\">\n      <div class=\"cx-checkout-btns cx-checkout-btns-bottom\">\n        <button\n          class=\"btn btn-block btn-secondary\"\n          (click)=\"showNewPaymentForm()\"\n        >\n          {{ 'paymentForm.addNewPayment' | cxTranslate }}\n        </button>\n      </div>\n    </ng-container>\n\n    <div class=\"row cx-checkout-btns\">\n      <div class=\"col-md-12 col-lg-6\">\n        <button class=\"btn btn-block btn-secondary\" (click)=\"back()\">\n          {{ backBtnText | cxTranslate }}\n        </button>\n      </div>\n      <div class=\"col-md-12 col-lg-6\">\n        <button\n          class=\"btn btn-block btn-primary\"\n          [disabled]=\"!(selectedMethod$ | async)?.id\"\n          (click)=\"next()\"\n        >\n          {{ 'common.continue' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #newPaymentForm>\n    <cx-payment-form\n      (setPaymentDetails)=\"setPaymentDetails($event)\"\n      (closeForm)=\"hideNewPaymentForm()\"\n      (goBack)=\"back()\"\n      [paymentMethodsCount]=\"cards?.length || 0\"\n      [setAsDefaultField]=\"!isGuestCheckout && !!cards?.length\"\n      [loading]=\"isUpdating$ | async\"\n      [paymentDetails]=\"paymentDetails\"\n    ></cx-payment-form>\n  </ng-template>\n</ng-container>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UserPaymentService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.ActivatedRoute
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: CheckoutStepService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.GlobalMessageService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentMethodModule {}
CheckoutPaymentMethodModule.ɵfac = function CheckoutPaymentMethodModule_Factory(t) {
  return new (t || CheckoutPaymentMethodModule)();
};
CheckoutPaymentMethodModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutPaymentMethodModule
});
CheckoutPaymentMethodModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutPaymentDetails: {
        component: CheckoutPaymentMethodComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, CheckoutPaymentFormModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeaturesConfigModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPaymentMethodModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, CheckoutPaymentFormModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.FeaturesConfigModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutPaymentDetails: {
            component: CheckoutPaymentMethodComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })],
      declarations: [CheckoutPaymentMethodComponent],
      exports: [CheckoutPaymentMethodComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPlaceOrderComponent {
  get termsAndConditionInvalid() {
    return this.checkoutSubmitForm.invalid;
  }
  constructor(orderFacade, routingService, fb, launchDialogService, vcr) {
    this.orderFacade = orderFacade;
    this.routingService = routingService;
    this.fb = fb;
    this.launchDialogService = launchDialogService;
    this.vcr = vcr;
    this.checkoutSubmitForm = this.fb.group({
      termsAndConditions: [false, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.Validators.requiredTrue]
    });
  }
  submitForm() {
    if (this.checkoutSubmitForm.valid) {
      this.placedOrder = this.launchDialogService.launch("PLACE_ORDER_SPINNER" /* LAUNCH_CALLER.PLACE_ORDER_SPINNER */, this.vcr);
      this.orderFacade.placeOrder(this.checkoutSubmitForm.valid).subscribe({
        error: () => {
          if (!this.placedOrder) {
            return;
          }
          this.placedOrder.subscribe(component => {
            this.launchDialogService.clear("PLACE_ORDER_SPINNER" /* LAUNCH_CALLER.PLACE_ORDER_SPINNER */);
            if (component) {
              component.destroy();
            }
          }).unsubscribe();
        },
        next: () => this.onSuccess()
      });
    } else {
      this.checkoutSubmitForm.markAllAsTouched();
    }
  }
  onSuccess() {
    this.routingService.go({
      cxRoute: 'orderConfirmation'
    });
  }
  ngOnDestroy() {
    this.launchDialogService.clear("PLACE_ORDER_SPINNER" /* LAUNCH_CALLER.PLACE_ORDER_SPINNER */);
  }
}

CheckoutPlaceOrderComponent.ɵfac = function CheckoutPlaceOrderComponent_Factory(t) {
  return new (t || CheckoutPlaceOrderComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.OrderFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.LaunchDialogService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef));
};
CheckoutPlaceOrderComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutPlaceOrderComponent,
  selectors: [["cx-place-order"]],
  decls: 15,
  vars: 18,
  consts: [[1, "cx-place-order-form", "form-check", 3, "formGroup"], [1, "form-group"], ["formControlName", "termsAndConditions", "type", "checkbox", 1, "scaled-input", "form-check-input"], [1, "form-check-label"], ["target", "_blank", "rel", "noopener noreferrer", 1, "cx-tc-link", 3, "routerLink"], [1, "btn", "btn-primary", "btn-block", 3, "disabled", "cxAtMessage", "click"]],
  template: function CheckoutPlaceOrderComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 0)(1, "div", 1)(2, "label");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](3, "input", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "span", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "a", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "button", 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CheckoutPlaceOrderComponent_Template_button_click_11_listener() {
        return ctx.submitForm();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.checkoutSubmitForm);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 7, "checkoutReview.confirmThatRead"), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](17, _c4)));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 11, "checkoutReview.termsAndConditions"), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.termsAndConditionInvalid)("cxAtMessage", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](12, 13, "checkoutReview.orderInProcess"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 15, "checkoutReview.placeOrder"), " ");
    }
  },
  dependencies: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.AtMessageDirective, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterLink, _angular_forms__WEBPACK_IMPORTED_MODULE_20__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_20__.CheckboxControlValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.FormControlName, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPlaceOrderComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-place-order',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<form class=\"cx-place-order-form form-check\" [formGroup]=\"checkoutSubmitForm\">\n  <div class=\"form-group\">\n    <label>\n      <input\n        formControlName=\"termsAndConditions\"\n        class=\"scaled-input form-check-input\"\n        type=\"checkbox\"\n      />\n      <span class=\"form-check-label\">\n        {{ 'checkoutReview.confirmThatRead' | cxTranslate }}\n        <a\n          [routerLink]=\"{ cxRoute: 'termsAndConditions' } | cxUrl\"\n          class=\"cx-tc-link\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          {{ 'checkoutReview.termsAndConditions' | cxTranslate }}\n        </a>\n      </span>\n    </label>\n  </div>\n\n  <button\n    (click)=\"submitForm()\"\n    class=\"btn btn-primary btn-block\"\n    [disabled]=\"termsAndConditionInvalid\"\n    [cxAtMessage]=\"'checkoutReview.orderInProcess' | cxTranslate\"\n  >\n    {{ 'checkoutReview.placeOrder' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.OrderFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingService
    }, {
      type: _angular_forms__WEBPACK_IMPORTED_MODULE_20__.UntypedFormBuilder
    }, {
      type: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.LaunchDialogService
    }, {
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const defaultPlaceOrderSpinnerLayoutConfig = {
  launch: {
    PLACE_ORDER_SPINNER: {
      inline: true,
      component: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.SpinnerComponent,
      dialogType: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.DIALOG_TYPE.POPOVER_CENTER_BACKDROP
    }
  }
};

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPlaceOrderModule {}
CheckoutPlaceOrderModule.ɵfac = function CheckoutPlaceOrderModule_Factory(t) {
  return new (t || CheckoutPlaceOrderModule)();
};
CheckoutPlaceOrderModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutPlaceOrderModule
});
CheckoutPlaceOrderModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)(defaultPlaceOrderSpinnerLayoutConfig), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutPlaceOrder: {
        component: CheckoutPlaceOrderComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.AtMessageModule, _angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPlaceOrderModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.AtMessageModule, _angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_forms__WEBPACK_IMPORTED_MODULE_20__.ReactiveFormsModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)(defaultPlaceOrderSpinnerLayoutConfig), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutPlaceOrder: {
            component: CheckoutPlaceOrderComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })],
      declarations: [CheckoutPlaceOrderComponent],
      exports: [CheckoutPlaceOrderComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutStepsSetGuard {
  constructor(checkoutStepService, routingConfigService, checkoutDeliveryAddressFacade, checkoutPaymentFacade, checkoutDeliveryModesFacade, router, activeCartFacade) {
    this.checkoutStepService = checkoutStepService;
    this.routingConfigService = routingConfigService;
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.checkoutPaymentFacade = checkoutPaymentFacade;
    this.checkoutDeliveryModesFacade = checkoutDeliveryModesFacade;
    this.router = router;
    this.activeCartFacade = activeCartFacade;
    this.logger = (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.LoggerService);
    this.subscription = this.activeCartFacade.hasDeliveryItems().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilChanged)()).subscribe(hasDeliveryItems => {
      this.checkoutStepService.disableEnableStep("deliveryAddress" /* CheckoutStepType.DELIVERY_ADDRESS */, !hasDeliveryItems);
      this.checkoutStepService.disableEnableStep("deliveryMode" /* CheckoutStepType.DELIVERY_MODE */, !hasDeliveryItems);
      this.setStepNameMultiLine("paymentDetails" /* CheckoutStepType.PAYMENT_DETAILS */, hasDeliveryItems);
      this.setStepNameMultiLine("reviewOrder" /* CheckoutStepType.REVIEW_ORDER */, hasDeliveryItems);
    });
  }
  canActivate(route) {
    let currentIndex = -1;
    const currentRouteUrl = '/' + route.url.join('/');
    // check whether the previous step is set
    return this.checkoutStepService.steps$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(steps => {
      currentIndex = steps.findIndex(step => {
        const stepRouteUrl = `/${this.routingConfigService.getRouteConfig(step.routeName)?.paths?.[0]}`;
        return stepRouteUrl === currentRouteUrl;
      });
      // get current step
      let currentStep;
      if (currentIndex >= 0) {
        currentStep = steps[currentIndex];
      }
      if (Boolean(currentStep)) {
        return this.isStepSet(steps[currentIndex - 1]);
      } else {
        if ((0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.isDevMode)()) {
          this.logger.warn(`Missing step with route '${currentRouteUrl}' in checkout configuration or this step is disabled.`);
        }
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(this.getUrl('checkout'));
      }
    }));
  }
  isStepSet(step) {
    if (step && !step.disabled) {
      switch (step.type[0]) {
        case "deliveryAddress" /* CheckoutStepType.DELIVERY_ADDRESS */:
          {
            return this.isDeliveryAddress(step);
          }
        case "deliveryMode" /* CheckoutStepType.DELIVERY_MODE */:
          {
            return this.isDeliveryModeSet(step);
          }
        case "paymentDetails" /* CheckoutStepType.PAYMENT_DETAILS */:
          {
            if (this.checkoutStepService.getCheckoutStep("deliveryMode" /* CheckoutStepType.DELIVERY_MODE */)?.disabled) {
              this.checkoutDeliveryModesFacade.setDeliveryMode('pickup');
            }
            return this.isPaymentDetailsSet(step);
          }
        case "reviewOrder" /* CheckoutStepType.REVIEW_ORDER */:
          {
            break;
          }
      }
    }
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)(true);
  }
  isDeliveryAddress(step) {
    return this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(deliveryAddress => {
      if (deliveryAddress && Object.keys(deliveryAddress).length) {
        return true;
      } else {
        return this.getUrl(step.routeName);
      }
    }));
  }
  isDeliveryModeSet(step) {
    return this.checkoutDeliveryModesFacade.getSelectedDeliveryModeState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(mode => mode ? true : this.getUrl(step.routeName)));
  }
  isPaymentDetailsSet(step) {
    return this.checkoutPaymentFacade.getPaymentDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(paymentDetails => paymentDetails && Object.keys(paymentDetails).length !== 0 ? true : this.getUrl(step.routeName)));
  }
  getUrl(routeName) {
    return this.router.parseUrl(this.routingConfigService.getRouteConfig(routeName)?.paths?.[0]);
  }
  setStepNameMultiLine(stepType, value) {
    const step = this.checkoutStepService.getCheckoutStep(stepType);
    if (step) {
      step.nameMultiLine = value;
    }
  }
  ngOnDestroy() {
    this.subscription.unsubscribe();
  }
}
CheckoutStepsSetGuard.ɵfac = function CheckoutStepsSetGuard_Factory(t) {
  return new (t || CheckoutStepsSetGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutStepService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_4__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade));
};
CheckoutStepsSetGuard.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutStepsSetGuard,
  factory: CheckoutStepsSetGuard.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutStepsSetGuard, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: CheckoutStepService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.RoutingConfigService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_4__.Router
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutProgressMobileBottomComponent {
  constructor(checkoutStepService) {
    this.checkoutStepService = checkoutStepService;
    this._steps$ = this.checkoutStepService.steps$;
    this.activeStepIndex$ = this.checkoutStepService.activeStepIndex$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(index => this.activeStepIndex = index));
  }
  get steps$() {
    return this._steps$.asObservable();
  }
}
CheckoutProgressMobileBottomComponent.ɵfac = function CheckoutProgressMobileBottomComponent_Factory(t) {
  return new (t || CheckoutProgressMobileBottomComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService));
};
CheckoutProgressMobileBottomComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutProgressMobileBottomComponent,
  selectors: [["cx-checkout-progress-mobile-bottom"]],
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], [1, "cx-media"], [4, "ngFor", "ngForOf"], ["class", "cx-list-media", 4, "ngIf"], [1, "cx-list-media"]],
  template: function CheckoutProgressMobileBottomComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutProgressMobileBottomComponent_div_0_Template, 4, 3, "div", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.activeStepIndex$) !== undefined);
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutProgressMobileBottomComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-progress-mobile-bottom',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<div *ngIf=\"(activeStepIndex$ | async) !== undefined\">\n  <div class=\"cx-media\">\n    <div *ngFor=\"let step of steps$ | async; let i = index\">\n      <div class=\"cx-list-media\" *ngIf=\"i > activeStepIndex\">\n        <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\n      </div>\n    </div>\n  </div>\n</div>\n"
    }]
  }], function () {
    return [{
      type: CheckoutStepService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutProgressMobileBottomModule {}
CheckoutProgressMobileBottomModule.ɵfac = function CheckoutProgressMobileBottomModule_Factory(t) {
  return new (t || CheckoutProgressMobileBottomModule)();
};
CheckoutProgressMobileBottomModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutProgressMobileBottomModule
});
CheckoutProgressMobileBottomModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutProgressMobileBottom: {
        component: CheckoutProgressMobileBottomComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutProgressMobileBottomModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutProgressMobileBottom: {
            component: CheckoutProgressMobileBottomComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard]
          }
        }
      })],
      declarations: [CheckoutProgressMobileBottomComponent],
      exports: [CheckoutProgressMobileBottomComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutProgressMobileTopComponent {
  constructor(activeCartFacade, checkoutStepService) {
    this.activeCartFacade = activeCartFacade;
    this.checkoutStepService = checkoutStepService;
    this._steps$ = this.checkoutStepService.steps$;
    this.cart$ = this.activeCartFacade.getActive();
    this.activeStepIndex$ = this.checkoutStepService.activeStepIndex$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(index => this.activeStepIndex = index));
  }
  get steps$() {
    return this._steps$.asObservable();
  }
}
CheckoutProgressMobileTopComponent.ɵfac = function CheckoutProgressMobileTopComponent_Factory(t) {
  return new (t || CheckoutProgressMobileTopComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService));
};
CheckoutProgressMobileTopComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutProgressMobileTopComponent,
  selectors: [["cx-checkout-progress-mobile-top"]],
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], [1, "cx-media"], ["class", "cx-list-media", 4, "ngIf"], [4, "ngFor", "ngForOf"], [1, "cx-list-media"], ["class", "cx-list-media is-active", 4, "ngIf"], [1, "btn", "btn-link", 3, "routerLink"], [1, "cx-list-media", "is-active"]],
  template: function CheckoutProgressMobileTopComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutProgressMobileTopComponent_div_0_Template, 3, 3, "div", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.activeStepIndex$) !== undefined);
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterLink, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutProgressMobileTopComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-progress-mobile-top',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<div *ngIf=\"(activeStepIndex$ | async) !== undefined\">\n  <div *ngIf=\"cart$ | async as cart\">\n    <div class=\"cx-media\">\n      <div class=\"cx-list-media\" *ngIf=\"cart?.totalItems && cart?.subTotal\">\n        {{ 'cartItems.cartTotal' | cxTranslate: { count: cart.totalItems } }}:\n        {{ cart.subTotal.formattedValue }}\n      </div>\n      <div *ngFor=\"let step of steps$ | async; let i = index\">\n        <div class=\"cx-list-media\" *ngIf=\"i < activeStepIndex\">\n          <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\n          <button\n            class=\"btn btn-link\"\n            [routerLink]=\"{ cxRoute: step.routeName } | cxUrl\"\n          >\n            {{ 'common.edit' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"cx-list-media is-active\" *ngIf=\"i === activeStepIndex\">\n          <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: CheckoutStepService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutProgressMobileTopModule {}
CheckoutProgressMobileTopModule.ɵfac = function CheckoutProgressMobileTopModule_Factory(t) {
  return new (t || CheckoutProgressMobileTopModule)();
};
CheckoutProgressMobileTopModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutProgressMobileTopModule
});
CheckoutProgressMobileTopModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutProgressMobileTop: {
        component: CheckoutProgressMobileTopComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutProgressMobileTopModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutProgressMobileTop: {
            component: CheckoutProgressMobileTopComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard]
          }
        }
      })],
      declarations: [CheckoutProgressMobileTopComponent],
      exports: [CheckoutProgressMobileTopComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class MultiLinePipe {
  transform(value) {
    const lastIndex = value.lastIndexOf(' ');
    if (lastIndex === -1) {
      return value;
    }
    return value.substring(0, lastIndex) + '<br />' + value.substring(lastIndex, value.length).trim();
  }
}
MultiLinePipe.ɵfac = function MultiLinePipe_Factory(t) {
  return new (t || MultiLinePipe)();
};
MultiLinePipe.ɵpipe = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({
  name: "cxMultiLine",
  type: MultiLinePipe,
  pure: true
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](MultiLinePipe, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Pipe,
    args: [{
      name: 'cxMultiLine'
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutProgressComponent {
  constructor(checkoutStepService) {
    this.checkoutStepService = checkoutStepService;
    this._steps$ = this.checkoutStepService.steps$;
    this.activeStepIndex$ = this.checkoutStepService.activeStepIndex$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(index => this.activeStepIndex = index));
  }
  get steps$() {
    return this._steps$.asObservable();
  }
  getTabIndex(stepIndex) {
    return !this.isActive(stepIndex) && !this.isDisabled(stepIndex) ? 0 : -1;
  }
  isActive(index) {
    return index === this.activeStepIndex;
  }
  isDisabled(index) {
    return index > this.activeStepIndex;
  }
}
CheckoutProgressComponent.ɵfac = function CheckoutProgressComponent_Factory(t) {
  return new (t || CheckoutProgressComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService));
};
CheckoutProgressComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutProgressComponent,
  selectors: [["cx-checkout-progress"]],
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], [1, "cx-nav", "d-none", "d-lg-block", "d-xl-block"], [1, "cx-list"], [4, "ngFor", "ngForOf"], [1, "cx-item"], [1, "cx-link", 3, "routerLink", "tabindex", "innerHTML"]],
  template: function CheckoutProgressComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutProgressComponent_nav_0_Template, 6, 6, "nav", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.activeStepIndex$) !== undefined);
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterLink, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe, MultiLinePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutProgressComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-progress',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<nav\n  [attr.aria-label]=\"'checkoutProgress.label' | cxTranslate\"\n  *ngIf=\"(activeStepIndex$ | async) !== undefined\"\n>\n  <div class=\"cx-nav d-none d-lg-block d-xl-block\">\n    <ul class=\"cx-list\">\n      <ng-container *ngFor=\"let step of steps$ | async; let i = index\">\n        <li\n          class=\"cx-item\"\n          [class.active]=\"isActive(i)\"\n          [class.disabled]=\"isDisabled(i)\"\n        >\n          <a\n            [routerLink]=\"{ cxRoute: step.routeName } | cxUrl\"\n            class=\"cx-link\"\n            [class.active]=\"isActive(i)\"\n            [class.disabled]=\"isDisabled(i)\"\n            [tabindex]=\"getTabIndex(i)\"\n            [innerHTML]=\"\n              step.nameMultiLine !== false\n                ? (step.name | cxTranslate | cxMultiLine)\n                : (step.name | cxTranslate)\n            \"\n          >\n          </a>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n</nav>\n"
    }]
  }], function () {
    return [{
      type: CheckoutStepService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutProgressModule {}
CheckoutProgressModule.ɵfac = function CheckoutProgressModule_Factory(t) {
  return new (t || CheckoutProgressModule)();
};
CheckoutProgressModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutProgressModule
});
CheckoutProgressModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutProgress: {
        component: CheckoutProgressComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutProgressModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule],
      declarations: [CheckoutProgressComponent, MultiLinePipe],
      exports: [CheckoutProgressComponent],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutProgress: {
            component: CheckoutProgressComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard]
          }
        }
      })]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewSubmitComponent {
  constructor(checkoutDeliveryAddressFacade, checkoutPaymentFacade, activeCartFacade, translationService, checkoutStepService, checkoutDeliveryModesFacade) {
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.checkoutPaymentFacade = checkoutPaymentFacade;
    this.activeCartFacade = activeCartFacade;
    this.translationService = translationService;
    this.checkoutStepService = checkoutStepService;
    this.checkoutDeliveryModesFacade = checkoutDeliveryModesFacade;
    this.cartOutlets = _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.CartOutlets;
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.ICON_TYPE;
    this.checkoutStepTypeDeliveryAddress = "deliveryAddress" /* CheckoutStepType.DELIVERY_ADDRESS */;
    this.checkoutStepTypePaymentDetails = "paymentDetails" /* CheckoutStepType.PAYMENT_DETAILS */;
    this.checkoutStepTypeDeliveryMode = "deliveryMode" /* CheckoutStepType.DELIVERY_MODE */;
    this.promotionLocation = _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.PromotionLocation.ActiveCart;
    this.steps$ = this.checkoutStepService.steps$;
    this.deliveryAddress$ = this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading && !state.error), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
    this.deliveryMode$ = this.checkoutDeliveryModesFacade.getSelectedDeliveryModeState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading && !state.error), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
    this.paymentDetails$ = this.checkoutPaymentFacade.getPaymentDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading && !state.error), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
  }
  get cart$() {
    return this.activeCartFacade.getActive();
  }
  get entries$() {
    return this.activeCartFacade.getEntries();
  }
  getCheckoutDeliverySteps() {
    return ["deliveryAddress" /* CheckoutStepType.DELIVERY_ADDRESS */, "deliveryMode" /* CheckoutStepType.DELIVERY_MODE */];
  }

  getCheckoutPaymentSteps() {
    return ["paymentDetails" /* CheckoutStepType.PAYMENT_DETAILS */, "deliveryAddress" /* CheckoutStepType.DELIVERY_ADDRESS */];
  }

  getDeliveryAddressCard(deliveryAddress, countryName) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('addressCard.shipTo'), this.translationService.translate('addressCard.phoneNumber'), this.translationService.translate('addressCard.mobileNumber')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textTitle, textPhone, textMobile]) => (0,_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.deliveryAddressCard)(textTitle, textPhone, textMobile, deliveryAddress, countryName)));
  }
  getDeliveryModeCard(deliveryMode) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('checkoutMode.deliveryMethod')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textTitle]) => (0,_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.deliveryModeCard)(textTitle, deliveryMode)));
  }
  getPaymentMethodCard(paymentDetails) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('paymentForm.payment'), this.translationService.translate('paymentCard.expires', {
      month: paymentDetails.expiryMonth,
      year: paymentDetails.expiryYear
    }), this.translationService.translate('paymentForm.billingAddress')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textTitle, textExpires, billingAddress]) => {
      const region = paymentDetails.billingAddress?.region?.isocode ? paymentDetails.billingAddress?.region?.isocode + ', ' : '';
      return {
        title: textTitle,
        textBold: paymentDetails.accountHolderName,
        text: [paymentDetails.cardNumber, textExpires],
        paragraphs: [{
          title: billingAddress + ':',
          text: [paymentDetails.billingAddress?.firstName + ' ' + paymentDetails.billingAddress?.lastName, paymentDetails.billingAddress?.line1, paymentDetails.billingAddress?.town + ', ' + region + paymentDetails.billingAddress?.country?.isocode, paymentDetails.billingAddress?.postalCode]
        }]
      };
    }));
  }
  getCheckoutStepUrl(stepType) {
    const step = this.checkoutStepService.getCheckoutStep(stepType);
    return step?.routeName;
  }
  deliverySteps(steps) {
    return steps.filter(step => this.getCheckoutDeliverySteps().includes(step.type[0]));
  }
  paymentSteps(steps) {
    return steps.filter(step => this.getCheckoutPaymentSteps().includes(step.type[0]));
  }
}
CheckoutReviewSubmitComponent.ɵfac = function CheckoutReviewSubmitComponent_Factory(t) {
  return new (t || CheckoutReviewSubmitComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade));
};
CheckoutReviewSubmitComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutReviewSubmitComponent,
  selectors: [["cx-review-submit"]],
  decls: 15,
  vars: 9,
  consts: [[1, "cx-review"], [1, "cx-review-title", "d-none", "d-lg-block", "d-xl-block"], [1, "cx-review-summary", "row"], [4, "ngIf"], ["deliveryAddress", ""], ["deliveryMode", ""], ["paymentMethod", ""], [1, "col-md-12", "col-lg-6", "col-xl-6", "cx-review-payment-col"], [4, "ngFor", "ngForOf"], [1, "col-md-12", "col-lg-6", "col-xl-6", "cx-review-shipping-col"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngTemplateOutlet"], ["class", "cx-review-summary-card cx-review-card-address", 4, "ngIf"], [1, "cx-review-summary-card", "cx-review-card-address"], [3, "content"], [1, "cx-review-summary-edit-step"], [3, "routerLink"], ["aria-hidden", "true", 3, "type"], [1, "cx-review-summary-card", "cx-review-card-shipping"], [3, "content", 4, "ngIf"], [1, "cx-review-summary-card", "cx-review-card-payment"], [1, "cx-review-cart-total", "d-none", "d-lg-block", "d-xl-block"], [1, "cx-review-cart-heading", "d-block", "d-lg-none", "d-xl-none"], ["class", "cx-review-cart-item", 4, "ngIf"], [1, "cx-review-cart-item"], [3, "promotions"], [3, "cxOutlet", "cxOutletContext"]],
  template: function CheckoutReviewSubmitComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0)(1, "h2", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, CheckoutReviewSubmitComponent_ng_container_5_Template, 5, 2, "ng-container", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, CheckoutReviewSubmitComponent_ng_template_7_Template, 2, 3, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, CheckoutReviewSubmitComponent_ng_template_9_Template, 8, 12, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, CheckoutReviewSubmitComponent_ng_template_11_Template, 9, 12, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, CheckoutReviewSubmitComponent_ng_container_13_Template, 9, 13, "ng-container", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    }
    if (rf & 2) {
      let tmp_1_0;
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 3, "checkoutReview.review"), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 5, ctx.steps$)) == null ? null : tmp_1_0.slice(0, -1));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](8);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 7, ctx.cart$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgTemplateOutlet, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgSwitchCase, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardComponent, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PromotionsComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewSubmitComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-review-submit',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<div class=\"cx-review\">\n  <!-- TITLE -->\n  <h2 class=\"cx-review-title d-none d-lg-block d-xl-block\">\n    {{ 'checkoutReview.review' | cxTranslate }}\n  </h2>\n\n  <div class=\"cx-review-summary row\">\n    <ng-container *ngIf=\"(steps$ | async)?.slice(0, -1) as steps\">\n      <div class=\"col-md-12 col-lg-6 col-xl-6 cx-review-payment-col\">\n        <ng-container *ngFor=\"let step of paymentSteps(steps)\">\n          <ng-container [ngSwitch]=\"step.type[0]\">\n            <ng-container *ngSwitchCase=\"checkoutStepTypePaymentDetails\">\n              <ng-container *ngTemplateOutlet=\"paymentMethod\"></ng-container>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n      <div class=\"col-md-12 col-lg-6 col-xl-6 cx-review-shipping-col\">\n        <ng-container *ngFor=\"let step of deliverySteps(steps)\">\n          <ng-container [ngSwitch]=\"step.type[0]\">\n            <ng-container *ngSwitchCase=\"checkoutStepTypeDeliveryAddress\">\n              <ng-container *ngTemplateOutlet=\"deliveryAddress\"></ng-container>\n            </ng-container>\n            <ng-container *ngSwitchCase=\"checkoutStepTypeDeliveryMode\">\n              <ng-container *ngTemplateOutlet=\"deliveryMode\"></ng-container>\n            </ng-container>\n          </ng-container>\n        </ng-container>\n      </div>\n    </ng-container>\n  </div>\n\n  <!-- DELIVERY ADDRESS SECTION -->\n  <ng-template #deliveryAddress>\n    <div\n      *ngIf=\"deliveryAddress$ | async as deliveryAddress\"\n      class=\"cx-review-summary-card cx-review-card-address\"\n    >\n      <cx-card\n        [content]=\"getDeliveryAddressCard(deliveryAddress) | async\"\n      ></cx-card>\n      <div class=\"cx-review-summary-edit-step\">\n        <a\n          [attr.aria-label]=\"\n            'checkoutReview.editDeliveryAddressDetails' | cxTranslate\n          \"\n          [routerLink]=\"\n            {\n              cxRoute: getCheckoutStepUrl(checkoutStepTypeDeliveryAddress)\n            } | cxUrl\n          \"\n          ><cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon\n        ></a>\n      </div>\n    </div>\n  </ng-template>\n\n  <!-- DELIVERY MODE SECTION -->\n  <ng-template #deliveryMode>\n    <div class=\"cx-review-summary-card cx-review-card-shipping\">\n      <cx-card\n        *ngIf=\"deliveryMode$ | async as deliveryMode\"\n        [content]=\"getDeliveryModeCard(deliveryMode) | async\"\n      ></cx-card>\n      <div class=\"cx-review-summary-edit-step\">\n        <a\n          [attr.aria-label]=\"'checkoutReview.editDeliveryMode' | cxTranslate\"\n          [routerLink]=\"\n            { cxRoute: getCheckoutStepUrl(checkoutStepTypeDeliveryMode) }\n              | cxUrl\n          \"\n        >\n          <cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon>\n        </a>\n      </div>\n    </div>\n  </ng-template>\n\n  <!-- PAYMENT METHOD SECTION -->\n  <ng-template #paymentMethod>\n    <div class=\"cx-review-summary-card cx-review-card-payment\">\n      <div>\n        <cx-card\n          *ngIf=\"paymentDetails$ | async as paymentDetails\"\n          [content]=\"getPaymentMethodCard(paymentDetails) | async\"\n        ></cx-card>\n      </div>\n      <div class=\"cx-review-summary-edit-step\">\n        <a\n          [attr.aria-label]=\"'checkoutReview.editPaymentDetails' | cxTranslate\"\n          [routerLink]=\"\n            { cxRoute: getCheckoutStepUrl(checkoutStepTypePaymentDetails) }\n              | cxUrl\n          \"\n        >\n          <cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon>\n        </a>\n      </div>\n    </div>\n  </ng-template>\n\n  <!-- CART ITEM SECTION -->\n  <ng-container *ngIf=\"cart$ | async as cart\">\n    <div class=\"cx-review-cart-total d-none d-lg-block d-xl-block\">\n      {{\n        'cartItems.cartTotal'\n          | cxTranslate: { count: cart.deliveryItemsQuantity }\n      }}:\n      {{ cart.totalPrice?.formattedValue }}\n    </div>\n    <div class=\"cx-review-cart-heading d-block d-lg-none d-xl-none\">\n      {{ 'checkoutReview.placeOrder' | cxTranslate }}\n    </div>\n    <div class=\"cx-review-cart-item\" *ngIf=\"entries$ | async as entries\">\n      <cx-promotions\n        [promotions]=\"\n          (cart.appliedOrderPromotions || []).concat(\n            cart.potentialOrderPromotions || []\n          )\n        \"\n      ></cx-promotions>\n\n      <ng-template\n        [cxOutlet]=\"cartOutlets.CART_ITEM_LIST\"\n        [cxOutletContext]=\"{\n          items: entries,\n          readonly: true,\n          promotionLocation: promotionLocation\n        }\"\n      >\n      </ng-template>\n    </div>\n  </ng-container>\n</div>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService
    }, {
      type: CheckoutStepService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewSubmitModule {}
CheckoutReviewSubmitModule.ɵfac = function CheckoutReviewSubmitModule_Factory(t) {
  return new (t || CheckoutReviewSubmitModule)();
};
CheckoutReviewSubmitModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutReviewSubmitModule
});
CheckoutReviewSubmitModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutReviewOrder: {
        component: CheckoutReviewSubmitComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PromotionsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewSubmitModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PromotionsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutReviewOrder: {
            component: CheckoutReviewSubmitComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })],
      declarations: [CheckoutReviewSubmitComponent],
      exports: [CheckoutReviewSubmitComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewOverviewComponent {
  constructor(activeCartFacade) {
    this.activeCartFacade = activeCartFacade;
  }
  get cart$() {
    return this.activeCartFacade.getActive();
  }
}
CheckoutReviewOverviewComponent.ɵfac = function CheckoutReviewOverviewComponent_Factory(t) {
  return new (t || CheckoutReviewOverviewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade));
};
CheckoutReviewOverviewComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutReviewOverviewComponent,
  selectors: [["cx-checkout-review-overview"]],
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], [1, "cx-review-cart-total", "d-none", "d-lg-block", "d-xl-block"], [3, "promotions"]],
  template: function CheckoutReviewOverviewComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutReviewOverviewComponent_ng_container_0_Template, 5, 10, "ng-container", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.cart$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PromotionsComponent, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewOverviewComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-review-overview',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container *ngIf=\"cart$ | async as cart\">\n  <div class=\"cx-review-cart-total d-none d-lg-block d-xl-block\">\n    {{ 'cartItems.cartTotal' | cxTranslate: { count: cart.totalUnitCount } }}:\n    {{ cart.totalPrice?.formattedValue }}\n  </div>\n  <cx-promotions\n    [promotions]=\"\n      (cart.appliedOrderPromotions || []).concat(\n        cart.potentialOrderPromotions || []\n      )\n    \"\n  ></cx-promotions>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewOverviewModule {}
CheckoutReviewOverviewModule.ɵfac = function CheckoutReviewOverviewModule_Factory(t) {
  return new (t || CheckoutReviewOverviewModule)();
};
CheckoutReviewOverviewModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutReviewOverviewModule
});
CheckoutReviewOverviewModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutReviewOverview: {
        component: CheckoutReviewOverviewComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PromotionsModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewOverviewModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      declarations: [CheckoutReviewOverviewComponent],
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.PromotionsModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutReviewOverview: {
            component: CheckoutReviewOverviewComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewPaymentComponent {
  constructor(checkoutStepService, checkoutPaymentFacade, translationService) {
    this.checkoutStepService = checkoutStepService;
    this.checkoutPaymentFacade = checkoutPaymentFacade;
    this.translationService = translationService;
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.ICON_TYPE;
    this.paymentDetailsStepRoute = this.checkoutStepService.getCheckoutStepRoute("paymentDetails" /* CheckoutStepType.PAYMENT_DETAILS */);
    this.paymentDetails$ = this.checkoutPaymentFacade.getPaymentDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading && !state.error), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
  }
  getPaymentMethodCard(paymentDetails) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('paymentForm.payment'), this.translationService.translate('paymentCard.expires', {
      month: paymentDetails.expiryMonth,
      year: paymentDetails.expiryYear
    })]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textTitle, textExpires]) => (0,_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.paymentMethodCard)(textTitle, textExpires, paymentDetails)));
  }
  getBillingAddressCard(paymentDetails) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('paymentForm.billingAddress'), this.translationService.translate('addressCard.billTo')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([billingAddress, billTo]) => (0,_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.billingAddressCard)(billingAddress, billTo, paymentDetails)));
  }
}
CheckoutReviewPaymentComponent.ɵfac = function CheckoutReviewPaymentComponent_Factory(t) {
  return new (t || CheckoutReviewPaymentComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService));
};
CheckoutReviewPaymentComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutReviewPaymentComponent,
  selectors: [["cx-checkout-review-payment"]],
  decls: 2,
  vars: 3,
  consts: [["class", "cx-review-summary", 4, "ngIf"], [1, "cx-review-summary"], [1, "cx-review-summary-card", "cx-review-summary-payment-card"], [3, "content"], [1, "cx-review-summary-edit-step"], [3, "routerLink"], ["aria-hidden", "true", 3, "type"]],
  template: function CheckoutReviewPaymentComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutReviewPaymentComponent_div_0_Template, 19, 24, "div", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.paymentDetails$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardComponent, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewPaymentComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-review-payment',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<div\n  class=\"cx-review-summary\"\n  *ngIf=\"paymentDetails$ | async as paymentDetails\"\n>\n  <div class=\"cx-review-summary-card cx-review-summary-payment-card\">\n    <div>\n      <cx-card\n        [content]=\"getBillingAddressCard(paymentDetails) | async\"\n      ></cx-card>\n    </div>\n    <div class=\"cx-review-summary-edit-step\">\n      <a\n        [attr.aria-label]=\"'checkoutReview.editPaymentDetails' | cxTranslate\"\n        [routerLink]=\"{ cxRoute: paymentDetailsStepRoute } | cxUrl\"\n      >\n        <cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon>\n      </a>\n    </div>\n  </div>\n\n  <div class=\"cx-review-summary-card cx-review-summary-payment-card\">\n    <div>\n      <cx-card\n        [content]=\"getPaymentMethodCard(paymentDetails) | async\"\n      ></cx-card>\n    </div>\n    <div class=\"cx-review-summary-edit-step\">\n      <a\n        [attr.aria-label]=\"'checkoutReview.editPaymentDetails' | cxTranslate\"\n        [routerLink]=\"{ cxRoute: paymentDetailsStepRoute } | cxUrl\"\n      >\n        <cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon>\n      </a>\n    </div>\n  </div>\n</div>\n"
    }]
  }], function () {
    return [{
      type: CheckoutStepService
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutPaymentFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewPaymentModule {}
CheckoutReviewPaymentModule.ɵfac = function CheckoutReviewPaymentModule_Factory(t) {
  return new (t || CheckoutReviewPaymentModule)();
};
CheckoutReviewPaymentModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutReviewPaymentModule
});
CheckoutReviewPaymentModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutReviewPayment: {
        component: CheckoutReviewPaymentComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewPaymentModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      declarations: [CheckoutReviewPaymentComponent],
      exports: [CheckoutReviewPaymentComponent],
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutReviewPayment: {
            component: CheckoutReviewPaymentComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewShippingComponent {
  constructor(activeCartFacade, checkoutDeliveryModesFacade, checkoutDeliveryAddressFacade, translationService, checkoutStepService) {
    this.activeCartFacade = activeCartFacade;
    this.checkoutDeliveryModesFacade = checkoutDeliveryModesFacade;
    this.checkoutDeliveryAddressFacade = checkoutDeliveryAddressFacade;
    this.translationService = translationService;
    this.checkoutStepService = checkoutStepService;
    this.cartOutlets = _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.CartOutlets;
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.ICON_TYPE;
    this.deliveryAddressStepRoute = this.checkoutStepService.getCheckoutStepRoute("deliveryAddress" /* CheckoutStepType.DELIVERY_ADDRESS */);
    this.deliveryModeStepRoute = this.checkoutStepService.getCheckoutStepRoute("deliveryMode" /* CheckoutStepType.DELIVERY_MODE */);
    this.entries$ = this.activeCartFacade.getDeliveryEntries();
    this.deliveryAddress$ = this.checkoutDeliveryAddressFacade.getDeliveryAddressState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading && !state.error), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
    this.deliveryMode$ = this.checkoutDeliveryModesFacade.getSelectedDeliveryModeState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(state => !state.loading && !state.error), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(state => state.data));
  }
  getDeliveryAddressCard(deliveryAddress, countryName) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('addressCard.shipTo'), this.translationService.translate('addressCard.phoneNumber'), this.translationService.translate('addressCard.mobileNumber')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textTitle, textPhone, textMobile]) => (0,_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.deliveryAddressCard)(textTitle, textPhone, textMobile, deliveryAddress, countryName)));
  }
  getDeliveryModeCard(deliveryMode) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.translationService.translate('checkoutMode.deliveryMethod')]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.map)(([textTitle]) => (0,_spartacus_order_root__WEBPACK_IMPORTED_MODULE_24__.deliveryModeCard)(textTitle, deliveryMode)));
  }
}
CheckoutReviewShippingComponent.ɵfac = function CheckoutReviewShippingComponent_Factory(t) {
  return new (t || CheckoutReviewShippingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](CheckoutStepService));
};
CheckoutReviewShippingComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CheckoutReviewShippingComponent,
  selectors: [["cx-checkout-review-shipping"]],
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], [1, "cx-review-header"], [1, "cx-review-summary", "cx-review-shipping-summary"], [1, "cx-review-summary-card-container"], ["class", "cx-review-summary-card cx-review-card-address", 4, "ngIf"], [1, "cx-review-summary-card", "cx-review-card-address"], [3, "content", 4, "ngIf"], [1, "cx-review-summary-edit-step"], [3, "routerLink"], ["aria-hidden", "true", 3, "type"], [1, "cx-review-cart-item"], [3, "cxOutlet", "cxOutletContext"], [3, "content"]],
  template: function CheckoutReviewShippingComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CheckoutReviewShippingComponent_ng_container_0_Template, 2, 1, "ng-container", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.entries$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardComponent, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletDirective, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslatePipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewShippingComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-checkout-review-shipping',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container *ngIf=\"entries$ | async as entries\">\n  <ng-container *ngIf=\"entries.length > 0\">\n    <h2 class=\"cx-review-header\">\n      {{ 'checkoutMode.deliveryEntries' | cxTranslate }}\n    </h2>\n\n    <div class=\"cx-review-summary cx-review-shipping-summary\">\n      <!-- DELIVERY ADDRESS SECTION -->\n      <div class=\"cx-review-summary-card-container\">\n        <div\n          *ngIf=\"deliveryAddress$ | async as deliveryAddress\"\n          class=\"cx-review-summary-card cx-review-card-address\"\n        >\n          <cx-card\n            [content]=\"getDeliveryAddressCard(deliveryAddress) | async\"\n          ></cx-card>\n          <div class=\"cx-review-summary-edit-step\">\n            <a\n              [attr.aria-label]=\"\n                'checkoutReview.editDeliveryAddressDetails' | cxTranslate\n              \"\n              [routerLink]=\"\n                {\n                  cxRoute: deliveryAddressStepRoute\n                } | cxUrl\n              \"\n              ><cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon\n            ></a>\n          </div>\n        </div>\n      </div>\n\n      <!-- DELIVERY MODE SECTION -->\n      <div class=\"cx-review-summary-card-container\">\n        <div class=\"cx-review-summary-card cx-review-card-address\">\n          <cx-card\n            *ngIf=\"deliveryMode$ | async as deliveryMode\"\n            [content]=\"getDeliveryModeCard(deliveryMode) | async\"\n          ></cx-card>\n          <div class=\"cx-review-summary-edit-step\">\n            <a\n              [attr.aria-label]=\"\n                'checkoutReview.editDeliveryMode' | cxTranslate\n              \"\n              [routerLink]=\"{ cxRoute: deliveryModeStepRoute } | cxUrl\"\n            >\n              <cx-icon aria-hidden=\"true\" [type]=\"iconTypes.PENCIL\"></cx-icon>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- CART ITEM SECTION -->\n    <div class=\"cx-review-cart-item\">\n      <ng-template\n        [cxOutlet]=\"cartOutlets.CART_ITEM_LIST\"\n        [cxOutletContext]=\"{\n          items: entries,\n          readonly: true\n        }\"\n      >\n      </ng-template>\n    </div>\n  </ng-container>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_2__.ActiveCartFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryModesFacade
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_5__.CheckoutDeliveryAddressFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.TranslationService
    }, {
      type: CheckoutStepService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutReviewShippingModule {}
CheckoutReviewShippingModule.ɵfac = function CheckoutReviewShippingModule_Factory(t) {
  return new (t || CheckoutReviewShippingModule)();
};
CheckoutReviewShippingModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutReviewShippingModule
});
CheckoutReviewShippingModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
    cmsComponents: {
      CheckoutReviewShipping: {
        component: CheckoutReviewShippingComponent,
        guards: [CheckoutAuthGuard, CartNotEmptyGuard]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutReviewShippingModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      declarations: [CheckoutReviewShippingComponent],
      exports: [CheckoutReviewShippingComponent],
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.CommonModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.CardModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_3__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_4__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_16__.OutletModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_3__.provideDefaultConfig)({
        cmsComponents: {
          CheckoutReviewShipping: {
            component: CheckoutReviewShippingComponent,
            guards: [CheckoutAuthGuard, CartNotEmptyGuard]
          }
        }
      })]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutComponentsModule {}
CheckoutComponentsModule.ɵfac = function CheckoutComponentsModule_Factory(t) {
  return new (t || CheckoutComponentsModule)();
};
CheckoutComponentsModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutComponentsModule
});
CheckoutComponentsModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [CheckoutOrchestratorModule, CheckoutOrderSummaryModule, CheckoutProgressModule, CheckoutProgressMobileTopModule, CheckoutProgressMobileBottomModule, CheckoutDeliveryModeModule, CheckoutPaymentMethodModule, CheckoutPlaceOrderModule, CheckoutReviewSubmitModule, CheckoutReviewPaymentModule, CheckoutReviewShippingModule, CheckoutReviewOverviewModule, CheckoutDeliveryAddressModule, CheckoutLoginModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutComponentsModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [CheckoutOrchestratorModule, CheckoutOrderSummaryModule, CheckoutProgressModule, CheckoutProgressMobileTopModule, CheckoutProgressMobileBottomModule, CheckoutDeliveryModeModule, CheckoutPaymentMethodModule, CheckoutPlaceOrderModule, CheckoutReviewSubmitModule, CheckoutReviewPaymentModule, CheckoutReviewShippingModule, CheckoutReviewOverviewModule, CheckoutDeliveryAddressModule, CheckoutLoginModule]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 3485:
/*!************************************************************************************!*\
  !*** ./node_modules/@spartacus/checkout/fesm2020/spartacus-checkout-base-core.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CHECKOUT_NORMALIZER": () => (/* binding */ CHECKOUT_NORMALIZER),
/* harmony export */   "CheckoutAdapter": () => (/* binding */ CheckoutAdapter),
/* harmony export */   "CheckoutConnector": () => (/* binding */ CheckoutConnector),
/* harmony export */   "CheckoutCoreModule": () => (/* binding */ CheckoutCoreModule),
/* harmony export */   "CheckoutDeliveryAddressAdapter": () => (/* binding */ CheckoutDeliveryAddressAdapter),
/* harmony export */   "CheckoutDeliveryAddressConnector": () => (/* binding */ CheckoutDeliveryAddressConnector),
/* harmony export */   "CheckoutDeliveryAddressService": () => (/* binding */ CheckoutDeliveryAddressService),
/* harmony export */   "CheckoutDeliveryModesAdapter": () => (/* binding */ CheckoutDeliveryModesAdapter),
/* harmony export */   "CheckoutDeliveryModesConnector": () => (/* binding */ CheckoutDeliveryModesConnector),
/* harmony export */   "CheckoutDeliveryModesService": () => (/* binding */ CheckoutDeliveryModesService),
/* harmony export */   "CheckoutPageMetaResolver": () => (/* binding */ CheckoutPageMetaResolver),
/* harmony export */   "CheckoutPaymentAdapter": () => (/* binding */ CheckoutPaymentAdapter),
/* harmony export */   "CheckoutPaymentConnector": () => (/* binding */ CheckoutPaymentConnector),
/* harmony export */   "CheckoutPaymentService": () => (/* binding */ CheckoutPaymentService),
/* harmony export */   "CheckoutQueryService": () => (/* binding */ CheckoutQueryService),
/* harmony export */   "DELIVERY_MODE_NORMALIZER": () => (/* binding */ DELIVERY_MODE_NORMALIZER),
/* harmony export */   "PAYMENT_CARD_TYPE_NORMALIZER": () => (/* binding */ PAYMENT_CARD_TYPE_NORMALIZER),
/* harmony export */   "PAYMENT_DETAILS_SERIALIZER": () => (/* binding */ PAYMENT_DETAILS_SERIALIZER)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @spartacus/checkout/base/root */ 7846);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 9193);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 6587);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ 9095);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 8759);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 3910);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 7418);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 9151);
/* harmony import */ var _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @spartacus/cart/base/root */ 6061);










/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryAddressAdapter {}

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryAddressConnector {
  constructor(adapter) {
    this.adapter = adapter;
  }
  createAddress(userId, cartId, address) {
    return this.adapter.createAddress(userId, cartId, address);
  }
  setAddress(userId, cartId, addressId) {
    return this.adapter.setAddress(userId, cartId, addressId);
  }
  clearCheckoutDeliveryAddress(userId, cartId) {
    return this.adapter.clearCheckoutDeliveryAddress(userId, cartId);
  }
}
CheckoutDeliveryAddressConnector.ɵfac = function CheckoutDeliveryAddressConnector_Factory(t) {
  return new (t || CheckoutDeliveryAddressConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutDeliveryAddressAdapter));
};
CheckoutDeliveryAddressConnector.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutDeliveryAddressConnector,
  factory: CheckoutDeliveryAddressConnector.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryAddressConnector, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: CheckoutDeliveryAddressAdapter
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryModesAdapter {}

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryModesConnector {
  constructor(adapter) {
    this.adapter = adapter;
  }
  setMode(userId, cartId, deliveryModeId) {
    return this.adapter.setMode(userId, cartId, deliveryModeId);
  }
  getSupportedModes(userId, cartId) {
    return this.adapter.getSupportedModes(userId, cartId);
  }
  clearCheckoutDeliveryMode(userId, cartId) {
    return this.adapter.clearCheckoutDeliveryMode(userId, cartId);
  }
}
CheckoutDeliveryModesConnector.ɵfac = function CheckoutDeliveryModesConnector_Factory(t) {
  return new (t || CheckoutDeliveryModesConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutDeliveryModesAdapter));
};
CheckoutDeliveryModesConnector.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutDeliveryModesConnector,
  factory: CheckoutDeliveryModesConnector.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryModesConnector, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: CheckoutDeliveryModesAdapter
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentAdapter {}

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentConnector {
  constructor(adapter) {
    this.adapter = adapter;
  }
  createPaymentDetails(userId, cartId, paymentDetails) {
    return this.adapter.createPaymentDetails(userId, cartId, paymentDetails);
  }
  setPaymentDetails(userId, cartId, paymentDetailsId) {
    return this.adapter.setPaymentDetails(userId, cartId, paymentDetailsId);
  }
  getPaymentCardTypes() {
    return this.adapter.getPaymentCardTypes();
  }
}
CheckoutPaymentConnector.ɵfac = function CheckoutPaymentConnector_Factory(t) {
  return new (t || CheckoutPaymentConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutPaymentAdapter));
};
CheckoutPaymentConnector.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutPaymentConnector,
  factory: CheckoutPaymentConnector.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPaymentConnector, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: CheckoutPaymentAdapter
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutAdapter {}

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutConnector {
  constructor(adapter) {
    this.adapter = adapter;
  }
  getCheckoutDetails(userId, cartId) {
    return this.adapter.getCheckoutDetails(userId, cartId);
  }
}
CheckoutConnector.ɵfac = function CheckoutConnector_Factory(t) {
  return new (t || CheckoutConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutAdapter));
};
CheckoutConnector.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutConnector,
  factory: CheckoutConnector.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutConnector, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: CheckoutAdapter
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryAddressService {
  constructor(activeCartFacade, userIdService, eventService, commandService, checkoutDeliveryAddressConnector, checkoutQueryFacade) {
    this.activeCartFacade = activeCartFacade;
    this.userIdService = userIdService;
    this.eventService = eventService;
    this.commandService = commandService;
    this.checkoutDeliveryAddressConnector = checkoutDeliveryAddressConnector;
    this.checkoutQueryFacade = checkoutQueryFacade;
    this.createDeliveryAddressCommand = this.commandService.create(payload => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => {
      return this.checkoutDeliveryAddressConnector.createAddress(userId, cartId, payload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(address => {
        address.titleCode = payload.titleCode;
        if (payload.region?.isocodeShort) {
          address.region = {
            ...address.region,
            isocodeShort: payload.region.isocodeShort
          };
        }
        return address;
      }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(address => this.eventService.dispatch({
        userId,
        cartId,
        address
      }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryAddressCreatedEvent)));
    })), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
    this.setDeliveryAddressCommand = this.commandService.create(address => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => {
      const addressId = address.id;
      if (!addressId) {
        throw new Error('Checkout conditions not met');
      }
      return this.checkoutDeliveryAddressConnector.setAddress(userId, cartId, addressId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(() => {
        this.eventService.dispatch({
          userId,
          cartId,
          address
        }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryAddressSetEvent);
      }));
    })), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
    this.clearDeliveryAddressCommand = this.commandService.create(() => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => this.checkoutDeliveryAddressConnector.clearCheckoutDeliveryAddress(userId, cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(() => {
      this.eventService.dispatch({
        userId,
        cartId
      }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryAddressClearedEvent);
    })))), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
  }
  /**
   * Performs the necessary checkout preconditions.
   */
  checkoutPreconditions() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.userIdService.takeUserId(), this.activeCartFacade.takeActiveCartId(), this.activeCartFacade.isGuestCart()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(([userId, cartId, isGuestCart]) => {
      if (!userId || !cartId || userId === _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.OCC_USER_ID_ANONYMOUS && !isGuestCart) {
        throw new Error('Checkout conditions not met');
      }
      return [userId, cartId];
    }));
  }
  getDeliveryAddressState() {
    return this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(state => ({
      ...state,
      data: state.data?.deliveryAddress
    })));
  }
  createAndSetAddress(address) {
    return this.createDeliveryAddressCommand.execute(address);
  }
  setDeliveryAddress(address) {
    return this.setDeliveryAddressCommand.execute(address);
  }
  clearCheckoutDeliveryAddress() {
    return this.clearDeliveryAddressCommand.execute();
  }
}
CheckoutDeliveryAddressService.ɵfac = function CheckoutDeliveryAddressService_Factory(t) {
  return new (t || CheckoutDeliveryAddressService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.EventService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutDeliveryAddressConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade));
};
CheckoutDeliveryAddressService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutDeliveryAddressService,
  factory: CheckoutDeliveryAddressService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryAddressService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.EventService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandService
    }, {
      type: CheckoutDeliveryAddressConnector
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutDeliveryModesService {
  /**
   * Returns the reload events for the supportedDeliveryModes query
   */
  getCheckoutSupportedDeliveryModesQueryReloadEvents() {
    return [_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutSupportedDeliveryModesQueryReloadEvent];
  }
  /**
   * Return the reset events for the supportedDeliveryModes query
   */
  getCheckoutSupportedDeliveryModesQueryResetEvents() {
    return [_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutSupportedDeliveryModesQueryResetEvent];
  }
  constructor(activeCartFacade, userIdService, eventService, queryService, commandService, checkoutDeliveryModesConnector, checkoutQueryFacade) {
    this.activeCartFacade = activeCartFacade;
    this.userIdService = userIdService;
    this.eventService = eventService;
    this.queryService = queryService;
    this.commandService = commandService;
    this.checkoutDeliveryModesConnector = checkoutDeliveryModesConnector;
    this.checkoutQueryFacade = checkoutQueryFacade;
    this.supportedDeliveryModesQuery = this.queryService.create(() => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => this.checkoutDeliveryModesConnector.getSupportedModes(userId, cartId))), {
      reloadOn: this.getCheckoutSupportedDeliveryModesQueryReloadEvents(),
      resetOn: this.getCheckoutSupportedDeliveryModesQueryResetEvents()
    });
    this.setDeliveryModeCommand = this.commandService.create(deliveryModeCode => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => this.checkoutDeliveryModesConnector.setMode(userId, cartId, deliveryModeCode).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(() => {
      this.eventService.dispatch({
        userId,
        cartId,
        cartCode: cartId,
        deliveryModeCode
      }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryModeSetEvent);
    })))), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
    this.clearDeliveryModeCommand = this.commandService.create(() => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => this.checkoutDeliveryModesConnector.clearCheckoutDeliveryMode(userId, cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(() => {
      this.eventService.dispatch({
        userId,
        cartId,
        /**
         * As we know the cart is not anonymous (precondition checked),
         * we can safely use the cartId, which is actually the cart.code.
         */
        cartCode: cartId
      }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryModeClearedEvent);
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.catchError)(error => {
      this.eventService.dispatch({
        userId,
        cartId,
        /**
         * As we know the cart is not anonymous (precondition checked),
         * we can safely use the cartId, which is actually the cart.code.
         */
        cartCode: cartId
      }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryModeClearedErrorEvent);
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.throwError)(error);
    })))), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
  }
  /**
   * Performs the necessary checkout preconditions.
   */
  checkoutPreconditions() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.userIdService.takeUserId(), this.activeCartFacade.takeActiveCartId(), this.activeCartFacade.isGuestCart()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(([userId, cartId, isGuestCart]) => {
      if (!userId || !cartId || userId === _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.OCC_USER_ID_ANONYMOUS && !isGuestCart) {
        throw new Error('Checkout conditions not met');
      }
      return [userId, cartId];
    }));
  }
  getSupportedDeliveryModesState() {
    return this.supportedDeliveryModesQuery.getState();
  }
  getSupportedDeliveryModes() {
    return this.getSupportedDeliveryModesState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.filter)(state => !state.loading), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(state => state.data ?? []));
  }
  getSelectedDeliveryModeState() {
    return this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(state => ({
      ...state,
      data: state.data?.deliveryMode
    })));
  }
  setDeliveryMode(mode) {
    return this.setDeliveryModeCommand.execute(mode);
  }
  clearCheckoutDeliveryMode() {
    return this.clearDeliveryModeCommand.execute();
  }
}
CheckoutDeliveryModesService.ɵfac = function CheckoutDeliveryModesService_Factory(t) {
  return new (t || CheckoutDeliveryModesService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.EventService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.QueryService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutDeliveryModesConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade));
};
CheckoutDeliveryModesService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutDeliveryModesService,
  factory: CheckoutDeliveryModesService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutDeliveryModesService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.EventService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.QueryService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandService
    }, {
      type: CheckoutDeliveryModesConnector
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutPaymentService {
  /**
   * Returns the reload events for the cardTypes query
   */
  getCheckoutPaymentCardTypesQueryReloadEvents() {
    return [_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutPaymentCardTypesQueryReloadEvent];
  }
  /**
   * Returns the reset events for the cardTypes query
   */
  getCheckoutPaymentCardTypesQueryResetEvents() {
    return [_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutPaymentCardTypesQueryResetEvent];
  }
  constructor(activeCartFacade, userIdService, queryService, commandService, eventService, checkoutPaymentConnector, checkoutQueryFacade) {
    this.activeCartFacade = activeCartFacade;
    this.userIdService = userIdService;
    this.queryService = queryService;
    this.commandService = commandService;
    this.eventService = eventService;
    this.checkoutPaymentConnector = checkoutPaymentConnector;
    this.checkoutQueryFacade = checkoutQueryFacade;
    this.paymentCardTypesQuery = this.queryService.create(() => this.checkoutPaymentConnector.getPaymentCardTypes(), {
      reloadOn: this.getCheckoutPaymentCardTypesQueryReloadEvents(),
      resetOn: this.getCheckoutPaymentCardTypesQueryResetEvents()
    });
    this.createPaymentMethodCommand = this.commandService.create(paymentDetails => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => this.checkoutPaymentConnector.createPaymentDetails(userId, cartId, paymentDetails).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(response => this.eventService.dispatch({
      userId,
      cartId,
      paymentDetails: response
    }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutPaymentDetailsCreatedEvent))))), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
    this.setPaymentMethodCommand = this.commandService.create(paymentDetails => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => {
      const paymentDetailsId = paymentDetails?.id;
      if (!paymentDetailsId) {
        throw new Error('Checkout conditions not met');
      }
      return this.checkoutPaymentConnector.setPaymentDetails(userId, cartId, paymentDetailsId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.tap)(() => this.eventService.dispatch({
        userId,
        cartId,
        paymentDetailsId
      }, _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutPaymentDetailsSetEvent)));
    })), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandStrategy.CancelPrevious
    });
  }
  /**
   * Performs the necessary checkout preconditions.
   */
  checkoutPreconditions() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.userIdService.takeUserId(), this.activeCartFacade.takeActiveCartId(), this.activeCartFacade.isGuestCart()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(([userId, cartId, isGuestCart]) => {
      if (!userId || !cartId || userId === _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.OCC_USER_ID_ANONYMOUS && !isGuestCart) {
        throw new Error('Checkout conditions not met');
      }
      return [userId, cartId];
    }));
  }
  getPaymentCardTypesState() {
    return this.paymentCardTypesQuery.getState();
  }
  getPaymentCardTypes() {
    return this.getPaymentCardTypesState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(state => state.data ?? []));
  }
  getPaymentDetailsState() {
    return this.checkoutQueryFacade.getCheckoutDetailsState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(state => ({
      ...state,
      data: state.data?.paymentInfo
    })));
  }
  createPaymentDetails(paymentDetails) {
    return this.createPaymentMethodCommand.execute(paymentDetails);
  }
  setPaymentDetails(paymentDetails) {
    return this.setPaymentMethodCommand.execute(paymentDetails);
  }
}
CheckoutPaymentService.ɵfac = function CheckoutPaymentService_Factory(t) {
  return new (t || CheckoutPaymentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.QueryService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.EventService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutPaymentConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade));
};
CheckoutPaymentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutPaymentService,
  factory: CheckoutPaymentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPaymentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.QueryService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.CommandService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.EventService
    }, {
      type: CheckoutPaymentConnector
    }, {
      type: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutQueryService {
  /**
   * Returns the reload events for the checkout query.
   */
  getCheckoutQueryReloadEvents() {
    return [_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryReloadEvent];
  }
  /**
   * Returns the reset events for the checkout query.
   */
  getCheckoutQueryResetEvents() {
    return [_spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryResetEvent];
  }
  constructor(activeCartFacade, userIdService, queryService, checkoutConnector) {
    this.activeCartFacade = activeCartFacade;
    this.userIdService = userIdService;
    this.queryService = queryService;
    this.checkoutConnector = checkoutConnector;
    this.checkoutQuery$ = this.queryService.create(() => this.checkoutPreconditions().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(([userId, cartId]) => this.checkoutConnector.getCheckoutDetails(userId, cartId))), {
      reloadOn: this.getCheckoutQueryReloadEvents(),
      resetOn: this.getCheckoutQueryResetEvents()
    });
  }
  /**
   * Performs the necessary checkout preconditions.
   */
  checkoutPreconditions() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.userIdService.takeUserId(), this.activeCartFacade.takeActiveCartId(), this.activeCartFacade.isGuestCart()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(([userId, cartId, isGuestCart]) => {
      if (!userId || !cartId || userId === _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.OCC_USER_ID_ANONYMOUS && !isGuestCart) {
        throw new Error('Checkout conditions not met');
      }
      return [userId, cartId];
    }));
  }
  getCheckoutDetailsState() {
    return this.checkoutQuery$.getState();
  }
}
CheckoutQueryService.ɵfac = function CheckoutQueryService_Factory(t) {
  return new (t || CheckoutQueryService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.QueryService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](CheckoutConnector));
};
CheckoutQueryService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutQueryService,
  factory: CheckoutQueryService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutQueryService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.UserIdService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.QueryService
    }, {
      type: CheckoutConnector
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const facadeProviders = [CheckoutDeliveryAddressService, {
  provide: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryAddressFacade,
  useExisting: CheckoutDeliveryAddressService
}, CheckoutDeliveryModesService, {
  provide: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutDeliveryModesFacade,
  useExisting: CheckoutDeliveryModesService
}, CheckoutPaymentService, {
  provide: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutPaymentFacade,
  useExisting: CheckoutPaymentService
}, CheckoutQueryService, {
  provide: _spartacus_checkout_base_root__WEBPACK_IMPORTED_MODULE_4__.CheckoutQueryFacade,
  useExisting: CheckoutQueryService
}];

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * Resolves the page data for all Content Pages based on the `PageType.CONTENT_PAGE`
 * and the `MultiStepCheckoutSummaryPageTemplate`. If the checkout page matches this template,
 * the more generic `ContentPageMetaResolver` is overridden by this resolver.
 *
 * The page title and robots are resolved in this implementation only.
 */
class CheckoutPageMetaResolver extends _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.PageMetaResolver {
  constructor(translationService, activeCartFacade, basePageMetaResolver) {
    super();
    this.translationService = translationService;
    this.activeCartFacade = activeCartFacade;
    this.basePageMetaResolver = basePageMetaResolver;
    this.pageType = _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.PageType.CONTENT_PAGE;
    this.pageTemplate = 'MultiStepCheckoutSummaryPageTemplate';
  }
  /**
   * @override
   * Resolves the page title for the Checkout Page to include checkout step.
   * The page title used by the browser (history, tabs) and crawlers.
   *
   * The title from the page data is ignored for this page title.
   */
  resolveTitle() {
    return this.basePageMetaResolver.resolveTitle();
  }
  /**
   * Resolves the page heading for the Checkout Page.
   * The page heading is used in the UI (`<h1>`), where as the page
   * title is used by the browser and crawlers.
   */
  resolveHeading() {
    return this.translationService.translate('pageMetaResolver.checkout.title');
  }
  resolveDescription() {
    return this.basePageMetaResolver.resolveDescription();
  }
  resolveRobots() {
    return this.basePageMetaResolver.resolveRobots();
  }
}
CheckoutPageMetaResolver.ɵfac = function CheckoutPageMetaResolver_Factory(t) {
  return new (t || CheckoutPageMetaResolver)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.TranslationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_5__.BasePageMetaResolver));
};
CheckoutPageMetaResolver.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: CheckoutPageMetaResolver,
  factory: CheckoutPageMetaResolver.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutPageMetaResolver, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.TranslationService
    }, {
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_8__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.BasePageMetaResolver
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutCoreModule {}
CheckoutCoreModule.ɵfac = function CheckoutCoreModule_Factory(t) {
  return new (t || CheckoutCoreModule)();
};
CheckoutCoreModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutCoreModule
});
CheckoutCoreModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [...facadeProviders, CheckoutDeliveryAddressConnector, CheckoutDeliveryModesConnector, CheckoutPaymentConnector, CheckoutConnector, CheckoutPageMetaResolver, {
    provide: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.PageMetaResolver,
    useExisting: CheckoutPageMetaResolver,
    multi: true
  }]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutCoreModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      providers: [...facadeProviders, CheckoutDeliveryAddressConnector, CheckoutDeliveryModesConnector, CheckoutPaymentConnector, CheckoutConnector, CheckoutPageMetaResolver, {
        provide: _spartacus_core__WEBPACK_IMPORTED_MODULE_5__.PageMetaResolver,
        useExisting: CheckoutPageMetaResolver,
        multi: true
      }]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const DELIVERY_MODE_NORMALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('DeliveryModeNormalizer');

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const PAYMENT_DETAILS_SERIALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('PaymentDetailsSerializer');
const PAYMENT_CARD_TYPE_NORMALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('PaymentCardTypeNormalizer');

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const CHECKOUT_NORMALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('CheckoutNormalizer');

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 3398:
/*!***********************************************************************************!*\
  !*** ./node_modules/@spartacus/checkout/fesm2020/spartacus-checkout-base-occ.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CheckoutOccModule": () => (/* binding */ CheckoutOccModule),
/* harmony export */   "OccCheckoutAdapter": () => (/* binding */ OccCheckoutAdapter),
/* harmony export */   "OccCheckoutDeliveryAddressAdapter": () => (/* binding */ OccCheckoutDeliveryAddressAdapter),
/* harmony export */   "OccCheckoutDeliveryModesAdapter": () => (/* binding */ OccCheckoutDeliveryModesAdapter),
/* harmony export */   "OccCheckoutPaymentAdapter": () => (/* binding */ OccCheckoutPaymentAdapter)
/* harmony export */ });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common/http */ 8987);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 6587);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 7418);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 522);
/* harmony import */ var _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @spartacus/checkout/base/core */ 3485);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ 4666);











/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class OccCheckoutDeliveryAddressAdapter {
  constructor(http, occEndpoints, converter) {
    this.http = http;
    this.occEndpoints = occEndpoints;
    this.converter = converter;
    this.logger = (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.LoggerService);
  }
  createAddress(userId, cartId, address) {
    address = this.converter.convert(address, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ADDRESS_SERIALIZER);
    return this.http.post(this.getCreateDeliveryAddressEndpoint(userId, cartId), address, {
      headers: new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpHeaders().set('Content-Type', 'application/json')
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }), this.converter.pipeable(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ADDRESS_NORMALIZER));
  }
  getCreateDeliveryAddressEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('createDeliveryAddress', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
  setAddress(userId, cartId, addressId) {
    return this.http.put(this.getSetDeliveryAddressEndpoint(userId, cartId, addressId), {}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getSetDeliveryAddressEndpoint(userId, cartId, addressId) {
    return this.occEndpoints.buildUrl('setDeliveryAddress', {
      urlParams: {
        userId,
        cartId
      },
      queryParams: {
        addressId
      }
    });
  }
  clearCheckoutDeliveryAddress(userId, cartId) {
    return this.http.delete(this.getRemoveDeliveryAddressEndpoint(userId, cartId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getRemoveDeliveryAddressEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('removeDeliveryAddress', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
}
OccCheckoutDeliveryAddressAdapter.ɵfac = function OccCheckoutDeliveryAddressAdapter_Factory(t) {
  return new (t || OccCheckoutDeliveryAddressAdapter)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService));
};
OccCheckoutDeliveryAddressAdapter.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: OccCheckoutDeliveryAddressAdapter,
  factory: OccCheckoutDeliveryAddressAdapter.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](OccCheckoutDeliveryAddressAdapter, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService
    }];
  }, null);
})();
class OccCheckoutDeliveryModesAdapter {
  constructor(http, occEndpoints, converter) {
    this.http = http;
    this.occEndpoints = occEndpoints;
    this.converter = converter;
    this.logger = (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.LoggerService);
  }
  setMode(userId, cartId, deliveryModeId) {
    return this.http.put(this.getSetDeliveryModeEndpoint(userId, cartId, deliveryModeId), {}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getSetDeliveryModeEndpoint(userId, cartId, deliveryModeId) {
    return this.occEndpoints.buildUrl('setDeliveryMode', {
      urlParams: {
        userId,
        cartId
      },
      queryParams: {
        deliveryModeId
      }
    });
  }
  getSupportedModes(userId, cartId) {
    return this.http.get(this.getDeliveryModesEndpoint(userId, cartId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(listResponse => listResponse.deliveryModes), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(modes => modes ?? []), this.converter.pipeableMany(_spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.DELIVERY_MODE_NORMALIZER));
  }
  getDeliveryModesEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('deliveryModes', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
  clearCheckoutDeliveryMode(userId, cartId) {
    return this.http.delete(this.getClearDeliveryModeEndpoint(userId, cartId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getClearDeliveryModeEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('clearDeliveryMode', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
}
OccCheckoutDeliveryModesAdapter.ɵfac = function OccCheckoutDeliveryModesAdapter_Factory(t) {
  return new (t || OccCheckoutDeliveryModesAdapter)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService));
};
OccCheckoutDeliveryModesAdapter.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: OccCheckoutDeliveryModesAdapter,
  factory: OccCheckoutDeliveryModesAdapter.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](OccCheckoutDeliveryModesAdapter, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class OccCheckoutPaymentAdapter {
  constructor(http, occEndpoints, converter) {
    this.http = http;
    this.occEndpoints = occEndpoints;
    this.converter = converter;
    this.logger = (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.LoggerService);
    if (typeof DOMParser !== 'undefined') {
      this.domparser = new DOMParser();
    }
  }
  createPaymentDetails(userId, cartId, paymentDetails) {
    paymentDetails = this.converter.convert(paymentDetails, _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.PAYMENT_DETAILS_SERIALIZER);
    return this.getProviderSubInfo(userId, cartId).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(data => {
      const labelsMap = this.convertToMap(data.mappingLabels.entry);
      return {
        url: data.postUrl,
        parameters: this.getParamsForPaymentProvider(paymentDetails, data.parameters.entry, labelsMap),
        mappingLabels: labelsMap
      };
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.mergeMap)(sub =>
    // create a subscription directly with payment provider
    this.createSubWithProvider(sub.url, sub.parameters).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(response => this.extractPaymentDetailsFromHtml(response)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.mergeMap)(fromPaymentProvider => {
      fromPaymentProvider['defaultPayment'] = paymentDetails.defaultPayment ?? false;
      fromPaymentProvider['savePaymentInfo'] = true;
      return this.createDetailsWithParameters(userId, cartId, fromPaymentProvider).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
        shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
      }), this.converter.pipeable(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.PAYMENT_DETAILS_NORMALIZER));
    }))));
  }
  setPaymentDetails(userId, cartId, paymentDetailsId) {
    return this.http.put(this.getSetPaymentDetailsEndpoint(userId, cartId, paymentDetailsId), {}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getSetPaymentDetailsEndpoint(userId, cartId, paymentDetailsId) {
    return this.occEndpoints.buildUrl('setCartPaymentDetails', {
      urlParams: {
        userId,
        cartId
      },
      queryParams: {
        paymentDetailsId
      }
    });
  }
  getPaymentCardTypes() {
    return this.http.get(this.getPaymentCardTypesEndpoint()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(cardTypeList => cardTypeList.cardTypes ?? []), this.converter.pipeableMany(_spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.PAYMENT_CARD_TYPE_NORMALIZER));
  }
  getPaymentCardTypesEndpoint() {
    return this.occEndpoints.buildUrl('cardTypes');
  }
  getProviderSubInfo(userId, cartId) {
    return this.http.get(this.getPaymentProviderSubInfoEndpoint(userId, cartId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getPaymentProviderSubInfoEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('paymentProviderSubInfo', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
  createSubWithProvider(postUrl, parameters) {
    const headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpHeaders({
      'Content-Type': 'application/x-www-form-urlencoded',
      Accept: 'text/html'
    });
    let httpParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpParams({
      encoder: new _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.HttpParamsURIEncoder()
    });
    Object.keys(parameters).forEach(key => {
      httpParams = httpParams.append(key, parameters[key]);
    });
    return this.http.post(postUrl, httpParams, {
      headers,
      responseType: 'text'
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  createDetailsWithParameters(userId, cartId, parameters) {
    let httpParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpParams({
      encoder: new _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.HttpParamsURIEncoder()
    });
    Object.keys(parameters).forEach(key => {
      httpParams = httpParams.append(key, parameters[key]);
    });
    const headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpHeaders({
      'Content-Type': 'application/x-www-form-urlencoded'
    });
    return this.http.post(this.getCreatePaymentDetailsEndpoint(userId, cartId), httpParams, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }));
  }
  getCreatePaymentDetailsEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('createPaymentDetails', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
  getParamsForPaymentProvider(paymentDetails, parameters, mappingLabels) {
    const params = this.convertToMap(parameters);
    params[mappingLabels['hybris_account_holder_name']] = paymentDetails.accountHolderName;
    params[mappingLabels['hybris_card_type']] = paymentDetails.cardType?.code;
    params[mappingLabels['hybris_card_number']] = paymentDetails.cardNumber;
    if (mappingLabels['hybris_combined_expiry_date'] === 'true') {
      params[mappingLabels['hybris_card_expiry_date']] = paymentDetails.expiryMonth + mappingLabels['hybris_separator_expiry_date'] + paymentDetails.expiryYear;
    } else {
      params[mappingLabels['hybris_card_expiration_month']] = paymentDetails.expiryMonth;
      params[mappingLabels['hybris_card_expiration_year']] = paymentDetails.expiryYear;
    }
    params[mappingLabels['hybris_card_cvn']] = paymentDetails.cvn;
    // billing address
    params[mappingLabels['hybris_billTo_country']] = paymentDetails.billingAddress?.country?.isocode;
    params[mappingLabels['hybris_billTo_firstname']] = paymentDetails.billingAddress?.firstName;
    params[mappingLabels['hybris_billTo_lastname']] = paymentDetails.billingAddress?.lastName;
    params[mappingLabels['hybris_billTo_street1']] = paymentDetails.billingAddress?.line1 + ' ' + paymentDetails.billingAddress?.line2;
    params[mappingLabels['hybris_billTo_city']] = paymentDetails.billingAddress?.town;
    if (paymentDetails.billingAddress?.region) {
      params[mappingLabels['hybris_billTo_region']] = paymentDetails.billingAddress.region.isocodeShort;
    } else {
      params[mappingLabels['hybris_billTo_region']] = '';
    }
    params[mappingLabels['hybris_billTo_postalcode']] = paymentDetails.billingAddress?.postalCode;
    return params;
  }
  extractPaymentDetailsFromHtml(html) {
    const domdoc = this.domparser.parseFromString(html, 'text/xml');
    const responseForm = domdoc.getElementsByTagName('form')[0];
    const inputs = responseForm.getElementsByTagName('input');
    const values = {};
    for (let i = 0; inputs[i]; i++) {
      const input = inputs[i];
      const name = input.getAttribute('name');
      const value = input.getAttribute('value');
      if (name && name !== '{}' && value && value !== '') {
        values[name] = value;
      }
    }
    return values;
  }
  convertToMap(paramList) {
    return paramList.reduce(function (result, item) {
      const key = item.key;
      result[key] = item.value;
      return result;
    }, {});
  }
}
OccCheckoutPaymentAdapter.ɵfac = function OccCheckoutPaymentAdapter_Factory(t) {
  return new (t || OccCheckoutPaymentAdapter)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService));
};
OccCheckoutPaymentAdapter.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: OccCheckoutPaymentAdapter,
  factory: OccCheckoutPaymentAdapter.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](OccCheckoutPaymentAdapter, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService
    }];
  }, null);
})();
class OccCheckoutAdapter {
  constructor(http, occEndpoints, converter) {
    this.http = http;
    this.occEndpoints = occEndpoints;
    this.converter = converter;
    this.logger = (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.LoggerService);
  }
  getCheckoutDetails(userId, cartId) {
    return this.http.get(this.getGetCheckoutDetailsEndpoint(userId, cartId)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.backOff)({
      shouldRetry: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isJaloError
    }), this.converter.pipeable(_spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CHECKOUT_NORMALIZER));
  }
  getGetCheckoutDetailsEndpoint(userId, cartId) {
    return this.occEndpoints.buildUrl('getCheckoutDetails', {
      urlParams: {
        userId,
        cartId
      }
    });
  }
}
OccCheckoutAdapter.ɵfac = function OccCheckoutAdapter_Factory(t) {
  return new (t || OccCheckoutAdapter)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService));
};
OccCheckoutAdapter.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: OccCheckoutAdapter,
  factory: OccCheckoutAdapter.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](OccCheckoutAdapter, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _angular_common_http__WEBPACK_IMPORTED_MODULE_2__.HttpClient
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const DELIVERY_ENDPOINT = 'users/${userId}/carts/${cartId}/addresses/delivery';
const DELIVERY_MODE_ENDPOINT = 'users/${userId}/carts/${cartId}/deliverymode';
const defaultOccCheckoutConfig = {
  backend: {
    occ: {
      endpoints: {
        setDeliveryAddress: DELIVERY_ENDPOINT,
        cardTypes: 'cardtypes',
        createDeliveryAddress: DELIVERY_ENDPOINT,
        removeDeliveryAddress: DELIVERY_ENDPOINT,
        deliveryMode: DELIVERY_MODE_ENDPOINT,
        setDeliveryMode: DELIVERY_MODE_ENDPOINT,
        clearDeliveryMode: DELIVERY_MODE_ENDPOINT,
        deliveryModes: `${DELIVERY_MODE_ENDPOINT}s`,
        setCartPaymentDetails: 'users/${userId}/carts/${cartId}/paymentdetails',
        paymentProviderSubInfo: 'users/${userId}/carts/${cartId}/payment/sop/request?responseUrl=sampleUrl',
        createPaymentDetails: 'users/${userId}/carts/${cartId}/payment/sop/response',
        getCheckoutDetails: 'users/${userId}/carts/${cartId}?fields=deliveryAddress(FULL),deliveryMode(FULL),paymentInfo(FULL)'
      }
    }
  }
};

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutOccModule {}
CheckoutOccModule.ɵfac = function CheckoutOccModule_Factory(t) {
  return new (t || CheckoutOccModule)();
};
CheckoutOccModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutOccModule
});
CheckoutOccModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)(defaultOccCheckoutConfig), {
    provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutAdapter,
    useClass: OccCheckoutAdapter
  }, {
    provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutDeliveryAddressAdapter,
    useClass: OccCheckoutDeliveryAddressAdapter
  }, {
    provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutDeliveryModesAdapter,
    useClass: OccCheckoutDeliveryModesAdapter
  }, {
    provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutPaymentAdapter,
    useClass: OccCheckoutPaymentAdapter
  }],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_8__.CommonModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutOccModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_8__.CommonModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)(defaultOccCheckoutConfig), {
        provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutAdapter,
        useClass: OccCheckoutAdapter
      }, {
        provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutDeliveryAddressAdapter,
        useClass: OccCheckoutDeliveryAddressAdapter
      }, {
        provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutDeliveryModesAdapter,
        useClass: OccCheckoutDeliveryModesAdapter
      }, {
        provide: _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_6__.CheckoutPaymentAdapter,
        useClass: OccCheckoutPaymentAdapter
      }]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 9134:
/*!*******************************************************************************!*\
  !*** ./node_modules/@spartacus/checkout/fesm2020/spartacus-checkout-base.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CheckoutModule": () => (/* binding */ CheckoutModule)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_checkout_base_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/checkout/base/components */ 2801);
/* harmony import */ var _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @spartacus/checkout/base/core */ 3485);
/* harmony import */ var _spartacus_checkout_base_occ__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @spartacus/checkout/base/occ */ 3398);






/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CheckoutModule {}
CheckoutModule.ɵfac = function CheckoutModule_Factory(t) {
  return new (t || CheckoutModule)();
};
CheckoutModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CheckoutModule
});
CheckoutModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_spartacus_checkout_base_components__WEBPACK_IMPORTED_MODULE_1__.CheckoutComponentsModule, _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_2__.CheckoutCoreModule, _spartacus_checkout_base_occ__WEBPACK_IMPORTED_MODULE_3__.CheckoutOccModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CheckoutModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_spartacus_checkout_base_components__WEBPACK_IMPORTED_MODULE_1__.CheckoutComponentsModule, _spartacus_checkout_base_core__WEBPACK_IMPORTED_MODULE_2__.CheckoutCoreModule, _spartacus_checkout_base_occ__WEBPACK_IMPORTED_MODULE_3__.CheckoutOccModule]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ })

}]);
//# sourceMappingURL=node_modules_spartacus_checkout_fesm2020_spartacus-checkout-base_mjs.js.map