"use strict";
(self["webpackChunkmystore_6_3"] = self["webpackChunkmystore_6_3"] || []).push([["node_modules_spartacus_user_fesm2020_spartacus-user-profile_mjs"],{

/***/ 1841:
/*!*************************************************************************************!*\
  !*** ./node_modules/@spartacus/user/fesm2020/spartacus-user-profile-components.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CloseAccountComponent": () => (/* binding */ CloseAccountComponent),
/* harmony export */   "CloseAccountModalComponent": () => (/* binding */ CloseAccountModalComponent),
/* harmony export */   "CloseAccountModule": () => (/* binding */ CloseAccountModule),
/* harmony export */   "ForgotPasswordComponent": () => (/* binding */ ForgotPasswordComponent),
/* harmony export */   "ForgotPasswordComponentService": () => (/* binding */ ForgotPasswordComponentService),
/* harmony export */   "ForgotPasswordModule": () => (/* binding */ ForgotPasswordModule),
/* harmony export */   "RegisterComponent": () => (/* binding */ RegisterComponent),
/* harmony export */   "RegisterComponentModule": () => (/* binding */ RegisterComponentModule),
/* harmony export */   "RegisterComponentService": () => (/* binding */ RegisterComponentService),
/* harmony export */   "ResetPasswordComponent": () => (/* binding */ ResetPasswordComponent),
/* harmony export */   "ResetPasswordComponentService": () => (/* binding */ ResetPasswordComponentService),
/* harmony export */   "ResetPasswordModule": () => (/* binding */ ResetPasswordModule),
/* harmony export */   "UpdateEmailComponent": () => (/* binding */ UpdateEmailComponent),
/* harmony export */   "UpdateEmailComponentService": () => (/* binding */ UpdateEmailComponentService),
/* harmony export */   "UpdateEmailModule": () => (/* binding */ UpdateEmailModule),
/* harmony export */   "UpdatePasswordComponent": () => (/* binding */ UpdatePasswordComponent),
/* harmony export */   "UpdatePasswordComponentService": () => (/* binding */ UpdatePasswordComponentService),
/* harmony export */   "UpdatePasswordModule": () => (/* binding */ UpdatePasswordModule),
/* harmony export */   "UpdateProfileComponent": () => (/* binding */ UpdateProfileComponent),
/* harmony export */   "UpdateProfileComponentService": () => (/* binding */ UpdateProfileComponentService),
/* harmony export */   "UpdateProfileModule": () => (/* binding */ UpdateProfileModule),
/* harmony export */   "UserProfileComponentsModule": () => (/* binding */ UserProfileComponentsModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 4666);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/router */ 124);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/storefront */ 4373);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ 4505);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ 2425);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ 9193);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 5670);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 3910);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 8759);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 9151);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 9095);
/* harmony import */ var _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @spartacus/user/profile/root */ 8756);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ 2508);
/* harmony import */ var _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @ng-select/ng-select */ 3054);



















/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
function CloseAccountModalComponent_ng_container_0_div_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div")(1, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "cx-spinner");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
}
function CloseAccountModalComponent_ng_container_0_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 11)(1, "p", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "div", 13)(5, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CloseAccountModalComponent_ng_container_0_ng_template_13_Template_button_click_5_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r5);
      const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r4.closeAccount());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CloseAccountModalComponent_ng_container_0_ng_template_13_Template_button_click_8_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r5);
      const ctx_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r6.dismissModal("Cancel"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 3, "closeAccount.confirmAccountClosureMessage"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 5, "closeAccount.closeMyAccount"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 7, "common.cancel"), " ");
  }
}
function CloseAccountModalComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("esc", function CloseAccountModalComponent_ng_container_0_Template_div_esc_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8);
      const ctx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r7.dismissModal("Escape click"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 2)(3, "div", 3)(4, "h3", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CloseAccountModalComponent_ng_container_0_Template_button_click_7_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r8);
      const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r9.dismissModal("Cross click"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "cx-icon", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](11, CloseAccountModalComponent_ng_container_0_div_11_Template, 3, 0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](13, CloseAccountModalComponent_ng_container_0_ng_template_13_Template, 11, 9, "ng-template", null, 9, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](14);
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("cxFocus", ctx_r0.focusConfig);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 6, "closeAccount.confirmAccountClosure"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 8, "common.close"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("type", ctx_r0.iconTypes.CLOSE);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](12, 10, ctx_r0.isLoading$))("ngIfElse", _r2);
  }
}
const _c0 = ["element"];
const _c1 = function () {
  return {
    cxRoute: "home"
  };
};
function ForgotPasswordComponent_cx_spinner_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-spinner", 7);
  }
}
const _c2 = function () {
  return {
    cxRoute: "login"
  };
};
function RegisterComponent_section_0_label_60_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "input", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "span", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const anonymousConsent_r5 = ctx.ngIf;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("checked", ctx_r3.isConsentGiven(anonymousConsent_r5.consent));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", anonymousConsent_r5.template, " ");
  }
}
function RegisterComponent_section_0_div_62_div_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div")(1, "label")(2, "input", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function RegisterComponent_section_0_div_62_div_1_div_1_Template_input_change_2_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r14);
      const i_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().index;
      const ctx_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r12.updateAdditionalConsents($event, i_r9));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const id_r11 = ctx.ngIf;
    const ctx_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    const i_r9 = ctx_r16.index;
    const control_r8 = ctx_r16.$implicit;
    const consents_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("required", consents_r6[i_r9].required)("name", id_r11)("formControlName", i_r9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", consents_r6[i_r9].template.description, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", control_r8);
  }
}
function RegisterComponent_section_0_div_62_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, RegisterComponent_section_0_div_62_div_1_div_1_Template, 6, 5, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const i_r9 = ctx.index;
    const consents_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", consents_r6[i_r9] == null ? null : consents_r6[i_r9].template == null ? null : consents_r6[i_r9].template.id);
  }
}
function RegisterComponent_section_0_div_62_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, RegisterComponent_section_0_div_62_div_1_Template, 2, 1, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r4.additionalConsents.controls);
  }
}
const _c3 = function (a0) {
  return {
    ariaLabel: a0
  };
};
const _c4 = function () {
  return {
    cxRoute: "termsAndConditions"
  };
};
function RegisterComponent_section_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r19 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "section", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 4)(4, "div", 5)(5, "div", 6)(6, "form", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function RegisterComponent_section_0_Template_form_ngSubmit_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r19);
      const ctx_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r18.submitForm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 8)(8, "label")(9, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](11, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](12, "ng-select", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "div", 8)(17, "label")(18, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](20, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](21, "input", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](22, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](23, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](24, "div", 8)(25, "label")(26, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](27);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](28, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](29, "input", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](30, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](31, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](32, "div", 8)(33, "label")(34, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](35);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](36, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](37, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](38, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](39, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](40, "div", 8)(41, "label")(42, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](43);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](44, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](45, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](46, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](47, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](48, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](49, "div", 8)(50, "label")(51, "span", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](52);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](53, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](54, "input", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](55, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](56, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](57, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](58, "div", 8)(59, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](60, RegisterComponent_section_0_label_60_Template, 4, 2, "label", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](61, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](62, RegisterComponent_section_0_div_62_Template, 2, 1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](63, "div", 8)(64, "div", 17)(65, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](66, "input", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](67, "span", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](68);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](69, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](70, "a", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](71, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](72);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](73, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](74, "cx-form-errors", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](75, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](76);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](77, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](78, "a", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](79, "cxUrl");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](80);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](81, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 34, "common.loaded"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r0.registerForm);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](11, 36, "register.title"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("clearable", false)("items", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 38, ctx_r0.titles$))("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 40, "register.selectTitle"))("searchable", false)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](82, _c3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 42, "register.title")));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](20, 44, "register.firstName.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](22, 46, "register.firstName.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.registerForm.get("firstName"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](28, 48, "register.lastName.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](30, 50, "register.lastName.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.registerForm.get("lastName"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](36, 52, "register.emailAddress.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](38, 54, "register.emailAddress.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.registerForm.get("email"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](44, 56, "register.password.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](46, 58, "register.password.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](47, 60, "register.password.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.registerForm.get("password"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](53, 62, "register.confirmPassword.label"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](55, 64, "register.confirmPassword.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](56, 66, "register.confirmPassword.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.registerForm.get("passwordconf"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](61, 68, ctx_r0.anonymousConsent$));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.additionalRegistrationConsents);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](69, 70, "register.confirmThatRead"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](71, 72, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](84, _c4)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](73, 74, "register.termsAndConditions"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r0.registerForm.get("termsandconditions"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](77, 76, "register.register"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](79, 78, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](85, _c2)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](81, 80, "register.signIn"));
  }
}
function RegisterComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "cx-spinner");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
}
function ResetPasswordComponent_cx_spinner_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-spinner", 2);
  }
}
function ResetPasswordComponent_form_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function ResetPasswordComponent_form_2_Template_form_ngSubmit_0_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4);
      const token_r2 = restoredCtx.ngIf;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r3.onSubmit(token_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "label")(2, "span", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](5, "input", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](7, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "cx-form-errors", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "label")(10, "span", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](12, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](13, "input", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "cx-form-errors", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](19, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r1.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 11, "register.newPassword"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 13, "register.password.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](7, 15, "register.password.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.form.get("password"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](12, 17, "register.passwordMinRequirements"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 19, "register.confirmPassword.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 21, "register.confirmPassword.placeholder"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx_r1.form.get("passwordConfirm"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx_r1.form.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](19, 23, "register.resetPassword"), " ");
  }
}
function UpdateEmailComponent_cx_spinner_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-spinner", 9);
  }
}
function UpdatePasswordComponent_cx_spinner_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-spinner", 9);
  }
}
function UpdateProfileComponent_cx_spinner_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-spinner", 11);
  }
}
function UpdateProfileComponent_ng_option_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "ng-option", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const title_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", title_r2.code);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](title_r2.name);
  }
}
class CloseAccountModalComponent {
  handleClick(event) {
    if (event.target.tagName === this.el.nativeElement.tagName) {
      this.dismissModal('Cross click');
    }
  }
  constructor(authService, globalMessageService, routingService, translationService, userProfile, launchDialogService, el) {
    this.authService = authService;
    this.globalMessageService = globalMessageService;
    this.routingService = routingService;
    this.translationService = translationService;
    this.userProfile = userProfile;
    this.launchDialogService = launchDialogService;
    this.el = el;
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.ICON_TYPE;
    this.focusConfig = {
      trap: true,
      block: true,
      autofocus: 'button',
      focusOnEscape: true
    };
    this.loading$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
  }
  get isLoading$() {
    return this.loading$.asObservable();
  }
  ngOnInit() {
    this.isLoggedIn$ = this.authService.isUserLoggedIn();
  }
  onSuccess() {
    this.dismissModal('Success');
    this.translationService.translate('closeAccount.accountClosedSuccessfully').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)()).subscribe(text => {
      this.globalMessageService.add(text, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
    });
    this.authService.coreLogout().then(() => {
      this.routingService.go({
        cxRoute: 'home'
      });
    });
  }
  onError() {
    this.dismissModal('Error');
    this.translationService.translate('closeAccount.accountClosedFailure').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)()).subscribe(text => {
      this.globalMessageService.add(text, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_ERROR);
    });
  }
  dismissModal(reason) {
    this.launchDialogService.closeDialog(reason);
  }
  closeAccount() {
    this.loading$.next(true);
    this.userProfile.close().subscribe({
      next: () => {
        this.onSuccess();
        this.loading$.next(false);
      },
      error: () => {
        this.onError();
        this.loading$.next(false);
      }
    });
  }
}
CloseAccountModalComponent.ɵfac = function CloseAccountModalComponent_Factory(t) {
  return new (t || CloseAccountModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslationService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserProfileFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.LaunchDialogService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef));
};
CloseAccountModalComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CloseAccountModalComponent,
  selectors: [["cx-close-account-modal"]],
  hostBindings: function CloseAccountModalComponent_HostBindings(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CloseAccountModalComponent_click_HostBindingHandler($event) {
        return ctx.handleClick($event);
      });
    }
  },
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], [1, "cx-close-account-modal", 3, "cxFocus", "esc"], [1, "cx-close-account-modal-container"], [1, "cx-close-account-modal-header", "cx-modal-header"], [1, "cx-close-account-modal-title"], ["type", "button", 1, "close", 3, "click"], ["aria-hidden", "true"], [3, "type"], [4, "ngIf", "ngIfElse"], ["loaded", ""], [1, "cx-spinner"], [1, "cx-close-account-modal-body", "modal-body"], [1, "cx-confirmation"], [1, "cx-close-account-modal-footer", "cx-modal-footer"], [1, "btn", "btn-primary", 3, "click"], [1, "btn", "btn-block", "btn-secondary", 3, "click"]],
  template: function CloseAccountModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, CloseAccountModalComponent_ng_container_0_Template, 15, 12, "ng-container", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.isLoggedIn$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FocusDirective, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CloseAccountModalComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-close-account-modal',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container *ngIf=\"isLoggedIn$ | async\">\n  <div\n    class=\"cx-close-account-modal\"\n    [cxFocus]=\"focusConfig\"\n    (esc)=\"dismissModal('Escape click')\"\n  >\n    <div class=\"cx-close-account-modal-container\">\n      <div class=\"cx-close-account-modal-header cx-modal-header\">\n        <h3 class=\"cx-close-account-modal-title\">\n          {{ 'closeAccount.confirmAccountClosure' | cxTranslate }}\n        </h3>\n        <button\n          type=\"button\"\n          class=\"close\"\n          [attr.aria-label]=\"'common.close' | cxTranslate\"\n          (click)=\"dismissModal('Cross click')\"\n        >\n          <span aria-hidden=\"true\">\n            <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n          </span>\n        </button>\n      </div>\n\n      <div *ngIf=\"isLoading$ | async; else loaded\">\n        <div class=\"cx-spinner\">\n          <cx-spinner> </cx-spinner>\n        </div>\n      </div>\n\n      <ng-template #loaded>\n        <div class=\"cx-close-account-modal-body modal-body\">\n          <p class=\"cx-confirmation\">\n            {{ 'closeAccount.confirmAccountClosureMessage' | cxTranslate }}\n          </p>\n        </div>\n        <div class=\"cx-close-account-modal-footer cx-modal-footer\">\n          <button class=\"btn btn-primary\" (click)=\"closeAccount()\">\n            {{ 'closeAccount.closeMyAccount' | cxTranslate }}\n          </button>\n          <button\n            (click)=\"dismissModal('Cancel')\"\n            class=\"btn btn-block btn-secondary\"\n          >\n            {{ 'common.cancel' | cxTranslate }}\n          </button>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslationService
    }, {
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserProfileFacade
    }, {
      type: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.LaunchDialogService
    }, {
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef
    }];
  }, {
    handleClick: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,
      args: ['click', ['$event']]
    }]
  });
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const defaultCloseDialogModalLayoutConfig = {
  launch: {
    CLOSE_ACCOUNT: {
      inline: true,
      component: CloseAccountModalComponent,
      dialogType: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.DIALOG_TYPE.DIALOG
    }
  }
};

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CloseAccountComponent {
  constructor(launchDialogService, vcr) {
    this.launchDialogService = launchDialogService;
    this.vcr = vcr;
  }
  openModal() {
    const dialog = this.launchDialogService.openDialog("CLOSE_ACCOUNT" /* LAUNCH_CALLER.CLOSE_ACCOUNT */, this.element, this.vcr);
    dialog?.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1)).subscribe();
  }
}
CloseAccountComponent.ɵfac = function CloseAccountComponent_Factory(t) {
  return new (t || CloseAccountComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.LaunchDialogService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef));
};
CloseAccountComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: CloseAccountComponent,
  selectors: [["cx-close-account"]],
  viewQuery: function CloseAccountComponent_Query(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵviewQuery"](_c0, 5);
    }
    if (rf & 2) {
      let _t;
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵloadQuery"]()) && (ctx.element = _t.first);
    }
  },
  decls: 12,
  vars: 10,
  consts: [[1, "col-lg-8", "col-md-9"], [1, "row", "cx-btn-group"], [1, "col-sm-6"], [1, "btn", "btn-block", "btn-secondary", 3, "routerLink"], [1, "btn", "btn-block", "btn-primary", 3, "click"], ["element", ""]],
  template: function CloseAccountComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0)(1, "div", 1)(2, "div", 2)(3, "a", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "div", 2)(8, "button", 4, 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function CloseAccountComponent_Template_button_click_8_listener() {
        return ctx.openModal();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](11, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](9, _c1)));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 5, "common.cancel"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](11, 7, "closeAccount.closeMyAccount"), " ");
    }
  },
  dependencies: [_angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterLink, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CloseAccountComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-close-account',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<div class=\"col-lg-8 col-md-9\">\n  <div class=\"row cx-btn-group\">\n    <div class=\"col-sm-6\">\n      <a\n        [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n        class=\"btn btn-block btn-secondary\"\n        >{{ 'common.cancel' | cxTranslate }}</a\n      >\n    </div>\n    <div class=\"col-sm-6\">\n      <button #element class=\"btn btn-block btn-primary\" (click)=\"openModal()\">\n        {{ 'closeAccount.closeMyAccount' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.LaunchDialogService
    }, {
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewContainerRef
    }];
  }, {
    element: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ViewChild,
      args: ['element']
    }]
  });
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class CloseAccountModule {}
CloseAccountModule.ɵfac = function CloseAccountModule_Factory(t) {
  return new (t || CloseAccountModule)();
};
CloseAccountModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: CloseAccountModule
});
CloseAccountModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      CloseAccountComponent: {
        component: CloseAccountComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard]
      }
    }
  }), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)(defaultCloseDialogModalLayoutConfig)],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.KeyboardFocusModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](CloseAccountModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.IconModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.KeyboardFocusModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          CloseAccountComponent: {
            component: CloseAccountComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard]
          }
        }
      }), (0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)(defaultCloseDialogModalLayoutConfig)],
      declarations: [CloseAccountComponent, CloseAccountModalComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ForgotPasswordComponentService {
  constructor(userPasswordService, routingService, authConfigService, globalMessage) {
    this.userPasswordService = userPasswordService;
    this.routingService = routingService;
    this.authConfigService = authConfigService;
    this.globalMessage = globalMessage;
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
    this.isUpdating$ = this.busy$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(state => state === true ? this.form.disable() : this.form.enable()));
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormGroup({
      userEmail: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.emailValidator])
    });
  }
  /**
   * Sends an email to the user to reset the password.
   *
   * When the `ResourceOwnerPasswordFlow` is used, the user is routed
   * to the login page.
   */
  requestEmail() {
    if (!this.form.valid) {
      this.form.markAllAsTouched();
      return;
    }
    this.busy$.next(true);
    this.userPasswordService.requestForgotPasswordEmail(this.form.value.userEmail).subscribe({
      next: () => this.onSuccess(),
      error: error => this.onError(error)
    });
  }
  onSuccess() {
    this.globalMessage.add({
      key: 'forgottenPassword.passwordResetEmailSent'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
    this.busy$.next(false);
    this.form.reset();
    this.redirect();
  }
  onError(_error) {
    this.busy$.next(false);
  }
  /**
   * Redirects the user back to the login page.
   *
   * This only happens in case of the `ResourceOwnerPasswordFlow` OAuth flow.
   */
  redirect() {
    if (this.authConfigService.getOAuthFlow() === _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.OAuthFlow.ResourceOwnerPasswordFlow) {
      this.routingService.go({
        cxRoute: 'login'
      });
    }
  }
}
ForgotPasswordComponentService.ɵfac = function ForgotPasswordComponentService_Factory(t) {
  return new (t || ForgotPasswordComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService));
};
ForgotPasswordComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: ForgotPasswordComponentService,
  factory: ForgotPasswordComponentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ForgotPasswordComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthConfigService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ForgotPasswordComponent {
  constructor(service) {
    this.service = service;
    this.form = this.service.form;
    this.isUpdating$ = this.service.isUpdating$;
  }
  onSubmit() {
    this.service.requestEmail();
  }
}
ForgotPasswordComponent.ɵfac = function ForgotPasswordComponent_Factory(t) {
  return new (t || ForgotPasswordComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](ForgotPasswordComponentService));
};
ForgotPasswordComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: ForgotPasswordComponent,
  selectors: [["cx-forgot-password"]],
  decls: 17,
  vars: 22,
  consts: [["class", "overlay", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [1, "label-content"], ["required", "true", "type", "email", "formControlName", "userEmail", 1, "form-control", 3, "placeholder"], [3, "control"], [1, "btn", "btn-block", "btn-secondary", 3, "routerLink"], [1, "btn", "btn-block", "btn-primary", 3, "disabled"], [1, "overlay"]],
  template: function ForgotPasswordComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ForgotPasswordComponent_cx_spinner_0_Template, 1, 0, "cx-spinner", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "form", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function ForgotPasswordComponent_Template_form_ngSubmit_2_listener() {
        return ctx.onSubmit();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "label")(4, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "input", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "a", 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](11, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "button", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](16, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 9, ctx.isUpdating$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.form);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 11, "forgottenPassword.emailAddress.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 13, "forgottenPassword.emailAddress.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("userEmail"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](11, 15, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](21, _c2)));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 17, "common.cancel"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.form.disabled);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](16, 19, "common.submit"), " ");
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ForgotPasswordComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-forgot-password',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<cx-spinner class=\"overlay\" *ngIf=\"isUpdating$ | async\"> </cx-spinner>\n\n<form (ngSubmit)=\"onSubmit()\" [formGroup]=\"form\">\n  <label>\n    <span class=\"label-content\">{{\n      'forgottenPassword.emailAddress.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"email\"\n      class=\"form-control\"\n      placeholder=\"{{\n        'forgottenPassword.emailAddress.placeholder' | cxTranslate\n      }}\"\n      formControlName=\"userEmail\"\n    />\n    <cx-form-errors [control]=\"form.get('userEmail')\"></cx-form-errors>\n  </label>\n\n  <a\n    class=\"btn btn-block btn-secondary\"\n    [routerLink]=\"{ cxRoute: 'login' } | cxUrl\"\n    >{{ 'common.cancel' | cxTranslate }}</a\n  >\n  <button class=\"btn btn-block btn-primary\" [disabled]=\"form.disabled\">\n    {{ 'common.submit' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: ForgotPasswordComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ForgotPasswordModule {}
ForgotPasswordModule.ɵfac = function ForgotPasswordModule_Factory(t) {
  return new (t || ForgotPasswordModule)();
};
ForgotPasswordModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ForgotPasswordModule
});
ForgotPasswordModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      ForgotPasswordComponent: {
        component: ForgotPasswordComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.NotAuthGuard],
        providers: [{
          provide: ForgotPasswordComponentService,
          useClass: ForgotPasswordComponentService,
          deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthConfigService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService]
        }]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ForgotPasswordModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          ForgotPasswordComponent: {
            component: ForgotPasswordComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.NotAuthGuard],
            providers: [{
              provide: ForgotPasswordComponentService,
              useClass: ForgotPasswordComponentService,
              deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthConfigService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService]
            }]
          }
        }
      })],
      declarations: [ForgotPasswordComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class RegisterComponentService {
  constructor(userRegisterFacade, globalMessageService, fb) {
    this.userRegisterFacade = userRegisterFacade;
    this.globalMessageService = globalMessageService;
    this.fb = fb;
  }
  /**
   * Register a new user.
   *
   * @param user as UserSignUp
   */
  register(user) {
    return this.userRegisterFacade.register(user);
  }
  /**
   * Returns titles that can be used for the user profiles.
   */
  getTitles() {
    return this.userRegisterFacade.getTitles();
  }
  /**
   * Show the message after successful registration.
   */
  postRegisterMessage() {
    this.globalMessageService.add({
      key: 'register.postRegisterMessage'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
  }
  /**
   * Get if any additional consents needs to be provided during registration
   * In core feature, no additional consents are necessary during registration.
   * In integration scenarios, eg: cdc, this method will be overridden to return
   * necessary cdc consents
   */
  getAdditionalConsents() {
    return [];
  }
  /**
   * Generate form control if any additional consents that needs to be provided during registration
   * In core feature, no additional consents are necessary during registration.
   * In integration scenarios, eg: cdc, this method will be overridden to return
   * form controls for necessary cdc consents
   */
  generateAdditionalConsentsFormControl() {
    return this.fb?.array([]) ?? undefined;
  }
}
RegisterComponentService.ɵfac = function RegisterComponentService_Factory(t) {
  return new (t || RegisterComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserRegisterFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormBuilder));
};
RegisterComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: RegisterComponentService,
  factory: RegisterComponentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RegisterComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserRegisterFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }, {
      type: _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormBuilder
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class RegisterComponent {
  get additionalConsents() {
    return this.registerForm?.get('additionalConsents');
  }
  updateAdditionalConsents(event, index) {
    const {
      checked
    } = event.target;
    this.registerForm.value.additionalConsents[index] = checked;
  }
  constructor(globalMessageService, fb, router, anonymousConsentsService, anonymousConsentsConfig, authConfigService, registerComponentService) {
    this.globalMessageService = globalMessageService;
    this.fb = fb;
    this.router = router;
    this.anonymousConsentsService = anonymousConsentsService;
    this.anonymousConsentsConfig = anonymousConsentsConfig;
    this.authConfigService = authConfigService;
    this.registerComponentService = registerComponentService;
    this.isLoading$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
    this.subscription = new rxjs__WEBPACK_IMPORTED_MODULE_11__.Subscription();
    this.registerForm = this.fb.group({
      titleCode: [null],
      firstName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required],
      lastName: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required],
      email: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.emailValidator]],
      password: ['', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.passwordValidator]],
      passwordconf: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required],
      newsletter: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl({
        value: false,
        disabled: this.isConsentRequired()
      }),
      additionalConsents: this.registerComponentService.generateAdditionalConsentsFormControl?.() ?? this.fb.array([]),
      termsandconditions: [false, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.requiredTrue]
    }, {
      validators: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.passwordsMustMatch('password', 'passwordconf')
    });
  }
  ngOnInit() {
    this.titles$ = this.registerComponentService.getTitles().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(titles => {
      return titles.sort(_spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.sortTitles);
    }));
    // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)
    this.subscription.add(this.globalMessageService.get().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(messages => !!Object.keys(messages).length)).subscribe(globalMessageEntities => {
      const messages = globalMessageEntities && globalMessageEntities[_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_ERROR];
      if (messages && messages.some(message => message.raw === 'This field is required.')) {
        this.globalMessageService.remove(_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_ERROR);
        this.globalMessageService.add({
          key: 'register.titleRequired'
        }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_ERROR);
      }
    }));
    const registerConsent = this.anonymousConsentsConfig?.anonymousConsents?.registerConsent ?? '';
    this.anonymousConsent$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this.anonymousConsentsService.getConsent(registerConsent), this.anonymousConsentsService.getTemplate(registerConsent)]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([consent, template]) => {
      return {
        consent,
        template: template?.description ? template.description : ''
      };
    }));
    this.additionalRegistrationConsents = this.registerComponentService?.getAdditionalConsents() || [];
    this.subscription.add(
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    this.registerForm.get('newsletter').valueChanges.subscribe(() => {
      this.toggleAnonymousConsent();
    }));
  }
  submitForm() {
    if (this.registerForm.valid) {
      this.registerUser();
    } else {
      this.registerForm.markAllAsTouched();
    }
  }
  registerUser() {
    this.isLoading$.next(true);
    this.registerComponentService.register(this.collectDataFromRegisterForm(this.registerForm.value)).subscribe({
      next: () => this.onRegisterUserSuccess(),
      complete: () => this.isLoading$.next(false),
      error: () => this.isLoading$.next(false)
    });
  }
  titleSelected(title) {
    this.registerForm['controls'].titleCode.setValue(title.code);
  }
  collectDataFromRegisterForm(formData) {
    const {
      firstName,
      lastName,
      email,
      password,
      titleCode
    } = formData;
    return {
      firstName,
      lastName,
      uid: email.toLowerCase(),
      password,
      titleCode
    };
  }
  isConsentGiven(consent) {
    return this.anonymousConsentsService.isConsentGiven(consent);
  }
  isConsentRequired() {
    const requiredConsents = this.anonymousConsentsConfig?.anonymousConsents?.requiredConsents;
    const registerConsent = this.anonymousConsentsConfig?.anonymousConsents?.registerConsent;
    if (requiredConsents && registerConsent) {
      return requiredConsents.includes(registerConsent);
    }
    return false;
  }
  onRegisterUserSuccess() {
    if (this.authConfigService.getOAuthFlow() === _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.OAuthFlow.ResourceOwnerPasswordFlow) {
      this.router.go('login');
    }
    this.registerComponentService.postRegisterMessage();
  }
  toggleAnonymousConsent() {
    const registerConsent = this.anonymousConsentsConfig?.anonymousConsents?.registerConsent;
    if (registerConsent) {
      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
      if (Boolean(this.registerForm.get('newsletter').value)) {
        this.anonymousConsentsService.giveConsent(registerConsent);
      } else {
        this.anonymousConsentsService.withdrawConsent(registerConsent);
      }
    }
  }
  ngOnDestroy() {
    this.subscription.unsubscribe();
  }
}
RegisterComponent.ɵfac = function RegisterComponent_Factory(t) {
  return new (t || RegisterComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormBuilder), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AnonymousConsentsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AnonymousConsentsConfig), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthConfigService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](RegisterComponentService));
};
RegisterComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: RegisterComponent,
  selectors: [["cx-register"]],
  decls: 4,
  vars: 4,
  consts: [["class", "cx-page-section container", 4, "ngIf", "ngIfElse"], ["loading", ""], [1, "cx-page-section", "container"], ["role", "status"], [1, "row", "justify-content-center"], [1, "col-md-6"], [1, "cx-section"], [3, "formGroup", "ngSubmit"], [1, "form-group"], [1, "label-content"], ["bindLabel", "name", "bindValue", "code", "formControlName", "titleCode", "id", "title-select", 3, "clearable", "items", "placeholder", "searchable", "cxNgSelectA11y"], ["required", "true", "type", "text", "name", "firstname", "formControlName", "firstName", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "text", "name", "lastname", "formControlName", "lastName", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "email", "name", "email", "formControlName", "email", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "password", "name", "password", "formControlName", "password", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "password", "name", "confirmpassword", "formControlName", "passwordconf", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], [1, "form-check"], [4, "ngIf"], ["formArrayName", "additionalConsents", "class", "form-group", 4, "ngIf"], ["required", "true", "type", "checkbox", "name", "termsandconditions", "formControlName", "termsandconditions"], [1, "form-check-label"], ["target", "_blank", "rel", "noopener noreferrer", 3, "routerLink"], ["type", "submit", 1, "btn", "btn-block", "btn-primary"], [1, "cx-login-link", "btn-link", 3, "routerLink"], ["type", "checkbox", "name", "newsletter", "formControlName", "newsletter", 1, "form-check-input", 3, "checked"], ["formArrayName", "additionalConsents", 1, "form-group"], ["class", "form-check", 4, "ngFor", "ngForOf"], ["type", "checkbox", 3, "required", "name", "formControlName", "change"], [1, "cx-spinner"]],
  template: function RegisterComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, RegisterComponent_section_0_Template, 82, 86, "section", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, RegisterComponent_ng_template_2_Template, 2, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplateRefExtractor"]);
    }
    if (rf & 2) {
      const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵreference"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 2, ctx.isLoading$))("ngIfElse", _r1);
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.CheckboxControlValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.CheckboxRequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormArrayName, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsComponent, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgSelectComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.NgSelectA11yDirective, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleDirective, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe],
  encapsulation: 2
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RegisterComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-register',
      template: "<section\n  class=\"cx-page-section container\"\n  *ngIf=\"!(isLoading$ | async); else loading\"\n>\n  <div role=\"status\" [attr.aria-label]=\"'common.loaded' | cxTranslate\"></div>\n  <div class=\"row justify-content-center\">\n    <div class=\"col-md-6\">\n      <div class=\"cx-section\">\n        <form (ngSubmit)=\"submitForm()\" [formGroup]=\"registerForm\">\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.title' | cxTranslate\n              }}</span>\n              <ng-select\n                [clearable]=\"false\"\n                [items]=\"titles$ | async\"\n                [placeholder]=\"'register.selectTitle' | cxTranslate\"\n                [searchable]=\"false\"\n                bindLabel=\"name\"\n                bindValue=\"code\"\n                formControlName=\"titleCode\"\n                id=\"title-select\"\n                [cxNgSelectA11y]=\"{\n                  ariaLabel: 'register.title' | cxTranslate\n                }\"\n              >\n              </ng-select>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.firstName.label' | cxTranslate\n              }}</span>\n              <input\n                required=\"true\"\n                class=\"form-control\"\n                type=\"text\"\n                name=\"firstname\"\n                placeholder=\"{{\n                  'register.firstName.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"firstName\"\n              />\n              <cx-form-errors\n                [control]=\"registerForm.get('firstName')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.lastName.label' | cxTranslate\n              }}</span>\n              <input\n                required=\"true\"\n                class=\"form-control\"\n                type=\"text\"\n                name=\"lastname\"\n                placeholder=\"{{\n                  'register.lastName.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"lastName\"\n              />\n              <cx-form-errors\n                [control]=\"registerForm.get('lastName')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.emailAddress.label' | cxTranslate\n              }}</span>\n              <input\n                required=\"true\"\n                class=\"form-control\"\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"{{\n                  'register.emailAddress.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"email\"\n              />\n              <cx-form-errors\n                [control]=\"registerForm.get('email')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.password.label' | cxTranslate\n              }}</span>\n              <input\n                required=\"true\"\n                class=\"form-control\"\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"{{\n                  'register.password.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"password\"\n                [attr.aria-label]=\"\n                  'register.password.placeholder' | cxTranslate\n                \"\n                cxPasswordVisibilitySwitch\n              />\n              <cx-form-errors\n                [control]=\"registerForm.get('password')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.confirmPassword.label' | cxTranslate\n              }}</span>\n              <input\n                required=\"true\"\n                class=\"form-control\"\n                type=\"password\"\n                name=\"confirmpassword\"\n                placeholder=\"{{\n                  'register.confirmPassword.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"passwordconf\"\n                [attr.aria-label]=\"\n                  'register.confirmPassword.placeholder' | cxTranslate\n                \"\n                cxPasswordVisibilitySwitch\n              />\n              <cx-form-errors\n                [control]=\"registerForm.get('passwordconf')\"\n              ></cx-form-errors>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <div class=\"form-check\">\n              <label *ngIf=\"anonymousConsent$ | async as anonymousConsent\">\n                <input\n                  type=\"checkbox\"\n                  name=\"newsletter\"\n                  class=\"form-check-input\"\n                  formControlName=\"newsletter\"\n                  [checked]=\"isConsentGiven(anonymousConsent.consent)\"\n                />\n                <span class=\"form-check-label\">\n                  {{ anonymousConsent.template }}\n                </span>\n              </label>\n            </div>\n          </div>\n\n          <div\n            formArrayName=\"additionalConsents\"\n            class=\"form-group\"\n            *ngIf=\"additionalRegistrationConsents as consents\"\n          >\n            <div\n              class=\"form-check\"\n              *ngFor=\"let control of additionalConsents.controls; let i = index\"\n            >\n              <div *ngIf=\"consents[i]?.template?.id as id\">\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    [required]=\"consents[i].required\"\n                    [name]=\"id\"\n                    (change)=\"updateAdditionalConsents($any($event), i)\"\n                    [formControlName]=\"i\"\n                  />\n                  <span class=\"form-check-label\">\n                    {{ consents[i].template.description }}\n                  </span>\n                  <cx-form-errors [control]=\"control\"></cx-form-errors>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <div class=\"form-check\">\n              <label>\n                <input\n                  required=\"true\"\n                  type=\"checkbox\"\n                  name=\"termsandconditions\"\n                  formControlName=\"termsandconditions\"\n                />\n                <span class=\"form-check-label\">\n                  {{ 'register.confirmThatRead' | cxTranslate }}\n                  <a\n                    [routerLink]=\"{ cxRoute: 'termsAndConditions' } | cxUrl\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    {{ 'register.termsAndConditions' | cxTranslate }}\n                  </a>\n                </span>\n                <cx-form-errors\n                  [control]=\"registerForm.get('termsandconditions')\"\n                ></cx-form-errors>\n              </label>\n            </div>\n          </div>\n          <button type=\"submit\" class=\"btn btn-block btn-primary\">\n            {{ 'register.register' | cxTranslate }}\n          </button>\n          <a\n            class=\"cx-login-link btn-link\"\n            [routerLink]=\"{ cxRoute: 'login' } | cxUrl\"\n            >{{ 'register.signIn' | cxTranslate }}</a\n          >\n        </form>\n      </div>\n    </div>\n  </div>\n</section>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\"><cx-spinner></cx-spinner></div>\n</ng-template>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }, {
      type: _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormBuilder
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AnonymousConsentsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AnonymousConsentsConfig
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthConfigService
    }, {
      type: RegisterComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class RegisterComponentModule {}
RegisterComponentModule.ɵfac = function RegisterComponentModule_Factory(t) {
  return new (t || RegisterComponentModule)();
};
RegisterComponentModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: RegisterComponentModule
});
RegisterComponentModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      RegisterCustomerComponent: {
        component: RegisterComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.NotAuthGuard],
        providers: [{
          provide: RegisterComponentService,
          useClass: RegisterComponentService,
          deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserRegisterFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormBuilder]
        }]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgSelectModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.NgSelectA11yModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](RegisterComponentModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgSelectModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.NgSelectA11yModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          RegisterCustomerComponent: {
            component: RegisterComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.NotAuthGuard],
            providers: [{
              provide: RegisterComponentService,
              useClass: RegisterComponentService,
              deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserRegisterFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormBuilder]
            }]
          }
        }
      })],
      declarations: [RegisterComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ResetPasswordComponentService {
  constructor(userPasswordService, routingService, globalMessage) {
    this.userPasswordService = userPasswordService;
    this.routingService = routingService;
    this.globalMessage = globalMessage;
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
    this.isUpdating$ = this.busy$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(state => state === true ? this.form.disable() : this.form.enable()));
    this.resetToken$ = this.routingService.getRouterState().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(routerState => routerState.state.queryParams['token']));
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormGroup({
      password: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.passwordValidator]),
      passwordConfirm: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required)
    }, {
      validators: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.passwordsMustMatch('password', 'passwordConfirm')
    });
  }
  /**
   * Resets the password by the given token.
   *
   * The token has been provided during the request password flow.
   * The token is not validated on the client.
   */
  resetPassword(token) {
    if (!this.form.valid) {
      this.form.markAllAsTouched();
      return;
    }
    this.busy$.next(true);
    const password = this.form.get('password').value;
    this.userPasswordService.reset(token, password).subscribe({
      next: () => this.onSuccess(),
      error: error => this.onError(error)
    });
  }
  onSuccess() {
    this.globalMessage.add({
      key: 'forgottenPassword.passwordResetSuccess'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
    this.busy$.next(false);
    this.form.reset();
    this.redirect();
  }
  onError(error) {
    this.busy$.next(false);
    if (error instanceof _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.HttpErrorModel) {
      (error.details ?? []).forEach(err => {
        if (err.message) {
          this.globalMessage.add({
            raw: err.message
          }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_ERROR);
        }
      });
    }
  }
  /**
   * Redirects the user to the login page.
   */
  redirect() {
    this.routingService.go({
      cxRoute: 'login'
    });
  }
}
ResetPasswordComponentService.ɵfac = function ResetPasswordComponentService_Factory(t) {
  return new (t || ResetPasswordComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService));
};
ResetPasswordComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: ResetPasswordComponentService,
  factory: ResetPasswordComponentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResetPasswordComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ResetPasswordComponent {
  constructor(service) {
    this.service = service;
    this.form = this.service.form;
    this.isUpdating$ = this.service.isUpdating$;
    this.token$ = this.service.resetToken$;
  }
  onSubmit(token) {
    this.service.resetPassword(token);
  }
}
ResetPasswordComponent.ɵfac = function ResetPasswordComponent_Factory(t) {
  return new (t || ResetPasswordComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](ResetPasswordComponentService));
};
ResetPasswordComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: ResetPasswordComponent,
  selectors: [["cx-reset-password"]],
  hostAttrs: [1, "user-form"],
  decls: 4,
  vars: 6,
  consts: [["class", "overlay", 4, "ngIf"], [3, "formGroup", "ngSubmit", 4, "ngIf"], [1, "overlay"], [3, "formGroup", "ngSubmit"], [1, "label-content"], ["required", "true", "type", "password", "formControlName", "password", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "password", "formControlName", "passwordConfirm", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], [1, "btn", "btn-block", "btn-primary", 3, "disabled"]],
  template: function ResetPasswordComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ResetPasswordComponent_cx_spinner_0_Template, 1, 0, "cx-spinner", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ResetPasswordComponent_form_2_Template, 20, 25, "form", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 2, ctx.isUpdating$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 4, ctx.token$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleDirective, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResetPasswordComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-reset-password',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      host: {
        class: 'user-form'
      },
      template: "<cx-spinner class=\"overlay\" *ngIf=\"isUpdating$ | async\"> </cx-spinner>\n\n<form\n  *ngIf=\"token$ | async as token\"\n  (ngSubmit)=\"onSubmit(token)\"\n  [formGroup]=\"form\"\n>\n  <label>\n    <span class=\"label-content\">{{\n      'register.newPassword' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      class=\"form-control\"\n      type=\"password\"\n      placeholder=\"{{ 'register.password.placeholder' | cxTranslate }}\"\n      formControlName=\"password\"\n      [attr.aria-label]=\"'register.password.placeholder' | cxTranslate\"\n      cxPasswordVisibilitySwitch\n    />\n    <cx-form-errors [control]=\"form.get('password')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'register.passwordMinRequirements' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      class=\"form-control\"\n      type=\"password\"\n      placeholder=\"{{ 'register.confirmPassword.placeholder' | cxTranslate }}\"\n      formControlName=\"passwordConfirm\"\n      [attr.aria-label]=\"'register.confirmPassword.placeholder' | cxTranslate\"\n      cxPasswordVisibilitySwitch\n    />\n    <cx-form-errors [control]=\"form.get('passwordConfirm')\"></cx-form-errors>\n  </label>\n\n  <button class=\"btn btn-block btn-primary\" [disabled]=\"form.disabled\">\n    {{ 'register.resetPassword' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: ResetPasswordComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ResetPasswordModule {}
ResetPasswordModule.ɵfac = function ResetPasswordModule_Factory(t) {
  return new (t || ResetPasswordModule)();
};
ResetPasswordModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ResetPasswordModule
});
ResetPasswordModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      ResetPasswordComponent: {
        component: ResetPasswordComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.NotAuthGuard],
        providers: [{
          provide: ResetPasswordComponentService,
          useClass: ResetPasswordComponentService,
          deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService]
        }]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ResetPasswordModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          ResetPasswordComponent: {
            component: ResetPasswordComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.NotAuthGuard],
            providers: [{
              provide: ResetPasswordComponentService,
              useClass: ResetPasswordComponentService,
              deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService]
            }]
          }
        }
      })],
      declarations: [ResetPasswordComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdateEmailComponentService {
  constructor(userEmail, routingService, globalMessageService, authService, authRedirectService) {
    this.userEmail = userEmail;
    this.routingService = routingService;
    this.globalMessageService = globalMessageService;
    this.authService = authService;
    this.authRedirectService = authRedirectService;
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
    this.isUpdating$ = this.busy$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(state => state === true ? this.form.disable() : this.form.enable()));
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormGroup({
      email: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.emailValidator]),
      confirmEmail: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required]),
      password: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required])
    }, {
      validators: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.emailsMustMatch('email', 'confirmEmail')
    });
  }
  save() {
    if (!this.form.valid) {
      this.form.markAllAsTouched();
      return;
    }
    this.busy$.next(true);
    const newEmail = this.form.get('confirmEmail')?.value;
    const password = this.form.get('password')?.value;
    this.userEmail.update(password, newEmail).subscribe({
      next: () => this.onSuccess(newEmail),
      error: error => this.onError(error)
    });
  }
  /**
   * Handles successful updating of the user email.
   */
  onSuccess(newUid) {
    this.globalMessageService.add({
      key: 'updateEmailForm.emailUpdateSuccess',
      params: {
        newUid
      }
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
    this.busy$.next(false);
    this.form.reset();
    // sets the redirect url after login
    this.authRedirectService.setRedirectUrl(this.routingService.getUrl({
      cxRoute: 'home'
    }));
    // TODO(#9638): Use logout route when it will support passing redirect url
    this.authService.coreLogout().then(() => {
      this.routingService.go({
        cxRoute: 'login'
      }, {
        state: {
          newUid
        }
      });
    });
  }
  onError(_error) {
    this.busy$.next(false);
  }
}
UpdateEmailComponentService.ɵfac = function UpdateEmailComponentService_Factory(t) {
  return new (t || UpdateEmailComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserEmailFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService));
};
UpdateEmailComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UpdateEmailComponentService,
  factory: UpdateEmailComponentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdateEmailComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserEmailFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdateEmailComponent {
  constructor(service) {
    this.service = service;
    this.form = this.service.form;
    this.isUpdating$ = this.service.isUpdating$;
  }
  onSubmit() {
    this.service.save();
  }
}
UpdateEmailComponent.ɵfac = function UpdateEmailComponent_Factory(t) {
  return new (t || UpdateEmailComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](UpdateEmailComponentService));
};
UpdateEmailComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: UpdateEmailComponent,
  selectors: [["cx-update-email"]],
  hostAttrs: [1, "user-form"],
  decls: 32,
  vars: 39,
  consts: [["class", "overlay", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [1, "label-content"], ["required", "true", "type", "email", "name", "email", "formControlName", "email", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "email", "name", "confirmEmail", "formControlName", "confirmEmail", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "password", "name", "password", "formControlName", "password", "autocomplete", "new-password", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], [1, "btn", "btn-block", "btn-secondary", 3, "routerLink"], [1, "btn", "btn-block", "btn-primary", 3, "disabled"], [1, "overlay"]],
  template: function UpdateEmailComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, UpdateEmailComponent_cx_spinner_0_Template, 1, 0, "cx-spinner", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "form", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function UpdateEmailComponent_Template_form_ngSubmit_2_listener() {
        return ctx.onSubmit();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "label")(4, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "input", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](9, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "label")(11, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](13, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](14, "input", 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](15, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](16, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](17, "label")(18, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](19);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](20, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](21, "input", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](22, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](23, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](24, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](25, "a", 7);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](26, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](27);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](28, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](29, "button", 8);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](30);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](31, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 16, ctx.isUpdating$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.form);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 18, "updateEmailForm.newEmailAddress.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 20, "updateEmailForm.newEmailAddress.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("email"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](13, 22, "updateEmailForm.confirmNewEmailAddress.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](15, 24, "updateEmailForm.confirmNewEmailAddress.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("confirmEmail"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](20, 26, "updateEmailForm.password.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](22, 28, "updateEmailForm.password.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](23, 30, "updateEmailForm.password.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("password"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](26, 32, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](38, _c1)));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](28, 34, "common.cancel"), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.form.disabled);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](31, 36, "common.save"), " ");
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleDirective, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdateEmailComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-update-email',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      host: {
        class: 'user-form'
      },
      template: "<cx-spinner class=\"overlay\" *ngIf=\"isUpdating$ | async\"> </cx-spinner>\n\n<form (ngSubmit)=\"onSubmit()\" [formGroup]=\"form\">\n  <label>\n    <span class=\"label-content\">{{\n      'updateEmailForm.newEmailAddress.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"email\"\n      name=\"email\"\n      formControlName=\"email\"\n      placeholder=\"{{\n        'updateEmailForm.newEmailAddress.placeholder' | cxTranslate\n      }}\"\n      class=\"form-control\"\n    />\n    <cx-form-errors [control]=\"form.get('email')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'updateEmailForm.confirmNewEmailAddress.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"email\"\n      name=\"confirmEmail\"\n      formControlName=\"confirmEmail\"\n      placeholder=\"{{\n        'updateEmailForm.confirmNewEmailAddress.placeholder' | cxTranslate\n      }}\"\n      class=\"form-control\"\n    />\n    <cx-form-errors [control]=\"form.get('confirmEmail')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'updateEmailForm.password.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"password\"\n      name=\"password\"\n      formControlName=\"password\"\n      placeholder=\"{{ 'updateEmailForm.password.placeholder' | cxTranslate }}\"\n      class=\"form-control\"\n      autocomplete=\"new-password\"\n      [attr.aria-label]=\"'updateEmailForm.password.placeholder' | cxTranslate\"\n      cxPasswordVisibilitySwitch\n    />\n    <cx-form-errors [control]=\"form.get('password')\"></cx-form-errors>\n  </label>\n\n  <a\n    class=\"btn btn-block btn-secondary\"\n    [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n  >\n    {{ 'common.cancel' | cxTranslate }}\n  </a>\n\n  <button class=\"btn btn-block btn-primary\" [disabled]=\"form.disabled\">\n    {{ 'common.save' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: UpdateEmailComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdateEmailModule {}
UpdateEmailModule.ɵfac = function UpdateEmailModule_Factory(t) {
  return new (t || UpdateEmailModule)();
};
UpdateEmailModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UpdateEmailModule
});
UpdateEmailModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      UpdateEmailComponent: {
        component: UpdateEmailComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard],
        providers: [{
          provide: UpdateEmailComponentService,
          useClass: UpdateEmailComponentService,
          deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserEmailFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService]
        }]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdateEmailModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          UpdateEmailComponent: {
            component: UpdateEmailComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard],
            providers: [{
              provide: UpdateEmailComponentService,
              useClass: UpdateEmailComponentService,
              deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserEmailFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService]
            }]
          }
        }
      })],
      declarations: [UpdateEmailComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdatePasswordComponentService {
  constructor(userPasswordService, routingService, globalMessageService, authRedirectService, authService) {
    this.userPasswordService = userPasswordService;
    this.routingService = routingService;
    this.globalMessageService = globalMessageService;
    this.authRedirectService = authRedirectService;
    this.authService = authService;
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
    this.isUpdating$ = this.busy$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(state => state === true ? this.form.disable() : this.form.enable()));
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormGroup({
      oldPassword: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required),
      newPassword: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.passwordValidator]),
      newPasswordConfirm: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required)
    }, {
      validators: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.CustomFormValidators.passwordsMustMatch('newPassword', 'newPasswordConfirm')
    });
  }
  /**
   * Updates the password for the user.
   */
  updatePassword() {
    if (!this.form.valid) {
      this.form.markAllAsTouched();
      return;
    }
    this.busy$.next(true);
    const oldPassword = this.form.get('oldPassword')?.value;
    const newPassword = this.form.get('newPassword')?.value;
    this.userPasswordService.update(oldPassword, newPassword).subscribe({
      next: () => this.onSuccess(),
      error: error => this.onError(error)
    });
  }
  onSuccess() {
    this.globalMessageService.add({
      key: 'updatePasswordForm.passwordUpdateSuccess'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
    this.busy$.next(false);
    this.form.reset();
    // sets the redirect url after login
    this.authRedirectService?.setRedirectUrl(this.routingService.getUrl({
      cxRoute: 'home'
    }));
    // TODO(#9638): Use logout route when it will support passing redirect url
    this.authService?.coreLogout().then(() => {
      this.routingService.go({
        cxRoute: 'login'
      });
    });
  }
  onError(_error) {
    if (_error instanceof _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.HttpErrorModel && _error.details?.[0].type === 'AccessDeniedError') {
      this.globalMessageService.add({
        key: 'updatePasswordForm.accessDeniedError'
      }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_ERROR);
    }
    this.busy$.next(false);
    this.form.reset();
  }
}
UpdatePasswordComponentService.ɵfac = function UpdatePasswordComponentService_Factory(t) {
  return new (t || UpdatePasswordComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService));
};
UpdatePasswordComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UpdatePasswordComponentService,
  factory: UpdatePasswordComponentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdatePasswordComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdatePasswordComponent {
  constructor(service) {
    this.service = service;
    this.form = this.service.form;
    this.isUpdating$ = this.service.isUpdating$;
  }
  onSubmit() {
    this.service.updatePassword();
  }
}
UpdatePasswordComponent.ɵfac = function UpdatePasswordComponent_Factory(t) {
  return new (t || UpdatePasswordComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](UpdatePasswordComponentService));
};
UpdatePasswordComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: UpdatePasswordComponent,
  selectors: [["cx-update-password"]],
  hostAttrs: [1, "user-form"],
  decls: 34,
  vars: 45,
  consts: [["class", "overlay", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [1, "label-content"], ["required", "true", "type", "password", "name", "oldPassword", "formControlName", "oldPassword", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "password", "name", "newPassword", "formControlName", "newPassword", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "password", "name", "newPasswordConfirm", "formControlName", "newPasswordConfirm", "cxPasswordVisibilitySwitch", "", 1, "form-control", 3, "placeholder"], [1, "btn", "btn-block", "btn-secondary", 3, "routerLink"], [1, "btn", "btn-block", "btn-primary", 3, "disabled"], [1, "overlay"]],
  template: function UpdatePasswordComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, UpdatePasswordComponent_cx_spinner_0_Template, 1, 0, "cx-spinner", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "form", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function UpdatePasswordComponent_Template_form_ngSubmit_2_listener() {
        return ctx.onSubmit();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "label")(4, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "input", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](9, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](10, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "label")(12, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "input", 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](16, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](17, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](18, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](19, "label")(20, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](21);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](22, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](23, "input", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](24, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](25, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](26, "cx-form-errors", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](27, "a", 7);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](28, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](29);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](30, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](31, "button", 8);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](32);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](33, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 18, ctx.isUpdating$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.form);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 20, "updatePasswordForm.oldPassword.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 22, "updatePasswordForm.oldPassword.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](9, 24, "updatePasswordForm.oldPassword.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("oldPassword"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 26, "updatePasswordForm.newPassword.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](16, 28, "updatePasswordForm.newPassword.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](17, 30, "updatePasswordForm.newPassword.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("newPassword"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](22, 32, "updatePasswordForm.confirmPassword.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](24, 34, "updatePasswordForm.confirmPassword.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](25, 36, "updatePasswordForm.confirmPassword.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("newPasswordConfirm"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](28, 38, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](44, _c1)));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](30, 40, "common.cancel"), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.form.disabled);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](33, 42, "common.save"), " ");
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsComponent, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleDirective, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdatePasswordComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-update-password',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      host: {
        class: 'user-form'
      },
      template: "<cx-spinner class=\"overlay\" *ngIf=\"isUpdating$ | async\"> </cx-spinner>\n\n<form (ngSubmit)=\"onSubmit()\" [formGroup]=\"form\">\n  <label>\n    <span class=\"label-content\">{{\n      'updatePasswordForm.oldPassword.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      class=\"form-control\"\n      type=\"password\"\n      name=\"oldPassword\"\n      placeholder=\"{{\n        'updatePasswordForm.oldPassword.placeholder' | cxTranslate\n      }}\"\n      formControlName=\"oldPassword\"\n      [attr.aria-label]=\"\n        'updatePasswordForm.oldPassword.placeholder' | cxTranslate\n      \"\n      cxPasswordVisibilitySwitch\n    />\n    <cx-form-errors [control]=\"form.get('oldPassword')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'updatePasswordForm.newPassword.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      class=\"form-control\"\n      type=\"password\"\n      name=\"newPassword\"\n      placeholder=\"{{\n        'updatePasswordForm.newPassword.placeholder' | cxTranslate\n      }}\"\n      formControlName=\"newPassword\"\n      [attr.aria-label]=\"\n        'updatePasswordForm.newPassword.placeholder' | cxTranslate\n      \"\n      cxPasswordVisibilitySwitch\n    />\n    <cx-form-errors [control]=\"form.get('newPassword')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'updatePasswordForm.confirmPassword.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      class=\"form-control\"\n      type=\"password\"\n      name=\"newPasswordConfirm\"\n      placeholder=\"{{\n        'updatePasswordForm.confirmPassword.placeholder' | cxTranslate\n      }}\"\n      formControlName=\"newPasswordConfirm\"\n      [attr.aria-label]=\"\n        'updatePasswordForm.confirmPassword.placeholder' | cxTranslate\n      \"\n      cxPasswordVisibilitySwitch\n    />\n    <cx-form-errors [control]=\"form.get('newPasswordConfirm')\"></cx-form-errors>\n  </label>\n\n  <a\n    class=\"btn btn-block btn-secondary\"\n    [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n  >\n    {{ 'common.cancel' | cxTranslate }}\n  </a>\n\n  <button class=\"btn btn-block btn-primary\" [disabled]=\"form.disabled\">\n    {{ 'common.save' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: UpdatePasswordComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdatePasswordModule {}
UpdatePasswordModule.ɵfac = function UpdatePasswordModule_Factory(t) {
  return new (t || UpdatePasswordModule)();
};
UpdatePasswordModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UpdatePasswordModule
});
UpdatePasswordModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      UpdatePasswordComponent: {
        component: UpdatePasswordComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard],
        providers: [{
          provide: UpdatePasswordComponentService,
          useClass: UpdatePasswordComponentService,
          deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService]
        }]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdatePasswordModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.PasswordVisibilityToggleModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          UpdatePasswordComponent: {
            component: UpdatePasswordComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard],
            providers: [{
              provide: UpdatePasswordComponentService,
              useClass: UpdatePasswordComponentService,
              deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserPasswordFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.RoutingService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthRedirectService, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthService]
            }]
          }
        }
      })],
      declarations: [UpdatePasswordComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdateProfileComponentService {
  constructor(userProfile, globalMessageService) {
    this.userProfile = userProfile;
    this.globalMessageService = globalMessageService;
    this.user$ = this.userProfile.get().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(user => Boolean(user)));
    this.busy$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject(false);
    this.isUpdating$ = this.user$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(user => this.form.patchValue(user)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.switchMap)(_user => this.busy$), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(state => state === true ? this.form.disable() : this.form.enable()));
    this.titles$ = this.userProfile.getTitles();
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormGroup({
      customerId: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl(''),
      titleCode: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl(''),
      firstName: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required),
      lastName: new _angular_forms__WEBPACK_IMPORTED_MODULE_10__.UntypedFormControl('', _angular_forms__WEBPACK_IMPORTED_MODULE_10__.Validators.required)
    });
  }
  /**
   * Updates the user's details and handles the UI.
   */
  updateProfile() {
    if (!this.form.valid) {
      this.form.markAllAsTouched();
      return;
    }
    this.busy$.next(true);
    this.userProfile.update(this.form.value).subscribe({
      next: () => this.onSuccess(),
      error: error => this.onError(error)
    });
  }
  onSuccess() {
    this.globalMessageService.add({
      key: 'updateProfileForm.profileUpdateSuccess'
    }, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageType.MSG_TYPE_CONFIRMATION);
    this.busy$.next(false);
    this.form.reset();
  }
  onError(_error) {
    this.busy$.next(false);
  }
}
UpdateProfileComponentService.ɵfac = function UpdateProfileComponentService_Factory(t) {
  return new (t || UpdateProfileComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserProfileFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService));
};
UpdateProfileComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UpdateProfileComponentService,
  factory: UpdateProfileComponentService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdateProfileComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserProfileFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdateProfileComponent {
  constructor(service) {
    this.service = service;
    this.form = this.service.form;
    this.isUpdating$ = this.service.isUpdating$;
    this.titles$ = this.service.titles$;
  }
  onSubmit() {
    this.service.updateProfile();
  }
}
UpdateProfileComponent.ɵfac = function UpdateProfileComponent_Factory(t) {
  return new (t || UpdateProfileComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](UpdateProfileComponentService));
};
UpdateProfileComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: UpdateProfileComponent,
  selectors: [["cx-update-profile"]],
  hostAttrs: [1, "user-form"],
  decls: 38,
  vars: 46,
  consts: [["class", "overlay", 4, "ngIf"], [3, "formGroup", "ngSubmit"], [1, "label-content"], ["formControlName", "titleCode", "id", "title-select", 3, "clearable", "searchable", "cxNgSelectA11y"], [3, "value", 4, "ngFor", "ngForOf"], ["required", "true", "type", "text", "name", "firstName", "formControlName", "firstName", 1, "form-control", 3, "placeholder"], [3, "control"], ["required", "true", "type", "text", "name", "lastName", "formControlName", "lastName", 1, "form-control", 3, "placeholder"], ["required", "true", "type", "text", "name", "customerId", "formControlName", "customerId", "readonly", "", 1, "form-control"], [1, "btn", "btn-block", "btn-secondary", 3, "routerLink"], [1, "btn", "btn-block", "btn-primary", 3, "disabled"], [1, "overlay"], [3, "value"]],
  template: function UpdateProfileComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, UpdateProfileComponent_cx_spinner_0_Template, 1, 0, "cx-spinner", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "form", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("ngSubmit", function UpdateProfileComponent_Template_form_ngSubmit_2_listener() {
        return ctx.onSubmit();
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "label")(4, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](6, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "ng-select", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](9, UpdateProfileComponent_ng_option_9_Template, 2, 2, "ng-option", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "label")(12, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](13);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](14, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](15, "input", 5);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](16, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](17, "cx-form-errors", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "label")(19, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](20);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](21, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](22, "input", 7);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](23, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](24, "cx-form-errors", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](25, "label")(26, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](27);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](28, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](29, "input", 8)(30, "cx-form-errors", 6);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](31, "a", 9);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](32, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](33);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](34, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](35, "button", 10);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](36);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](37, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 19, ctx.isUpdating$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx.form);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](6, 21, "updateProfileForm.title"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("clearable", false)("searchable", false)("cxNgSelectA11y", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](43, _c3, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 23, "updateProfileForm.title")));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 25, ctx.titles$));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](14, 27, "updateProfileForm.firstName.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](16, 29, "updateProfileForm.firstName.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("firstName"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](21, 31, "updateProfileForm.lastName.label"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("placeholder", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](23, 33, "updateProfileForm.lastName.placeholder"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("lastName"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](28, 35, "updateProfileForm.customerId"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("control", ctx.form.get("lastName"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](32, 37, _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction0"](45, _c1)));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](34, 39, "common.cancel"), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.form.disabled);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](37, 41, "common.save"), " ");
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormControlName, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsComponent, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterLink, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgSelectComponent, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgOptionComponent, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.NgSelectA11yDirective, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdateProfileComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-update-profile',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      host: {
        class: 'user-form'
      },
      template: "<cx-spinner class=\"overlay\" *ngIf=\"isUpdating$ | async\"> </cx-spinner>\n\n<form (ngSubmit)=\"onSubmit()\" [formGroup]=\"form\">\n  <label>\n    <span class=\"label-content\">{{\n      'updateProfileForm.title' | cxTranslate\n    }}</span>\n    <ng-select\n      [clearable]=\"false\"\n      [searchable]=\"false\"\n      formControlName=\"titleCode\"\n      id=\"title-select\"\n      [cxNgSelectA11y]=\"{\n        ariaLabel: 'updateProfileForm.title' | cxTranslate\n      }\"\n    >\n      <ng-option *ngFor=\"let title of titles$ | async\" [value]=\"title.code\">{{\n        title.name\n      }}</ng-option>\n    </ng-select>\n  </label>\n  <label>\n    <span class=\"label-content\">{{\n      'updateProfileForm.firstName.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"text\"\n      class=\"form-control\"\n      name=\"firstName\"\n      placeholder=\"{{\n        'updateProfileForm.firstName.placeholder' | cxTranslate\n      }}\"\n      formControlName=\"firstName\"\n    />\n    <cx-form-errors [control]=\"form.get('firstName')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'updateProfileForm.lastName.label' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"text\"\n      class=\"form-control\"\n      name=\"lastName\"\n      placeholder=\"{{ 'updateProfileForm.lastName.placeholder' | cxTranslate }}\"\n      formControlName=\"lastName\"\n    />\n    <cx-form-errors [control]=\"form.get('lastName')\"></cx-form-errors>\n  </label>\n\n  <label>\n    <span class=\"label-content\">{{\n      'updateProfileForm.customerId' | cxTranslate\n    }}</span>\n    <input\n      required=\"true\"\n      type=\"text\"\n      class=\"form-control\"\n      name=\"customerId\"\n      formControlName=\"customerId\"\n      readonly\n    />\n    <cx-form-errors [control]=\"form.get('lastName')\"></cx-form-errors>\n  </label>\n\n  <a\n    class=\"btn btn-block btn-secondary\"\n    [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n  >\n    {{ 'common.cancel' | cxTranslate }}\n  </a>\n\n  <button class=\"btn btn-block btn-primary\" [disabled]=\"form.disabled\">\n    {{ 'common.save' | cxTranslate }}\n  </button>\n</form>\n"
    }]
  }], function () {
    return [{
      type: UpdateProfileComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UpdateProfileModule {}
UpdateProfileModule.ɵfac = function UpdateProfileModule_Factory(t) {
  return new (t || UpdateProfileModule)();
};
UpdateProfileModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UpdateProfileModule
});
UpdateProfileModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
    cmsComponents: {
      UpdateProfileComponent: {
        component: UpdateProfileComponent,
        guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard],
        providers: [{
          provide: UpdateProfileComponentService,
          useClass: UpdateProfileComponentService,
          deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserProfileFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService]
        }]
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgSelectModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.NgSelectA11yModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UpdateProfileModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.ReactiveFormsModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.SpinnerModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.I18nModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.FormErrorsModule, _angular_router__WEBPACK_IMPORTED_MODULE_8__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.UrlModule, _ng_select_ng_select__WEBPACK_IMPORTED_MODULE_15__.NgSelectModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_1__.NgSelectA11yModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.provideDefaultConfig)({
        cmsComponents: {
          UpdateProfileComponent: {
            component: UpdateProfileComponent,
            guards: [_spartacus_core__WEBPACK_IMPORTED_MODULE_4__.AuthGuard],
            providers: [{
              provide: UpdateProfileComponentService,
              useClass: UpdateProfileComponentService,
              deps: [_spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_5__.UserProfileFacade, _spartacus_core__WEBPACK_IMPORTED_MODULE_4__.GlobalMessageService]
            }]
          }
        }
      })],
      declarations: [UpdateProfileComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileComponentsModule {}
UserProfileComponentsModule.ɵfac = function UserProfileComponentsModule_Factory(t) {
  return new (t || UserProfileComponentsModule)();
};
UserProfileComponentsModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UserProfileComponentsModule
});
UserProfileComponentsModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [RegisterComponentModule, UpdateProfileModule, UpdateEmailModule, UpdatePasswordModule, ForgotPasswordModule, ResetPasswordModule, CloseAccountModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserProfileComponentsModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [RegisterComponentModule, UpdateProfileModule, UpdateEmailModule, UpdatePasswordModule, ForgotPasswordModule, ResetPasswordModule, CloseAccountModule]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 6655:
/*!*******************************************************************************!*\
  !*** ./node_modules/@spartacus/user/fesm2020/spartacus-user-profile-core.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "TITLE_NORMALIZER": () => (/* binding */ TITLE_NORMALIZER),
/* harmony export */   "USER_PROFILE_NORMALIZER": () => (/* binding */ USER_PROFILE_NORMALIZER),
/* harmony export */   "USER_PROFILE_SERIALIZER": () => (/* binding */ USER_PROFILE_SERIALIZER),
/* harmony export */   "USER_SERIALIZER": () => (/* binding */ USER_SERIALIZER),
/* harmony export */   "USER_SIGN_UP_SERIALIZER": () => (/* binding */ USER_SIGN_UP_SERIALIZER),
/* harmony export */   "UserEmailService": () => (/* binding */ UserEmailService),
/* harmony export */   "UserPasswordService": () => (/* binding */ UserPasswordService),
/* harmony export */   "UserProfileAdapter": () => (/* binding */ UserProfileAdapter),
/* harmony export */   "UserProfileConnector": () => (/* binding */ UserProfileConnector),
/* harmony export */   "UserProfileCoreModule": () => (/* binding */ UserProfileCoreModule),
/* harmony export */   "UserProfileService": () => (/* binding */ UserProfileService),
/* harmony export */   "UserRegisterService": () => (/* binding */ UserRegisterService)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ 9095);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 3910);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 8759);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var _spartacus_user_account_root__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @spartacus/user/account/root */ 1020);
/* harmony import */ var _ngrx_store__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @ngrx/store */ 3488);
/* harmony import */ var _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @spartacus/user/profile/root */ 8756);










/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const USER_PROFILE_NORMALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('UserProfileNormalizer');
const USER_PROFILE_SERIALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('UserProfileSerializer');
const USER_SERIALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('UserSerializer');
const USER_SIGN_UP_SERIALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('UserSignUpSerializer');
const TITLE_NORMALIZER = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken('TitleNormalizer');

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileAdapter {}

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileConnector {
  constructor(userProfileAdapter) {
    this.userProfileAdapter = userProfileAdapter;
  }
  update(username, user) {
    return this.userProfileAdapter.update(username, user);
  }
  register(user) {
    return this.userProfileAdapter.register(user);
  }
  registerGuest(guid, password) {
    return this.userProfileAdapter.registerGuest(guid, password);
  }
  requestForgotPasswordEmail(userEmailAddress) {
    return this.userProfileAdapter.requestForgotPasswordEmail(userEmailAddress);
  }
  resetPassword(token, newPassword) {
    return this.userProfileAdapter.resetPassword(token, newPassword);
  }
  updateEmail(userId, currentPassword, newUserId) {
    return this.userProfileAdapter.updateEmail(userId, currentPassword, newUserId);
  }
  updatePassword(userId, oldPassword, newPassword) {
    return this.userProfileAdapter.updatePassword(userId, oldPassword, newPassword);
  }
  remove(userId) {
    return this.userProfileAdapter.close(userId);
  }
  getTitles() {
    return this.userProfileAdapter.loadTitles();
  }
}
UserProfileConnector.ɵfac = function UserProfileConnector_Factory(t) {
  return new (t || UserProfileConnector)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](UserProfileAdapter));
};
UserProfileConnector.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UserProfileConnector,
  factory: UserProfileConnector.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserProfileConnector, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: UserProfileAdapter
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserEmailService {
  constructor(userIdService, userProfileConnector, command) {
    this.userIdService = userIdService;
    this.userProfileConnector = userProfileConnector;
    this.command = command;
    this.updateCommand = this.command.create(payload => this.userIdService.takeUserId(true).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(uid => this.userProfileConnector.updateEmail(uid, payload.password, payload.newUid))), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandStrategy.Queue
    });
  }
  /**
   * Updates the user's email.
   *
   * @param password to users password to confirm the users
   * @param newUid the new proposed email address.
   */
  update(password, newUid) {
    return this.updateCommand.execute({
      password,
      newUid
    });
  }
}
UserEmailService.ɵfac = function UserEmailService_Factory(t) {
  return new (t || UserEmailService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](UserProfileConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService));
};
UserEmailService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UserEmailService,
  factory: UserEmailService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserEmailService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserIdService
    }, {
      type: UserProfileConnector
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserPasswordService {
  constructor(userProfileConnector, userIdService, command) {
    this.userProfileConnector = userProfileConnector;
    this.userIdService = userIdService;
    this.command = command;
    this.updateCommand = this.command.create(payload => this.userIdService.takeUserId(true).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(uid => this.userProfileConnector.updatePassword(uid, payload.oldPassword, payload.newPassword))));
    this.resetCommand = this.command.create(payload => this.userProfileConnector.resetPassword(payload.token, payload.password));
    this.requestForgotPasswordEmailCommand = this.command.create(payload => this.userProfileConnector.requestForgotPasswordEmail(payload.email));
  }
  /**
   * Updates the password for the user
   *
   * The method returns an observable with `LoaderState` information, including the
   * actual user data.
   *
   * @param oldPassword the current password that will be changed
   * @param newPassword the new password
   */
  update(oldPassword, newPassword) {
    return this.updateCommand.execute({
      oldPassword,
      newPassword
    });
  }
  /**
   * Reset new password. Part of the forgot password flow.
   *
   * @param token
   * @param password
   */
  reset(token, password) {
    return this.resetCommand.execute({
      token,
      password
    });
  }
  /*
   * Request an email to reset a forgotten password.
   */
  requestForgotPasswordEmail(email) {
    return this.requestForgotPasswordEmailCommand.execute({
      email
    });
  }
}
UserPasswordService.ɵfac = function UserPasswordService_Factory(t) {
  return new (t || UserPasswordService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](UserProfileConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService));
};
UserPasswordService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UserPasswordService,
  factory: UserPasswordService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserPasswordService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: UserProfileConnector
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserIdService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileService {
  constructor(userAccountService, authService, userProfileConnector, eventService, userIdService, query, command) {
    this.userAccountService = userAccountService;
    this.authService = authService;
    this.userProfileConnector = userProfileConnector;
    this.eventService = eventService;
    this.userIdService = userIdService;
    this.query = query;
    this.command = command;
    this.updateCommand = this.command.create(payload => this.userIdService.takeUserId(true).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(uid => this.userProfileConnector.update(uid, payload.details).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.tap)(() => {
      this.eventService.dispatch({
        user: payload.details
      }, _spartacus_user_account_root__WEBPACK_IMPORTED_MODULE_5__.UserAccountChangedEvent);
    })))), {
      strategy: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandStrategy.Queue
    });
    this.closeCommand = this.command.create(() => this.userIdService.takeUserId(true).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.switchMap)(uid => this.userProfileConnector.remove(uid).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.tap)(() => this.authService.logout())))));
    this.titleQuery = this.query.create(() => this.userProfileConnector.getTitles(), {
      reloadOn: [_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.LanguageSetEvent]
    });
  }
  get() {
    return this.userAccountService.get();
  }
  /**
   * Updates the user's details.
   *
   * @param details User details to be updated.
   */
  update(details) {
    return this.updateCommand.execute({
      details
    });
  }
  /**
   * Closes the user account.
   */
  close() {
    return this.closeCommand.execute(undefined);
  }
  /**
   * Returns titles that can be used for the user profiles.
   */
  getTitles() {
    return this.titleQuery.get().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(titles => titles ?? []));
  }
}
UserProfileService.ɵfac = function UserProfileService_Factory(t) {
  return new (t || UserProfileService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_user_account_root__WEBPACK_IMPORTED_MODULE_5__.UserAccountFacade), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](UserProfileConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.EventService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserIdService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.QueryService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService));
};
UserProfileService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UserProfileService,
  factory: UserProfileService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserProfileService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _spartacus_user_account_root__WEBPACK_IMPORTED_MODULE_5__.UserAccountFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.AuthService
    }, {
      type: UserProfileConnector
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.EventService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserIdService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.QueryService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserRegisterService {
  constructor(userProfile, userConnector, authService, command, store) {
    this.userProfile = userProfile;
    this.userConnector = userConnector;
    this.authService = authService;
    this.command = command;
    this.store = store;
    this.registerCommand = this.command.create(({
      user
    }) => this.userConnector.register(user).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.tap)(() => {
      // this is a compatibility mechanism only, to make anonymous consents
      // management work properly in transitional period (when we move logic
      // to separate libraries)
      this.store.dispatch(new _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.UserActions.RegisterUserSuccess());
    })));
    this.registerGuestCommand = this.command.create(payload => this.userConnector.registerGuest(payload.guid, payload.password).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.tap)(user => {
      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
      this.authService.loginWithCredentials(user.uid, payload.password);
    })));
  }
  /**
   * Register a new user.
   *
   * @param submitFormData as UserRegisterFormData
   */
  register(user) {
    return this.registerCommand.execute({
      user
    });
  }
  /**
   * Register a new user from guest.
   *
   * @param guid
   * @param password
   */
  registerGuest(guid, password) {
    return this.registerGuestCommand.execute({
      guid,
      password
    });
  }
  /**
   * Returns titles that can be used for the user profiles.
   */
  getTitles() {
    return this.userProfile.getTitles();
  }
}
UserRegisterService.ɵfac = function UserRegisterService_Factory(t) {
  return new (t || UserRegisterService)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](UserProfileService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](UserProfileConnector), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_ngrx_store__WEBPACK_IMPORTED_MODULE_7__.Store));
};
UserRegisterService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: UserRegisterService,
  factory: UserRegisterService.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserRegisterService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: UserProfileService
    }, {
      type: UserProfileConnector
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.AuthService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_2__.CommandService
    }, {
      type: _ngrx_store__WEBPACK_IMPORTED_MODULE_7__.Store
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const facadeProviders = [UserEmailService, UserPasswordService, UserProfileService, UserRegisterService, {
  provide: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_8__.UserEmailFacade,
  useExisting: UserEmailService
}, {
  provide: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_8__.UserPasswordFacade,
  useExisting: UserPasswordService
}, {
  provide: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_8__.UserProfileFacade,
  useExisting: UserProfileService
}, {
  provide: _spartacus_user_profile_root__WEBPACK_IMPORTED_MODULE_8__.UserRegisterFacade,
  useExisting: UserRegisterService
}];

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileCoreModule {}
UserProfileCoreModule.ɵfac = function UserProfileCoreModule_Factory(t) {
  return new (t || UserProfileCoreModule)();
};
UserProfileCoreModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UserProfileCoreModule
});
UserProfileCoreModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [UserProfileConnector, ...facadeProviders]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserProfileCoreModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      providers: [UserProfileConnector, ...facadeProviders]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 2000:
/*!******************************************************************************!*\
  !*** ./node_modules/@spartacus/user/fesm2020/spartacus-user-profile-occ.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "OccUserProfileAdapter": () => (/* binding */ OccUserProfileAdapter),
/* harmony export */   "UserProfileOccModule": () => (/* binding */ UserProfileOccModule),
/* harmony export */   "defaultOccUserProfileConfig": () => (/* binding */ defaultOccUserProfileConfig)
/* harmony export */ });
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common/http */ 8987);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var _spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @spartacus/user/profile/core */ 6655);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 6587);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 7418);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 6942);










/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const defaultOccUserProfileConfig = {
  backend: {
    occ: {
      endpoints: {
        userRegister: 'users',
        userForgotPassword: 'forgottenpasswordtokens',
        userResetPassword: 'resetpassword',
        userUpdateLoginId: 'users/${userId}/login',
        userUpdatePassword: 'users/${userId}/password',
        titles: 'titles'
      }
    }
  }
};

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const CONTENT_TYPE_JSON_HEADER = {
  'Content-Type': 'application/json'
};
const CONTENT_TYPE_URLENCODED_HEADER = {
  'Content-Type': 'application/x-www-form-urlencoded'
};
class OccUserProfileAdapter {
  constructor(http, occEndpoints, converter) {
    this.http = http;
    this.occEndpoints = occEndpoints;
    this.converter = converter;
    this.logger = (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.inject)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.LoggerService);
  }
  update(userId, user) {
    const endpoint = this.occEndpoints.isConfigured('userUpdateProfile') ? 'userUpdateProfile' : 'user';
    const url = this.occEndpoints.buildUrl(endpoint, {
      urlParams: {
        userId
      }
    });
    user = this.converter.convert(user, _spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.USER_PROFILE_SERIALIZER);
    return this.http.patch(url, user).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))));
  }
  register(user) {
    const url = this.occEndpoints.buildUrl('userRegister');
    let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpHeaders({
      ...CONTENT_TYPE_JSON_HEADER
    });
    headers = _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.InterceptorUtil.createHeader(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.USE_CLIENT_TOKEN, true, headers);
    user = this.converter.convert(user, _spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.USER_SIGN_UP_SERIALIZER);
    return this.http.post(url, user, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), this.converter.pipeable(_spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.USER_PROFILE_NORMALIZER));
  }
  registerGuest(guid, password) {
    const url = this.occEndpoints.buildUrl('userRegister');
    let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpHeaders({
      ...CONTENT_TYPE_URLENCODED_HEADER
    });
    headers = _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.InterceptorUtil.createHeader(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.USE_CLIENT_TOKEN, true, headers);
    const httpParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpParams().set('guid', guid).set('password', password);
    return this.http.post(url, httpParams, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), this.converter.pipeable(_spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.USER_PROFILE_NORMALIZER));
  }
  requestForgotPasswordEmail(userEmailAddress) {
    const url = this.occEndpoints.buildUrl('userForgotPassword');
    const httpParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpParams().set('userId', userEmailAddress);
    let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpHeaders({
      ...CONTENT_TYPE_URLENCODED_HEADER
    });
    headers = _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.InterceptorUtil.createHeader(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.USE_CLIENT_TOKEN, true, headers);
    return this.http.post(url, httpParams, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))));
  }
  resetPassword(token, newPassword) {
    const url = this.occEndpoints.buildUrl('userResetPassword');
    let headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpHeaders({
      ...CONTENT_TYPE_JSON_HEADER
    });
    headers = _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.InterceptorUtil.createHeader(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.USE_CLIENT_TOKEN, true, headers);
    return this.http.post(url, {
      token,
      newPassword
    }, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))));
  }
  updateEmail(userId, currentPassword, newUserId) {
    const url = this.occEndpoints.buildUrl('userUpdateLoginId', {
      urlParams: {
        userId
      }
    });
    const httpParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpParams().set('password', currentPassword).set('newLogin', newUserId);
    const headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpHeaders({
      ...CONTENT_TYPE_URLENCODED_HEADER
    });
    return this.http.put(url, httpParams, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))));
  }
  updatePassword(userId, oldPassword, newPassword) {
    const url = this.occEndpoints.buildUrl('userUpdatePassword', {
      urlParams: {
        userId
      }
    });
    const httpParams = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpParams().set('old', oldPassword).set('new', newPassword);
    const headers = new _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpHeaders({
      ...CONTENT_TYPE_URLENCODED_HEADER
    });
    return this.http.put(url, httpParams, {
      headers
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))));
  }
  close(userId) {
    const endpoint = this.occEndpoints.isConfigured('userCloseAccount') ? 'userCloseAccount' : 'user';
    const url = this.occEndpoints.buildUrl(endpoint, {
      urlParams: {
        userId
      }
    });
    return this.http.delete(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))));
  }
  loadTitles() {
    const url = this.occEndpoints.buildUrl('titles');
    return this.http.get(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.catchError)(error => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.throwError)((0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.normalizeHttpError)(error, this.logger))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(titleList => titleList.titles ?? []), this.converter.pipeableMany(_spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.TITLE_NORMALIZER));
  }
}
OccUserProfileAdapter.ɵfac = function OccUserProfileAdapter_Factory(t) {
  return new (t || OccUserProfileAdapter)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpClient), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService));
};
OccUserProfileAdapter.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: OccUserProfileAdapter,
  factory: OccUserProfileAdapter.ɵfac
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](OccUserProfileAdapter, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable
  }], function () {
    return [{
      type: _angular_common_http__WEBPACK_IMPORTED_MODULE_5__.HttpClient
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccEndpointsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ConverterService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileOccModule {}
UserProfileOccModule.ɵfac = function UserProfileOccModule_Factory(t) {
  return new (t || UserProfileOccModule)();
};
UserProfileOccModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UserProfileOccModule
});
UserProfileOccModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)(defaultOccUserProfileConfig), {
    provide: _spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.UserProfileAdapter,
    useClass: OccUserProfileAdapter
  }]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserProfileOccModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)(defaultOccUserProfileConfig), {
        provide: _spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_2__.UserProfileAdapter,
        useClass: OccUserProfileAdapter
      }]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 2092:
/*!**************************************************************************!*\
  !*** ./node_modules/@spartacus/user/fesm2020/spartacus-user-profile.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "UserProfileModule": () => (/* binding */ UserProfileModule)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_user_profile_components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @spartacus/user/profile/components */ 1841);
/* harmony import */ var _spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/user/profile/core */ 6655);
/* harmony import */ var _spartacus_user_profile_occ__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @spartacus/user/profile/occ */ 2000);






/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class UserProfileModule {}
UserProfileModule.ɵfac = function UserProfileModule_Factory(t) {
  return new (t || UserProfileModule)();
};
UserProfileModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: UserProfileModule
});
UserProfileModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_1__.UserProfileCoreModule, _spartacus_user_profile_occ__WEBPACK_IMPORTED_MODULE_2__.UserProfileOccModule, _spartacus_user_profile_components__WEBPACK_IMPORTED_MODULE_3__.UserProfileComponentsModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](UserProfileModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_spartacus_user_profile_core__WEBPACK_IMPORTED_MODULE_1__.UserProfileCoreModule, _spartacus_user_profile_occ__WEBPACK_IMPORTED_MODULE_2__.UserProfileOccModule, _spartacus_user_profile_components__WEBPACK_IMPORTED_MODULE_3__.UserProfileComponentsModule]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ })

}]);
//# sourceMappingURL=node_modules_spartacus_user_fesm2020_spartacus-user-profile_mjs.js.map