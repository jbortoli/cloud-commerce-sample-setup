"use strict";
(self["webpackChunkmystore_6_3"] = self["webpackChunkmystore_6_3"] || []).push([["node_modules_spartacus_cart_fesm2020_spartacus-cart-base-components-mini-cart_mjs"],{

/***/ 1991:
/*!********************************************************************************************!*\
  !*** ./node_modules/@spartacus/cart/fesm2020/spartacus-cart-base-components-mini-cart.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "MiniCartComponent": () => (/* binding */ MiniCartComponent),
/* harmony export */   "MiniCartComponentService": () => (/* binding */ MiniCartComponentService),
/* harmony export */   "MiniCartModule": () => (/* binding */ MiniCartModule)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @spartacus/cart/base/root */ 6061);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 4139);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 9193);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs/operators */ 9095);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ 5722);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 3298);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 5050);
/* harmony import */ var _spartacus_storefront__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @spartacus/storefront */ 4373);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/router */ 124);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ 4666);















/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const _c0 = function () {
  return {
    cxRoute: "cart"
  };
};
const _c1 = function (a0) {
  return {
    count: a0
  };
};
const _c2 = function (a0) {
  return {
    total: a0
  };
};
class MiniCartComponentService {
  constructor(activeCartFacade, authService, statePersistenceService, siteContextParamsService, eventService) {
    this.activeCartFacade = activeCartFacade;
    this.authService = authService;
    this.statePersistenceService = statePersistenceService;
    this.siteContextParamsService = siteContextParamsService;
    this.eventService = eventService;
  }
  /**
   * This function supports lazy loading of the cart functionality's code. We only call
   * the activeCartFacade if we know there is actually a cart.
   * Without a cart, we can return a default value and
   * avoid loading the cart library code.
   */
  getQuantity() {
    return this.activeCartRequired().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.switchMap)(activeCartRequired => {
      if (activeCartRequired) {
        return this.activeCartFacade.getActive().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.startWith)({
          totalUnitCount: 0
        }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(cart => cart.totalUnitCount || 0));
      } else {
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)(0);
      }
    }));
  }
  /**
   * This function supports lazy loading of the cart functionality's code. We only call
   * the activeCartFacade if we know there is actually a cart.
   * Without a cart, we can return a default value and
   * avoid loading the cart library code.
   */
  getTotalPrice() {
    return this.activeCartRequired().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.switchMap)(activeCartRequired => {
      if (activeCartRequired) {
        return this.activeCartFacade.getActive().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(cart => cart.totalPrice?.formattedValue ?? ''));
      } else {
        return (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)('');
      }
    }));
  }
  /**
   * This function determines if it is required to get active cart data from ActiveCartFacade.
   * It is required to call the ActiveCartFacade if one of these criteria is met:
   * - There is an active cart id in the browser local storage
   * - A user is authenticated
   * - The cart library code chunk with the ActiveCartFacade implementation is already loaded.
   *
   * Once the observable returned by activeCartRequired emits true, it completes.
   * activeCartRequired helps to make the mini cart compatible with some level of lazy loading.
   */
  activeCartRequired() {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.combineLatest)([this.hasActiveCartInStorage(), this.authService.isUserLoggedIn(), this.isCartCreated()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(([hasCartInStorage, isUserLoggedIn, isCartCreated]) => hasCartInStorage || isUserLoggedIn || isCartCreated), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.distinctUntilChanged)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.takeWhile)(hasCart => !hasCart, true));
  }
  hasActiveCartInStorage() {
    return this.getCartStateFromBrowserStorage().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(state => Boolean(state?.active)));
  }
  isCartCreated() {
    return this.eventService.get(_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_7__.CreateCartEvent).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => true), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.startWith)(false));
  }
  getCartStateFromBrowserStorage() {
    return this.siteContextParamsService.getValues([_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.BASE_SITE_CONTEXT_ID]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(context => {
      return this.statePersistenceService.readStateFromStorage({
        key: 'cart',
        context: context,
        storageType: _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.StorageSyncType.LOCAL_STORAGE
      });
    }));
  }
}
MiniCartComponentService.ɵfac = function MiniCartComponentService_Factory(t) {
  return new (t || MiniCartComponentService)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](_spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_7__.ActiveCartFacade), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.AuthService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.StatePersistenceService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.SiteContextParamsService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.EventService));
};
MiniCartComponentService.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineInjectable"]({
  token: MiniCartComponentService,
  factory: MiniCartComponentService.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵsetClassMetadata"](MiniCartComponentService, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_9__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_cart_base_root__WEBPACK_IMPORTED_MODULE_7__.ActiveCartFacade
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.AuthService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.StatePersistenceService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.SiteContextParamsService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.EventService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class MiniCartComponent {
  constructor(miniCartComponentService) {
    this.miniCartComponentService = miniCartComponentService;
    this.iconTypes = _spartacus_storefront__WEBPACK_IMPORTED_MODULE_10__.ICON_TYPE;
    this.quantity$ = this.miniCartComponentService.getQuantity();
    this.total$ = this.miniCartComponentService.getTotalPrice();
  }
}
MiniCartComponent.ɵfac = function MiniCartComponent_Factory(t) {
  return new (t || MiniCartComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](MiniCartComponentService));
};
MiniCartComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineComponent"]({
  type: MiniCartComponent,
  selectors: [["cx-mini-cart"]],
  decls: 13,
  vars: 29,
  consts: [[3, "routerLink"], [3, "type"], [1, "total"], [1, "count"]],
  template: function MiniCartComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "a", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](1, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](2, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](3, "cxUrl");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](4, "cx-icon", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](5, "span", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](6);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](7, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](8, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](9, "span", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](10);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](11, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](12, "async");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](3, 10, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction0"](22, _c0)));
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵattribute"]("aria-label", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](1, 5, "miniCart.item", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](23, _c1, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](2, 8, ctx.quantity$))));
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("type", ctx.iconTypes.CART);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](7, 12, "miniCart.total", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](25, _c2, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](8, 15, ctx.total$))), " ");
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](11, 17, "miniCart.count", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](27, _c1, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](12, 20, ctx.quantity$))), " ");
    }
  },
  dependencies: [_angular_router__WEBPACK_IMPORTED_MODULE_11__.RouterLink, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_10__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_12__.AsyncPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.UrlPipe, _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵsetClassMetadata"](MiniCartComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_9__.Component,
    args: [{
      selector: 'cx-mini-cart',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_9__.ChangeDetectionStrategy.OnPush,
      template: "<a\n  [attr.aria-label]=\"\n    'miniCart.item' | cxTranslate: { count: quantity$ | async }\n  \"\n  [routerLink]=\"{ cxRoute: 'cart' } | cxUrl\"\n>\n  <cx-icon [type]=\"iconTypes.CART\"></cx-icon>\n\n  <span class=\"total\">\n    {{ 'miniCart.total' | cxTranslate: { total: total$ | async } }}\n  </span>\n\n  <span class=\"count\">\n    {{ 'miniCart.count' | cxTranslate: { count: quantity$ | async } }}\n  </span>\n</a>\n"
    }]
  }], function () {
    return [{
      type: MiniCartComponentService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class MiniCartModule {}
MiniCartModule.ɵfac = function MiniCartModule_Factory(t) {
  return new (t || MiniCartModule)();
};
MiniCartModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineNgModule"]({
  type: MiniCartModule
});
MiniCartModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.provideDefaultConfig)({
    cmsComponents: {
      MiniCartComponent: {
        component: MiniCartComponent
      }
    }
  })],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_12__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_11__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.UrlModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_10__.IconModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.I18nModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵsetClassMetadata"](MiniCartModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_9__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_12__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_11__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.UrlModule, _spartacus_storefront__WEBPACK_IMPORTED_MODULE_10__.IconModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_8__.I18nModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_8__.provideDefaultConfig)({
        cmsComponents: {
          MiniCartComponent: {
            component: MiniCartComponent
          }
        }
      })],
      declarations: [MiniCartComponent],
      exports: [MiniCartComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ })

}]);
//# sourceMappingURL=node_modules_spartacus_cart_fesm2020_spartacus-cart-base-components-mini-cart_mjs.js.map