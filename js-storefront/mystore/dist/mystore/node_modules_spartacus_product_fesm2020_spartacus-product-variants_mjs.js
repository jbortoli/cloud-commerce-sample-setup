"use strict";
(self["webpackChunkmystore_6_3"] = self["webpackChunkmystore_6_3"] || []).push([["node_modules_spartacus_product_fesm2020_spartacus-product-variants_mjs"],{

/***/ 593:
/*!********************************************************************************************!*\
  !*** ./node_modules/@spartacus/product/fesm2020/spartacus-product-variants-components.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProductVariantColorSelectorComponent": () => (/* binding */ ProductVariantColorSelectorComponent),
/* harmony export */   "ProductVariantColorSelectorModule": () => (/* binding */ ProductVariantColorSelectorModule),
/* harmony export */   "ProductVariantSizeSelectorComponent": () => (/* binding */ ProductVariantSizeSelectorComponent),
/* harmony export */   "ProductVariantSizeSelectorModule": () => (/* binding */ ProductVariantSizeSelectorModule),
/* harmony export */   "ProductVariantStyleSelectorComponent": () => (/* binding */ ProductVariantStyleSelectorComponent),
/* harmony export */   "ProductVariantStyleSelectorModule": () => (/* binding */ ProductVariantStyleSelectorModule),
/* harmony export */   "ProductVariantsComponentsModule": () => (/* binding */ ProductVariantsComponentsModule),
/* harmony export */   "ProductVariantsContainerComponent": () => (/* binding */ ProductVariantsContainerComponent),
/* harmony export */   "ProductVariantsContainerModule": () => (/* binding */ ProductVariantsContainerModule),
/* harmony export */   "ProductVariantsGuard": () => (/* binding */ ProductVariantsGuard)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 4666);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ 124);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/core */ 6458);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 9151);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 3910);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 3298);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 8759);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 9095);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 6942);
/* harmony import */ var _spartacus_storefront__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @spartacus/storefront */ 4373);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 4139);












/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
function ProductVariantColorSelectorComponent_option_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "option", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const v_r1 = ctx.$implicit;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", v_r1.code);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("selected", v_r1.code === (ctx_r0.product == null ? null : ctx_r0.product.code));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx_r0.getVariantOptionValue(v_r1.variantOptionQualifiers), " ");
  }
}
function ProductVariantSizeSelectorComponent_option_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "option", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const v_r1 = ctx.$implicit;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("value", v_r1.code);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("selected", v_r1.code === (ctx_r0.product == null ? null : ctx_r0.product.code));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx_r0.getVariantOptionValue(v_r1.variantOptionQualifiers), " ");
  }
}
function ProductVariantStyleSelectorComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "cxTranslate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](2, 2, "productVariants.style"), ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](ctx_r0.getVariantOptionValue(ctx_r0.variants == null ? null : ctx_r0.variants.selected.variantOptionQualifiers));
  }
}
const _c0 = function (a0) {
  return {
    "selected-variant": a0
  };
};
function ProductVariantStyleSelectorComponent_li_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "li", 6)(1, "button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ProductVariantStyleSelectorComponent_li_4_Template_button_click_1_listener() {
      const restoredCtx = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4);
      const v_r2 = restoredCtx.$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r3.changeStyle(v_r2.code));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](2, "img", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const v_r2 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngClass", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpureFunction1"](4, _c0, v_r2.code === (ctx_r1.variants == null ? null : ctx_r1.variants.selected == null ? null : ctx_r1.variants.selected.code)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("src", ctx_r1.getVariantThumbnailUrl(v_r2.variantOptionQualifiers), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("title", ctx_r1.getVariantOptionValue(v_r2.variantOptionQualifiers));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("alt", ctx_r1.getVariantOptionValue(v_r2.variantOptionQualifiers));
  }
}
function ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_style_selector_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-product-variant-style-selector", 5);
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("variants", ctx_r3.variants[ctx_r3.variantType.STYLE]);
  }
}
function ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_size_selector_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-product-variant-size-selector", 6);
  }
  if (rf & 2) {
    const product_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).ngIf;
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("product", product_r1)("variants", ctx_r4.variants[ctx_r4.variantType.SIZE]);
  }
}
function ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_color_selector_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "cx-product-variant-color-selector", 6);
  }
  if (rf & 2) {
    const product_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2).ngIf;
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("product", product_r1)("variants", ctx_r5.variants[ctx_r5.variantType.COLOR]);
  }
}
function ProductVariantsContainerComponent_ng_container_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_style_selector_1_Template, 1, 1, "cx-product-variant-style-selector", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_size_selector_2_Template, 1, 2, "cx-product-variant-size-selector", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](3, ProductVariantsContainerComponent_ng_container_0_div_1_cx_product_variant_color_selector_3_Template, 1, 2, "cx-product-variant-color-selector", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.variants[ctx_r2.variantType.STYLE]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.variants[ctx_r2.variantType.SIZE]);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r2.variants[ctx_r2.variantType.COLOR]);
  }
}
function ProductVariantsContainerComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ProductVariantsContainerComponent_ng_container_0_div_1_Template, 4, 3, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const product_r1 = ctx.ngIf;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", product_r1.baseOptions == null ? null : product_r1.baseOptions.length);
  }
}
class ProductVariantColorSelectorComponent {
  constructor(routingService) {
    this.routingService = routingService;
  }
  changeColor(code, name) {
    if (code) {
      this.routingService.go({
        cxRoute: 'product',
        params: {
          code,
          name
        }
      });
    }
    return null;
  }
  getVariantOptionValue(qualifiers) {
    const obj = qualifiers.find(q => q.qualifier === _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.VariantQualifier.COLOR);
    return obj ? obj.value : '';
  }
}
ProductVariantColorSelectorComponent.ɵfac = function ProductVariantColorSelectorComponent_Factory(t) {
  return new (t || ProductVariantColorSelectorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.RoutingService));
};
ProductVariantColorSelectorComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: ProductVariantColorSelectorComponent,
  selectors: [["cx-product-variant-color-selector"]],
  inputs: {
    product: "product",
    variants: "variants"
  },
  decls: 7,
  vars: 4,
  consts: [[1, "variant-selector"], [1, "variant-name"], [1, "form-control", "variant-select", 3, "change"], [3, "value", "selected", 4, "ngFor", "ngForOf"], [3, "value", "selected"]],
  template: function ProductVariantColorSelectorComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 0)(2, "div", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "select", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function ProductVariantColorSelectorComponent_Template_select_change_5_listener($event) {
        return ctx.changeColor($event.target.value, ctx.product == null ? null : ctx.product.name);
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ProductVariantColorSelectorComponent_option_6_Template, 2, 3, "option", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 2, "productVariants.color"), ":");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.variants == null ? null : ctx.variants.options);
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgForOf, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantColorSelectorComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-product-variant-color-selector',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container>\n  <div class=\"variant-selector\">\n    <div class=\"variant-name\">{{ 'productVariants.color' | cxTranslate }}:</div>\n\n    <select\n      (change)=\"changeColor($event.target.value, product?.name)\"\n      class=\"form-control variant-select\"\n    >\n      <option\n        *ngFor=\"let v of variants?.options\"\n        value=\"{{ v.code }}\"\n        [selected]=\"v.code === product?.code\"\n      >\n        {{ getVariantOptionValue(v.variantOptionQualifiers) }}\n      </option>\n    </select>\n  </div>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.RoutingService
    }];
  }, {
    product: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }],
    variants: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }]
  });
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantColorSelectorModule {}
ProductVariantColorSelectorModule.ɵfac = function ProductVariantColorSelectorModule_Factory(t) {
  return new (t || ProductVariantColorSelectorModule)();
};
ProductVariantColorSelectorModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantColorSelectorModule
});
ProductVariantColorSelectorModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantColorSelectorModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule],
      declarations: [ProductVariantColorSelectorComponent],
      exports: [ProductVariantColorSelectorComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantSizeSelectorComponent {
  constructor(productService, routingService) {
    this.productService = productService;
    this.routingService = routingService;
  }
  changeSize(code) {
    if (code) {
      this.productService.get(code, "list" /* ProductScope.LIST */).pipe(
      // below call might looks redundant but in fact this data is going to be loaded anyways
      // we're just calling it earlier and storing
      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isNotUndefined), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.take)(1)).subscribe(product => {
        this.routingService.go({
          cxRoute: 'product',
          params: product
        });
      });
    }
    return null;
  }
  getVariantOptionValue(qualifiers) {
    const obj = qualifiers.find(q => q.qualifier === _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.VariantQualifier.SIZE);
    return obj ? obj.value : '';
  }
}
ProductVariantSizeSelectorComponent.ɵfac = function ProductVariantSizeSelectorComponent_Factory(t) {
  return new (t || ProductVariantSizeSelectorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ProductService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.RoutingService));
};
ProductVariantSizeSelectorComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: ProductVariantSizeSelectorComponent,
  selectors: [["cx-product-variant-size-selector"]],
  inputs: {
    product: "product",
    variants: "variants"
  },
  decls: 11,
  vars: 10,
  consts: [[1, "variant-selector"], [1, "variant-name"], [1, "form-control", "variant-select", 3, "change"], [3, "value", "selected", 4, "ngFor", "ngForOf"], ["href", "#", 1, "size-guide", 3, "title"], [3, "value", "selected"]],
  template: function ProductVariantSizeSelectorComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 0)(2, "div", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](4, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "select", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("change", function ProductVariantSizeSelectorComponent_Template_select_change_5_listener($event) {
        return ctx.changeSize($event.target.value);
      });
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](6, ProductVariantSizeSelectorComponent_option_6_Template, 2, 3, "option", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "a", 4);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](8, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](10, "cxTranslate");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"]("", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](4, 4, "productVariants.size"), ":");
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.variants == null ? null : ctx.variants.options);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpropertyInterpolate"]("title", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](8, 6, "productVariants.sizeGuideLabel"));
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](10, 8, "productVariants.sizeGuideLabel"), " ");
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgForOf, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantSizeSelectorComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-product-variant-size-selector',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container>\n  <div class=\"variant-selector\">\n    <div class=\"variant-name\">{{ 'productVariants.size' | cxTranslate }}:</div>\n    <select\n      (change)=\"changeSize($event.target.value)\"\n      class=\"form-control variant-select\"\n    >\n      <option\n        *ngFor=\"let v of variants?.options\"\n        value=\"{{ v.code }}\"\n        [selected]=\"v.code === product?.code\"\n      >\n        {{ getVariantOptionValue(v.variantOptionQualifiers) }}\n      </option>\n    </select>\n    <a\n      href=\"#\"\n      class=\"size-guide\"\n      title=\"{{ 'productVariants.sizeGuideLabel' | cxTranslate }}\"\n    >\n      {{ 'productVariants.sizeGuideLabel' | cxTranslate }}\n    </a>\n  </div>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ProductService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.RoutingService
    }];
  }, {
    product: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }],
    variants: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }]
  });
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantSizeSelectorModule {}
ProductVariantSizeSelectorModule.ɵfac = function ProductVariantSizeSelectorModule_Factory(t) {
  return new (t || ProductVariantSizeSelectorModule)();
};
ProductVariantSizeSelectorModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantSizeSelectorModule
});
ProductVariantSizeSelectorModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantSizeSelectorModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule],
      declarations: [ProductVariantSizeSelectorComponent],
      exports: [ProductVariantSizeSelectorComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantStyleSelectorComponent {
  constructor(config, productService, routingService) {
    this.config = config;
    this.productService = productService;
    this.routingService = routingService;
    this.variantQualifier = _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.VariantQualifier;
  }
  getVariantOptionValue(qualifiers) {
    const obj = qualifiers.find(q => q.qualifier === _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.VariantQualifier.STYLE);
    return obj ? obj.value : '';
  }
  getVariantThumbnailUrl(variantOptionQualifiers) {
    const qualifier = variantOptionQualifiers.find(item => item.image);
    return qualifier ? `${this.config?.backend?.occ?.baseUrl}${qualifier.image?.url}` : '';
  }
  changeStyle(code) {
    if (code) {
      this.productService.get(code, "list" /* ProductScope.LIST */).pipe(
      // below call might looks redundant but in fact this data is going to be loaded anyways
      // we're just calling it earlier and storing
      (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isNotUndefined), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.take)(1)).subscribe(product => {
        this.routingService.go({
          cxRoute: 'product',
          params: product
        });
      });
    }
    return null;
  }
}
ProductVariantStyleSelectorComponent.ɵfac = function ProductVariantStyleSelectorComponent_Factory(t) {
  return new (t || ProductVariantStyleSelectorComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccConfig), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ProductService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.RoutingService));
};
ProductVariantStyleSelectorComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: ProductVariantStyleSelectorComponent,
  selectors: [["cx-product-variant-style-selector"]],
  inputs: {
    variants: "variants"
  },
  decls: 5,
  vars: 2,
  consts: [[1, "variant-selector"], ["class", "variant-name", 4, "ngIf"], [1, "variant-list"], [3, "ngClass", 4, "ngFor", "ngForOf"], [1, "variant-name"], [1, "style-name"], [3, "ngClass"], [1, "variant-button", 3, "click"], [3, "src", "title", "alt"]],
  template: function ProductVariantStyleSelectorComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "div", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, ProductVariantStyleSelectorComponent_div_2_Template, 5, 4, "div", 1);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "ul", 2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, ProductVariantStyleSelectorComponent_li_4_Template, 3, 6, "li", 3);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.variants.selected);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.variants == null ? null : ctx.variants.options);
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgClass, _angular_common__WEBPACK_IMPORTED_MODULE_2__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.TranslatePipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantStyleSelectorComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-product-variant-style-selector',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container>\n  <div class=\"variant-selector\">\n    <div *ngIf=\"variants.selected\" class=\"variant-name\">\n      {{ 'productVariants.style' | cxTranslate }}:\n      <span class=\"style-name\">{{\n        getVariantOptionValue(variants?.selected.variantOptionQualifiers)\n      }}</span>\n    </div>\n    <ul class=\"variant-list\">\n      <li\n        *ngFor=\"let v of variants?.options\"\n        [ngClass]=\"{ 'selected-variant': v.code === variants?.selected?.code }\"\n      >\n        <button class=\"variant-button\" (click)=\"changeStyle(v.code)\">\n          <img\n            src=\"{{ getVariantThumbnailUrl(v.variantOptionQualifiers) }}\"\n            title=\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\"\n            alt=\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\"\n          />\n        </button>\n      </li>\n    </ul>\n  </div>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.OccConfig
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ProductService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.RoutingService
    }];
  }, {
    variants: [{
      type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Input
    }]
  });
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantStyleSelectorModule {}
ProductVariantStyleSelectorModule.ɵfac = function ProductVariantStyleSelectorModule_Factory(t) {
  return new (t || ProductVariantStyleSelectorModule)();
};
ProductVariantStyleSelectorModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantStyleSelectorModule
});
ProductVariantStyleSelectorModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantStyleSelectorModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule],
      declarations: [ProductVariantStyleSelectorComponent],
      exports: [ProductVariantStyleSelectorComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantsContainerComponent {
  constructor(currentProductService) {
    this.currentProductService = currentProductService;
    this.variants = {};
    this.variantType = _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.VariantType;
  }
  ngOnInit() {
    this.product$ = this.currentProductService.getProduct().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isNotNullable), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(product => !!product.baseOptions), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.distinctUntilChanged)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.tap)(product => {
      product.baseOptions.forEach(option => {
        if (option?.variantType) {
          this.variants[option.variantType] = option;
        }
      });
    }));
  }
}
ProductVariantsContainerComponent.ɵfac = function ProductVariantsContainerComponent_Factory(t) {
  return new (t || ProductVariantsContainerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_spartacus_storefront__WEBPACK_IMPORTED_MODULE_8__.CurrentProductService));
};
ProductVariantsContainerComponent.ɵcmp = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
  type: ProductVariantsContainerComponent,
  selectors: [["cx-product-variants-container"]],
  decls: 2,
  vars: 3,
  consts: [[4, "ngIf"], ["class", "variant-section", 4, "ngIf"], [1, "variant-section"], [3, "variants", 4, "ngIf"], [3, "product", "variants", 4, "ngIf"], [3, "variants"], [3, "product", "variants"]],
  template: function ProductVariantsContainerComponent_Template(rf, ctx) {
    if (rf & 1) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, ProductVariantsContainerComponent_ng_container_0_Template, 2, 1, "ng-container", 0);
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](1, "async");
    }
    if (rf & 2) {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](1, 1, ctx.product$));
    }
  },
  dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, ProductVariantStyleSelectorComponent, ProductVariantSizeSelectorComponent, ProductVariantColorSelectorComponent, _angular_common__WEBPACK_IMPORTED_MODULE_2__.AsyncPipe],
  encapsulation: 2,
  changeDetection: 0
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantsContainerComponent, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Component,
    args: [{
      selector: 'cx-product-variants-container',
      changeDetection: _angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectionStrategy.OnPush,
      template: "<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"variant-section\" *ngIf=\"product.baseOptions?.length\">\n    <cx-product-variant-style-selector\n      *ngIf=\"variants[variantType.STYLE]\"\n      [variants]=\"variants[variantType.STYLE]\"\n    ></cx-product-variant-style-selector>\n    <cx-product-variant-size-selector\n      *ngIf=\"variants[variantType.SIZE]\"\n      [product]=\"product\"\n      [variants]=\"variants[variantType.SIZE]\"\n    ></cx-product-variant-size-selector>\n    <cx-product-variant-color-selector\n      *ngIf=\"variants[variantType.COLOR]\"\n      [product]=\"product\"\n      [variants]=\"variants[variantType.COLOR]\"\n    ></cx-product-variant-color-selector>\n  </div>\n</ng-container>\n"
    }]
  }], function () {
    return [{
      type: _spartacus_storefront__WEBPACK_IMPORTED_MODULE_8__.CurrentProductService
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantsContainerModule {}
ProductVariantsContainerModule.ɵfac = function ProductVariantsContainerModule_Factory(t) {
  return new (t || ProductVariantsContainerModule)();
};
ProductVariantsContainerModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantsContainerModule
});
ProductVariantsContainerModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule, ProductVariantStyleSelectorModule, ProductVariantSizeSelectorModule, ProductVariantColorSelectorModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantsContainerModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule, _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.UrlModule, _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.I18nModule, ProductVariantStyleSelectorModule, ProductVariantSizeSelectorModule, ProductVariantColorSelectorModule],
      declarations: [ProductVariantsContainerComponent]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
/**
 * Guard that will redirect to purchasable variant of product, if the navigation
 * is for the non-purchasable one
 */
class ProductVariantsGuard {
  constructor(productService, semanticPathService, router) {
    this.productService = productService;
    this.semanticPathService = semanticPathService;
    this.router = router;
  }
  canActivate(activatedRoute) {
    const productCode = activatedRoute.params?.productCode;
    if (!productCode) {
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(true);
    }
    return this.productService.get(productCode, "variants" /* ProductScope.VARIANTS */).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isNotUndefined), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(product => {
      if (!product.purchasable) {
        const purchasableCode = this.findPurchasableProductCode(product);
        if (purchasableCode) {
          return this.productService.get(purchasableCode, "list" /* ProductScope.LIST */).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.isNotUndefined), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.take)(1), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(_product => {
            return this.router.createUrlTree(this.semanticPathService.transform({
              cxRoute: 'product',
              params: _product
            }));
          }));
        }
      }
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(true);
    }));
  }
  /**
   * Finds a purchasable product code looking at variant options, if any
   *
   * @param product
   */
  findPurchasableProductCode(product) {
    if (product.variantOptions?.length) {
      const results = product.variantOptions.filter(variant => {
        return variant.stock && variant.stock.stockLevel ? variant : false;
      });
      return results && results.length ? results[0]?.code : product.variantOptions[0]?.code;
    }
    return undefined;
  }
}
ProductVariantsGuard.ɵfac = function ProductVariantsGuard_Factory(t) {
  return new (t || ProductVariantsGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ProductService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.SemanticPathService), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_3__.Router));
};
ProductVariantsGuard.ɵprov = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjectable"]({
  token: ProductVariantsGuard,
  factory: ProductVariantsGuard.ɵfac,
  providedIn: 'root'
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantsGuard, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.Injectable,
    args: [{
      providedIn: 'root'
    }]
  }], function () {
    return [{
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.ProductService
    }, {
      type: _spartacus_core__WEBPACK_IMPORTED_MODULE_1__.SemanticPathService
    }, {
      type: _angular_router__WEBPACK_IMPORTED_MODULE_3__.Router
    }];
  }, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantsComponentsModule {}
ProductVariantsComponentsModule.ɵfac = function ProductVariantsComponentsModule_Factory(t) {
  return new (t || ProductVariantsComponentsModule)();
};
ProductVariantsComponentsModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantsComponentsModule
});
ProductVariantsComponentsModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)({
    cmsComponents: {
      ProductVariantSelectorComponent: {
        component: ProductVariantsContainerComponent,
        guards: [ProductVariantsGuard]
      }
    }
  })],
  imports: [ProductVariantsContainerModule, ProductVariantColorSelectorModule, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantsComponentsModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [ProductVariantsContainerModule, ProductVariantColorSelectorModule, ProductVariantSizeSelectorModule, ProductVariantStyleSelectorModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)({
        cmsComponents: {
          ProductVariantSelectorComponent: {
            component: ProductVariantsContainerComponent,
            guards: [ProductVariantsGuard]
          }
        }
      })]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 6550:
/*!*************************************************************************************!*\
  !*** ./node_modules/@spartacus/product/fesm2020/spartacus-product-variants-occ.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProductVariantsOccModule": () => (/* binding */ ProductVariantsOccModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 4666);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/core */ 6458);





/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
const defaultOccProductVariantsConfig = {
  backend: {
    occ: {
      endpoints: {
        product: {
          variants: 'products/${productCode}?fields=name,purchasable,baseOptions(DEFAULT),baseProduct,variantOptions(DEFAULT),variantType'
        }
      }
    }
  }
};

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantsOccModule {}
ProductVariantsOccModule.ɵfac = function ProductVariantsOccModule_Factory(t) {
  return new (t || ProductVariantsOccModule)();
};
ProductVariantsOccModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantsOccModule
});
ProductVariantsOccModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)(defaultOccProductVariantsConfig)],
  imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantsOccModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.CommonModule],
      providers: [(0,_spartacus_core__WEBPACK_IMPORTED_MODULE_1__.provideDefaultConfig)(defaultOccProductVariantsConfig)]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ }),

/***/ 2488:
/*!*********************************************************************************!*\
  !*** ./node_modules/@spartacus/product/fesm2020/spartacus-product-variants.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ProductVariantsModule": () => (/* binding */ ProductVariantsModule)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 2560);
/* harmony import */ var _spartacus_product_variants_occ__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @spartacus/product/variants/occ */ 6550);
/* harmony import */ var _spartacus_product_variants_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @spartacus/product/variants/components */ 593);





/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */
class ProductVariantsModule {}
ProductVariantsModule.ɵfac = function ProductVariantsModule_Factory(t) {
  return new (t || ProductVariantsModule)();
};
ProductVariantsModule.ɵmod = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineNgModule"]({
  type: ProductVariantsModule
});
ProductVariantsModule.ɵinj = /* @__PURE__ */_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineInjector"]({
  imports: [_spartacus_product_variants_occ__WEBPACK_IMPORTED_MODULE_1__.ProductVariantsOccModule, _spartacus_product_variants_components__WEBPACK_IMPORTED_MODULE_2__.ProductVariantsComponentsModule]
});
(function () {
  (typeof ngDevMode === "undefined" || ngDevMode) && _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵsetClassMetadata"](ProductVariantsModule, [{
    type: _angular_core__WEBPACK_IMPORTED_MODULE_0__.NgModule,
    args: [{
      imports: [_spartacus_product_variants_occ__WEBPACK_IMPORTED_MODULE_1__.ProductVariantsOccModule, _spartacus_product_variants_components__WEBPACK_IMPORTED_MODULE_2__.ProductVariantsComponentsModule]
    }]
  }], null, null);
})();

/*
 * SPDX-FileCopyrightText: 2023 SAP Spartacus team <spartacus-team@sap.com>
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/**
 * Generated bundle index. Do not edit.
 */



/***/ })

}]);
//# sourceMappingURL=node_modules_spartacus_product_fesm2020_spartacus-product-variants_mjs.js.map